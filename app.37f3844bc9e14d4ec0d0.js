!function(e){function t(t){for(var s,o,n=t[0],h=t[1],c=t[2],p=0,u=[];p<n.length;p++)o=n[p],a[o]&&u.push(a[o][0]),a[o]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);for(l&&l(t);u.length;)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,n=1;n<i.length;n++){var h=i[n];0!==a[h]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},a={1:0};var r=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window.webpackJsonp=window.webpackJsonp||[],h=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var l=h;r.push([216,0]),i()}({10:function(e,t,i){"use strict";i.d(t,"c",function(){return r}),i.d(t,"b",function(){return o}),i.d(t,"a",function(){return n});var s=i(11),a=i(375);function r(e,t=Math.random){switch(e.type){case"constant":return e.value;case"uniform":return e.min+t()*(e.max-e.min);case"exponential":return function(e,t,i,s=Math.random){let a=Math.log(1-s())/-e;void 0!==t&&(a=Math.max(t,a));void 0!==i&&(a=Math.min(i,a));return a}(e.rate,e.min,e.max,t);case"gaussian":return n(e.mean,e.sd,e.min,e.max,t)}}function o(e,t=Math.random){const i=Object(s.a)(e.template);for(const t of e.substs)Object(a.a)(i,t.path,r(t));return i}function n(e,t,i,s,a=Math.random){let r,o;do{r=a()}while(0===r);do{o=a()}while(0===o);let n=e+t*(Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*o));return void 0!==i&&(n=Math.max(i,n)),void 0!==s&&(n=Math.min(s,n)),n}},15:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return l}),i.d(t,"c",function(){return g}),i.d(t,"d",function(){return w});var s=i(41),a=i(2),r=i(30),o=i(10),n=i(4),h=i(379);const c=1e3;function l(e,t){const i=Object(s.a)(e.map(({element:e,amount:i})=>({color:parseInt(t[e].color,16),weight:i}))).toString(16);let o,n=0,h="",c=0;for(const{element:t,amount:i}of e)i>n&&(n=i,h=t),c+=i;return{id:"solution",name:o=n<100?"Mundane Solution":n/c<.5?"Mixed solution":n<300?`Solution of ${h}`:n<500?`Solution of Greater ${h}`:n<700?`Solution of Mythical ${h}`:`Solution of Perfect ${h}`,type:a.b.Type.Consumable,texture:{type:"composite",base:"sprites/items/solution",overlay:{type:"single",tex:"sprites/items/solution-overlay",tint:i}},aspects:e,effects:Object(r.a)(e)}}const p=.25,u=.4,d=1.5,m=.25,y=.1,f=1;function g(e,t){const i={};for(const{element:t,amount:s}of Object(h.a)(e.map(e=>e.aspects||[])))i[t]=(i[t]||0)+s;const s=e.some(({id:e})=>"gel-bone"===e)?d:1,a=e.some(({id:e})=>"gel-stone"===e)?d:1;for(const{name:e,composition:r}of n.c){if(!r)continue;const n=Object(o.c)(t[e].fusionThreshold)/s/a,h=Math.min(i[r[0]]||0,i[r[1]]||0);if(h<=n)continue;console.log(`fusion ${e}: ${h} <= ${n}`);const c=(h-n)*Object(o.c)(t[e].fusionRate),l=.5*Math.random()+.25;i[e]=(i[e]||0)+c*(1-y),i[r[0]]-=c*l,i[r[1]]-=c*(1-l)}for(const e of Object.keys(i)){const r=Object(o.c)(t[e].fissionThreshold)*a/s;if(i[e]>=r)continue;console.log(`fission ${e}: ${i[e]} >= ${r}`);const h=i[e]*Object(o.c)(t[e].fissionRate),c=n.b[e].composition,l=.5*Math.random()+.25;c&&(i[c[0]]=(i[c[0]]||0)+h*(1-m)*l,i[c[1]]=(i[c[1]]||0)+h*(1-m)*(1-l)),i[e]-=h}let r=0;if(e.some(({id:e})=>"gel-alchemy"===e)){for(const e of Object.keys(i))r+=i[e];for(const e of Object.keys(i)){i[e]/r<p&&(i[e]*=1-u)}}r=0;for(const e of Object.keys(i))r+=i[e];for(const e of Object.keys(i)){let t=i[e];t<f?t=0:t>c&&(t=c),i[e]=t}const l=Object.keys(i).map(e=>({element:e,amount:i[e]})).filter(({amount:e})=>e>0);return console.log(l),l}function w(e,t,i){return l(g([e,t],i),i)}},17:function(e,t,i){"use strict";const s=1/47,a=1/103,r=1/30,o=(Math.sqrt(3)-1)/2,n=(Math.sqrt(4)-1)/3,h=(Math.sqrt(5)-1)/4,c=(1/Math.sqrt(3)-1)/2,l=(1/Math.sqrt(4)-1)/3,p=(1/Math.sqrt(5)-1)/4,u=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],d=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],m=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],y=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],f=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],g=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],w=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],b=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],x=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],S=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],v=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],z=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];class k{constructor(e,t,i){this.dx=-t-e*o,this.dy=-i-e*o,this.xsb=t,this.ysb=i}}class T{constructor(e,t,i,s){this.dx=-t-e*n,this.dy=-i-e*n,this.dz=-s-e*n,this.xsb=t,this.ysb=i,this.zsb=s}}class j{constructor(e,t,i,s,a){this.dx=-t-e*h,this.dy=-i-e*h,this.dz=-s-e*h,this.dw=-a-e*h,this.xsb=t,this.ysb=i,this.zsb=s,this.wsb=a}}function O(e){const t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}class M{constructor(e){this.hashVals=new Uint32Array(4),this.initialize(),this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);const t=new Uint8Array(256);for(let e=0;e<256;e++)t[e]=e;let i=new Uint32Array(1);i[0]=e,i=O(O(O(i)));for(let e=255;e>=0;e--){i=O(i);const s=new Uint32Array(1);s[0]=(i[0]+31)%(e+1),s[0]<0&&(s[0]+=e+1),this.perm[e]=t[s[0]],this.perm2D[e]=14&this.perm[e],this.perm3D[e]=this.perm[e]%24*3,this.perm4D[e]=252&this.perm[e],t[s[0]]=t[e]}}array2D(e,t){const i=new Array(e);for(let s=0;s<e;s++){i[s]=new Array(t);for(let e=0;e<t;e++)i[s][e]=this.noise2D(s,e)}return i}array3D(e,t,i){const s=new Array(e);for(let a=0;a<e;a++){s[a]=new Array(t);for(let e=0;e<t;e++){s[a][e]=new Array(i);for(let t=0;t<i;t++)s[a][e][t]=this.noise3D(a,e,t)}}return s}array4D(e,t,i,s){const a=new Array(e);for(let r=0;r<e;r++){a[r]=new Array(t);for(let e=0;e<t;e++){a[r][e]=new Array(i);for(let t=0;t<i;t++){a[r][e][t]=new Array(s);for(let i=0;i<s;i++)a[r][e][t][i]=this.noise4D(r,e,t,i)}}}return a}noise2D(e,t){const i=(e+t)*c,a=e+i,r=t+i,n=Math.floor(a),h=Math.floor(r),l=(n+h)*o,p=e-(n+l),u=t-(h+l),d=a-n,m=r-h,f=d+m,g=this.hashVals;g[0]=d-m+1,g[1]=f,g[2]=f+m,g[3]=f+d;const w=g[0]|g[1]<<1|g[2]<<2|g[3]<<4;let b=this.lookup2D[w],x=0;for(;void 0!==b;){const e=p+b.dx,t=u+b.dy;let i=2-e*e-t*t;if(i>0){const s=n+b.xsb,a=h+b.ysb,r=this.perm2D[this.perm[255&s]+a&255],o=y[r]*e+y[r+1]*t;x+=(i*=i)*i*o}b=b.next}return x*s}noise3D(e,t,i){const s=(e+t+i)*l,[r,o,h]=[e+s,t+s,i+s],[c,p,u]=[Math.floor(r),Math.floor(o),Math.floor(h)],d=(c+p+u)*n,[m,y,g]=[e-(c+d),t-(p+d),i-(u+d)],[w,b,x]=[r-c,o-p,h-u],S=w+b+x,v=new Uint32Array(7);v[0]=b-x+1,v[1]=w-b+1,v[2]=w-x+1,v[3]=S,v[4]=S+x,v[5]=S+b,v[6]=S+w;const z=v[0]|v[1]<<1|v[2]<<2|v[3]<<3|v[4]<<5|v[5]<<7|v[6]<<9;let k=this.lookup3D[z],T=0;for(;void 0!==k;){const[e,t,i]=[m+k.dx,y+k.dy,g+k.dz];let s=2-e*e-t*t-i*i;if(s>0){const[a,r,o]=[c+k.xsb,p+k.ysb,u+k.zsb],n=this.perm3D[this.perm[this.perm[255&a]+r&255]+o&255],h=f[n]*e+f[n+1]*t+f[n+2]*i;T+=(s*=s)*s*h}k=k.next}return T*a}noise4D(e,t,i,s){const a=(e+t+i+s)*p,[o,n,c,l]=[e+a,t+a,i+a,s+a],[u,d,m,y]=[Math.floor(o),Math.floor(n),Math.floor(c),Math.floor(l)],f=(u+d+m+y)*h,w=e-(u+f),b=t-(d+f),x=i-(m+f),S=s-(y+f),[v,z,k,T]=[o-u,n-d,c-m,l-y],j=v+z+k+T,O=new Uint32Array(11);O[0]=k-T+1,O[1]=z-k+1,O[2]=z-T+1,O[3]=v-z+1,O[4]=v-k+1,O[5]=v-T+1,O[6]=j,O[7]=j+T,O[8]=j+k,O[9]=j+z,O[10]=j+v;const M=O[0]|O[1]<<1|O[2]<<2|O[3]<<3|O[4]<<4|O[5]<<5|O[6]<<6|O[7]<<8|O[8]<<11|O[9]<<14|O[10]<<17;let C=this.lookup4D[M],B=0;for(;void 0!==C;){const[e,t,i,s]=[w+C.dx,b+C.dy,x+C.dz,S+C.dw];let a=2-e*e-t*t-i*i-s*s;if(a>0){const[r,o,n,h]=[u+C.xsb,d+C.ysb,m+C.zsb,y+C.wsb],c=this.perm4D[this.perm[this.perm[this.perm[255&r]+o&255]+n&255]+h&255],l=g[c]*e+g[c+1]*t+g[c+2]*i+g[c+3]*s;B+=(a*=a)*a*l}C=C.next}return B*r}initialize(){const e=[];for(let t=0;t<S.length;t+=4){const i=u[S[t]];let s=null,a=null;for(let r=0;r<i.length;r+=3)a=new k(i[r],i[r+1],i[r+2]),null===s?e[t/4]=a:s.next=a,s=a;a.next=new k(S[t+1],S[t+2],S[t+3])}this.lookup2D=[];for(let t=0;t<w.length;t+=2)this.lookup2D[w[t]]=e[w[t+1]];const t=[];for(let e=0;e<v.length;e+=9){const i=d[v[e]];let s=null,a=null;for(let r=0;r<i.length;r+=4)a=new T(i[r],i[r+1],i[r+2],i[r+3]),null===s?t[e/9]=a:s.next=a,s=a;a.next=new T(v[e+1],v[e+2],v[e+3],v[e+4]),a.next.next=new T(v[e+5],v[e+6],v[e+7],v[e+8])}this.lookup3D=[];for(let e=0;e<b.length;e+=2)this.lookup3D[b[e]]=t[b[e+1]];const i=[];for(let e=0;e<z.length;e+=16){const t=m[z[e]];let s=null,a=null;for(let r=0;r<t.length;r+=5)a=new j(t[r],t[r+1],t[r+2],t[r+3],t[r+4]),null===s?i[e/16]=a:s.next=a,s=a;a.next=new j(z[e+1],z[e+2],z[e+3],z[e+4],z[e+5]),a.next.next=new j(z[e+6],z[e+7],z[e+8],z[e+9],z[e+10]),a.next.next.next=new j(z[e+11],z[e+12],z[e+13],z[e+14],z[e+15])}this.lookup4D=[];for(let e=0;e<x.length;e+=2)this.lookup4D[x[e]]=i[x[e+1]]}}i.d(t,"a",function(){return C});class C{constructor(e,t=1/256,i=4,s=.5){this.freq=t,this.octaves=i,this.persistence=s,this.noise=new M(4294967295*e.random())}noise2D(e,t){let i=1,s=0,a=this.freq,r=0;for(let o=0;o<this.octaves;o++)r+=this.noise.noise2D(e*a,t*a)*i,s+=i,i*=this.persistence,a*=2;return((r/=s)+1)/2}}},184:function(e,t,i){e.exports=i.p+"assets/712119d6b5b8404ce47d2f501258b540.woff"},185:function(e,t,i){e.exports=i.p+"assets/c47bbe6b531a3063257791bfa2de6ed8.otf"},186:function(e,t,i){e.exports=i.p+"assets/6d6a985a020034d856ef3579d5612c00.otf"},187:function(e,t,i){e.exports=i.p+"assets/3b0ea8776746732d38c9c352e0996a82.otf"},2:function(e,t,i){"use strict";var s;function a(e){const t=[],i=Object.keys(e).sort();let s=1;for(const a of i){const i=s++;t[i]=Object.assign({},e[a],{id:i,name:a})}return t}function r(e,t,i,s){return{terrains:a(e),objects:a(t),recipes:i,elements:s}}!function(e){let t;!function(e){e.Material="material",e.Consumable="consumable",e.Weapon="weapon",e.Chestplate="chestplate",e.Leggings="leggings",e.Boots="boots"}(t=e.Type||(e.Type={}))}(s||(s={}));var o=i(106);function n(e){return Object(o.fromByteArray)(new Uint8Array(e))}function h(e){return Object(o.toByteArray)(e).buffer}var c,l=i(105);function p(e){return l.deflate(new Uint8Array(e)).buffer}function u(e){return l.inflate(new Uint8Array(e)).buffer}class d{constructor(e,t,i,s,a,r){this.id=e,this.library=t,this.map=i,this.entities=s,this.custom=a,this.props=r}static load(e){const{id:t,library:i,map:s,entities:a,custom:r,props:o}=e;return new d(t,i,s,a,r||{},o)}save(){return{id:this.id,library:this.library,map:this.map,entities:this.entities,custom:this.custom,props:this.props}}static import(e){const t=JSON.parse(e);return t.map=Object.assign({},t.map,{terrains:new Uint16Array(u(h(t.map.terrains))),objects:new Uint16Array(u(h(t.map.objects)))}),d.load(t)}export(){const e=this.save();return e.map=Object.assign({},e.map,{terrains:n(p(e.map.terrains.buffer)),objects:n(p(e.map.objects.buffer))}),JSON.stringify(e)}}!function(e){let t;!function(e){e.Sword="sword",e.Spear="spear",e.Bow="bow",e.Arrow="arrow",e.Fist="fist",e.Bolt="bolt",e.Orb="orb",e.Invisible="invisible"}(t=e.Type||(e.Type={}))}(c||(c={})),i.d(t,"b",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"a",function(){return d}),i.d(t,"c",function(){return c})},215:function(e,t,i){"use strict";i.r(t);var s,a=i(2),r=i(17),o=i(188),n=i(0);!function(e){let t,i;!function(e){e[e.None=0]="None",e[e.FrozenBarren=1]="FrozenBarren",e[e.Barren=2]="Barren",e[e.Desert=3]="Desert",e[e.SnowPlain=4]="SnowPlain",e[e.Savanna=5]="Savanna",e[e.Plain=6]="Plain",e[e.Taiga=7]="Taiga",e[e.Forest=8]="Forest",e[e.FrozenLake=9]="FrozenLake",e[e.Lake=10]="Lake",e[e.Swamp=11]="Swamp"}(t=e.Type||(e.Type={})),function(e){e[e.None=0]="None",e[e.Spawn=1]="Spawn",e[e.Pond=2]="Pond",e[e.LavaPond=3]="LavaPond",e[e.Floral=4]="Floral",e[e.Rocky=5]="Rocky",e[e.Oasis=6]="Oasis",e[e.Cemetery=7]="Cemetery",e[e.Ruins=8]="Ruins"}(i=e.Feature||(e.Feature={}))}(s||(s={}));var h=i(40);class c{constructor(e,t,i,s,a){function r(e){return Object.assign({},...e.filter(e=>e).map(e=>({[e.name]:e.id})))}this.width=e,this.height=t,this.seed=i,this.enemies=s,this.library=a,this.biomes=[],this.rivers=[],this.map={},this.game={},this.entities=[],this.terrains=new Uint16Array(e*t),this.objects=new Uint16Array(e*t),this.tileBiomes=new Uint16Array(e*t),this.random=Object(h.create)(i),this.game.nextEntityId=2,this.terrainLookup=r(a.terrains),this.objectLookup=r(a.objects)}finalizeMap(){return{width:this.width,height:this.height,props:this.map,terrains:this.terrains,objects:this.objects}}toIndex(e,t){return e=Math.floor(e),t=Math.floor(t),e>=0&&e<this.width&&t>=0&&t<this.height?e+this.width*t:-1}getTerrain(e,t){const i=this.toIndex(e,t);if(i<0)return 0;{const e=this.library.terrains[this.terrains[i]];return e&&e.name}}getObject(e,t){const i=this.toIndex(e,t);if(i<0)return 0;{const e=this.library.objects[this.objects[i]];return e&&e.name}}getBiomeIndex(e,t){const i=this.toIndex(e,t);return i<0?-1:this.tileBiomes[i]}setTerrain(e,t,i){const s=this.toIndex(e,t);s<0||(this.terrains[s]=i?this.terrainLookup[i]:0)}setObject(e,t,i){const s=this.toIndex(e,t);s<0||(this.objects[s]=i?this.objectLookup[i]:0)}setBiomeIndex(e,t,i){const s=this.toIndex(e,t);s<0||(this.tileBiomes[s]=i)}}var l=i(55),p=i(10),u=i(4),d=i(56);function*m(e,t){for(let i=0;i<e.length;i++)yield e[i],t(null,i/e.length)}function y(e,t,i,s){const a=i*Math.SQRT1_2,r=e=>e/a,o=new Uint32Array(Math.ceil(r(e))*Math.ceil(r(t))),n=(t,i)=>Math.floor(r(t))+Math.floor(r(i))*Math.ceil(r(e)),h=[],c=[],l=(s,r)=>{if(s=Math.floor(s),r=Math.floor(r),s<0||r<0||s>=e||r>=t)return!1;if(o[n(s,r)])return!1;for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++){const h=o[n(s+t*a,r+e*a)];if(!h)continue;const l=c[h-1][0]-s,p=c[h-1][1]-r;if(l*l+p*p<=i*i)return!1}return h.push([s,r]),o[n(s,r)]=c.push([s,r]),!0};for(l(s.range(e),s.range(t));h.length>0;){const e=s.range(h.length);let t;for(t=0;t<64;t++){const t=s.floatBetween(0,2*Math.PI),a=s.floatBetween(i,2*i);if(l(h[e][0]+Math.cos(t)*a,h[e][1]+Math.sin(t)*a))break}64===t&&h.splice(e,1)}return c}function f(e,t,i={type:"uniform",min:0,max:1},s={type:"uniform",min:0,max:1}){const a=Object(d.a)(100*t,function(){const t=360*e.random(),a=100*Object(p.c)(s,e.random),r=100*Object(p.c)(i,e.random);return Object(l.lch)(a,r,t)}),r=a.splice(e.range(a.length),1);for(let e=1;e<t;e++){let e=0,t=r[0];for(const i of a){let s=1e3;for(const t of r){const a=Object(l.distance)(t,i);if((s=Math.min(s,a))<e)break}s>e&&(e=s,t=i)}r.push(t)}return r.map(e=>e.rgb()).map(([e,t,i])=>65536*e+256*t+1*i)}function g(e,t){let i,s;do{const t=u.c.filter(e=>e.tier<=1);i=t.splice(e.range(t.length),1)[0],s=t.splice(e.range(t.length),1)[0]}while(t.indexOf(`${i.name}:${s.name}`)>=0);return t.push(`${i.name}:${s.name}`),[i.name,s.name]}function w(e,t,i,s,a){e=Math.floor(e),t=Math.floor(t),i=Math.floor(i),s=Math.floor(s);const r=Math.abs(i-e),o=Math.abs(s-t),n=Math.sign(i-e),h=Math.sign(s-t);let c=r-o;for(a(e,t);e!==i||t!==s;){2*c>-o?(c-=o,e+=n):(c+=r,t+=h),a(e,t)}}const b=32,x=16,S=8,v=16;const z=[[s.Type.FrozenBarren,.15,.2,1],[s.Type.Barren,0,.5,1],[s.Type.Desert,.15,.8,1],[s.Type.SnowPlain,.25,.25,1],[s.Type.Savanna,.25,.75,1],[s.Type.Plain,.5,.5,1],[s.Type.Taiga,.7,.25,1],[s.Type.Forest,.7,.75,1],[s.Type.FrozenLake,.8,.25,1],[s.Type.Lake,1,.5,1],[s.Type.Swamp,.8,.75,1]];function k(e,t){t("generating biomes...",0),function(e){const t=y(e.width,e.height,b,e.random),i=Object(o.a)()(t);e.voronoi=i,e.biomes=t.map(([t,i],a)=>({index:a,type:s.Type.None,feature:s.Feature.None,position:n.b.fromValues(t,i),min:n.b.fromValues(e.width-1,e.height-1),max:n.b.fromValues(0,0),humidity:0,temperature:0}))}(e),function(e){const t=y(e.width,e.height,b*v,e.random).map(t=>({position:t,level:e.random.floatBetween(.5,1)})),i=[],s=[],a=new r.a(e.random,1/128,1);for(const{position:r,level:o}of t){let t=o,n=r,h=e.random.floatBetween(-Math.PI,Math.PI);for(;n[0]>=0&&n[0]<e.width&&n[1]>=0&&n[1]<e.height&&t>.25;){i.push({position:n,level:t});const r=e.random.floatBetween(b,2*b),o=[n[0]+Math.cos(h)*r,n[1]+Math.sin(h)*r];h+=(2*a.noise2D(n[0],n[1])-1)*Math.PI/4,s.push({from:n,to:o,level:t}),t*=e.random.floatBetween(.9,1),n=o}}for(const t of e.biomes){const e=Math.sqrt(b*v*b*v*2);t.humidity=0;for(const{position:s,level:a}of i){const i=n.b.dist(s,t.position),r=a*(0===i?1:Math.pow(1-Math.min(1,i/e),2));r>t.humidity&&(t.humidity=r)}}e.rivers=s}(e),function(e){const t=new r.a(e.random,.002,1);for(const i of e.biomes){const e=2*t.noise2D(i.position[0],i.position[1])-1,s=Math.sign(e)*Math.pow(Math.abs(e),1);i.temperature=(s+1)/2}}(e),function(e){for(const t of e.biomes){let e=Number.MAX_VALUE;for(const[i,s,a,r]of z){const o=t.humidity-s,n=t.temperature-a,h=1/(r*r)*(o*o+n*n);h<e&&(e=h,t.type=i)}}}(e),function(e,t){const i=new r.a(e.random,1/32,4),a=new r.a(e.random,1/32,4);for(let r=0;r<e.height;r++){for(let t=0;t<e.width;t++){const o=2*i.noise2D(t,r)-1,n=2*a.noise2D(t,r)-1;let h=t+o*x,c=r+n*x;const l=e.biomes[e.voronoi.find(h,c).index];h+=e.random.floatBetween(-S,S),c+=e.random.floatBetween(-S,S);const p=e.biomes[e.voronoi.find(h,c).index];let u=p;l.type!==s.Type.Lake&&l.type!==s.Type.FrozenLake&&p.type!==s.Type.Lake&&p.type!==s.Type.FrozenLake||(u=l);let d=null;switch(u.type){case s.Type.FrozenBarren:d="snow";break;case s.Type.Barren:d=e.random.range(50)?"soil":"grass-light";break;case s.Type.Desert:d="sand";break;case s.Type.SnowPlain:d="snow";break;case s.Type.Savanna:d="grass-light";break;case s.Type.Plain:d="grass";break;case s.Type.Taiga:d="snow";break;case s.Type.Forest:d="grass-deep";break;case s.Type.FrozenLake:d="ice";break;case s.Type.Lake:d="water";break;case s.Type.Swamp:d=e.random.range(5)?"mud":"grass-deep"}e.setTerrain(t,r,d),e.setBiomeIndex(t,r,l.index),l.min[0]=Math.min(l.min[0],t),l.min[1]=Math.min(l.min[1],r),l.max[0]=Math.max(l.max[0],t),l.max[1]=Math.max(l.max[1],r)}t(null,r/e.height)}}(e,t)}const T={[s.Type.FrozenBarren]:[["stone",.02],["rocks",.02]],[s.Type.Barren]:[["stone",.02],["rocks",.02]],[s.Type.Desert]:[["tree-coconut",.001],["stone",.01],["rocks",.01],["cactus",.01]],[s.Type.SnowPlain]:[["berries",.002],["flower",.005],["tree-spruce",.005],["bush",.008],["rocks",.01],["fern",.05]],[s.Type.Savanna]:[["rocks",.004],["berries",.004],["flower",.005],["tree-oak",.005],["bush",.006],["fern",.1]],[s.Type.Plain]:[["bush",.004],["tree-oak",.005],["berries",.006],["rocks",.01],["flower",.02],["fern",.4]],[s.Type.Taiga]:[["rocks",.001],["berries",.003],["flower",.005],["bush",.007],["fern",.05],["tree-spruce",.1]],[s.Type.Forest]:[["rocks",.001],["bush",.004],["flower",.005],["berries",.006],["fern",.05],["tree-oak",.1]],[s.Type.Swamp]:[["rocks",.001],["fern",.05]]};var j=i(11);function O(e,t,i){return Object(j.a)({id:e,type:"enemy",age:0,traits:{spatial:{pos:i},"enemy-data":{def:t},behavior:{behaviors:t.behaviors},stats:{base:t.stats}}})}const M=128,C=4,B=16,I=16,F=24,P=.2,A=128,D={[s.Type.Barren]:[s.Feature.LavaPond,s.Feature.LavaPond,s.Feature.Rocky,s.Feature.Cemetery,s.Feature.Cemetery,s.Feature.Ruins],[s.Type.FrozenBarren]:[s.Feature.Rocky,s.Feature.Rocky,s.Feature.Cemetery,s.Feature.Cemetery,s.Feature.Cemetery,s.Feature.Ruins],[s.Type.Desert]:[s.Feature.LavaPond,s.Feature.LavaPond,s.Feature.LavaPond,s.Feature.Rocky,s.Feature.Rocky,s.Feature.Oasis,s.Feature.Oasis,s.Feature.Oasis,s.Feature.Cemetery],[s.Type.SnowPlain]:[s.Feature.Pond,s.Feature.Floral,s.Feature.Floral,s.Feature.Rocky,s.Feature.Cemetery,s.Feature.Ruins],[s.Type.Savanna]:[s.Feature.Pond,s.Feature.Pond,s.Feature.Floral,s.Feature.Floral,s.Feature.Rocky,s.Feature.Ruins],[s.Type.Plain]:[s.Feature.Pond,s.Feature.Pond,s.Feature.Pond,s.Feature.Floral,s.Feature.Floral,s.Feature.Rocky,s.Feature.Ruins],[s.Type.Taiga]:[s.Feature.Pond,s.Feature.Pond,s.Feature.Pond,s.Feature.Floral,s.Feature.Floral,s.Feature.Floral,s.Feature.Ruins],[s.Type.Forest]:[s.Feature.Pond,s.Feature.Pond,s.Feature.Pond,s.Feature.Floral,s.Feature.Floral,s.Feature.Floral,s.Feature.Ruins],[s.Type.Swamp]:[s.Feature.Pond,s.Feature.Rocky,s.Feature.Rocky,s.Feature.Cemetery,s.Feature.Cemetery]};function $(e,t,i,s){for(let a=t.min[1]-C;a<=t.max[1]+C;a++)for(let r=t.min[0]-C;r<=t.max[0]+C;r++){let o=r,n=a;if(s){const[e,t]=s(r,a);o+=e,n+=t}e.getBiomeIndex(o,n)===t.index&&i(r,a)}}function E(e,t){t("generating features...",0),function(e,t){const i=y(e.width,e.height,M,e.random),a=new r.a(e.random,1/32,4),o=new r.a(e.random,1/32,4);for(const[r,h]of m(i,t)){const t=e.biomes[e.getBiomeIndex(r,h)],i=D[t.type];if(!i)continue;const c=i[e.random.range(10)];if(c){switch(c){case s.Feature.Pond:case s.Feature.LavaPond:{let i;"water"==(i=c===s.Feature.LavaPond?"lava":"water")&&$(e,t,(t,i)=>e.setTerrain(t,i,"sand"),(e,t)=>[(2*a.noise2D(e,t)-1)*B,(2*o.noise2D(e,t)-1)*B]),$(e,t,(t,s)=>e.setTerrain(t,s,i))}break;case s.Feature.Oasis:$(e,t,(t,i)=>e.setTerrain(t,i,"water")),$(e,t,(t,i)=>{"sand"===e.getTerrain(t,i)&&0===e.random.range(5)&&e.setObject(t,i,"tree-coconut")},(e,i)=>{const s=n.b.sub(n.b.create(),[e,i],t.position);return n.b.scale(s,n.b.normalize(s,s),C),[-s[0],-s[1]]});break;case s.Feature.Cemetery:$(e,t,(t,i)=>{0===e.random.range(3)&&(e.setTerrain(t,i,"mud"),0===e.random.range(10)?e.setObject(t,i,"cross"):0===e.random.range(10)&&e.setObject(t,i,"bones"))}),e.entities.push(O(e.game.nextEntityId++,e.enemies.spawner,[r,h])),e.setObject(r,h,null);break;case s.Feature.Ruins:$(e,t,(t,i)=>{e.setTerrain(t,i,"stone"),0===e.random.range(50)?e.setObject(t,i,"pillar"):0===e.random.range(50)&&e.setObject(t,i,"bones")},(t,i)=>[e.random.intBetween(-C,C),e.random.intBetween(-C,C)]),e.entities.push(O(e.game.nextEntityId++,e.enemies.spawner,[r,h])),e.setObject(r,h,null)}if(t.feature=c,c===s.Feature.Floral||c===s.Feature.Rocky){let t;(t=e.biomes[e.getBiomeIndex(r-M,h)])&&(t.feature=c),(t=e.biomes[e.getBiomeIndex(r+M,h)])&&(t.feature=c),(t=e.biomes[e.getBiomeIndex(r,h-M)])&&(t.feature=c),(t=e.biomes[e.getBiomeIndex(r,h+M)])&&(t.feature=c)}}}const h=[e.width*P,e.height*P];let c;do{c=e.biomes[e.getBiomeIndex(e.random.intBetween(h[0],e.width-h[0]),e.random.intBetween(h[1],e.width-h[1]))]}while(c.feature!==s.Feature.None&&c.type!==s.Type.Lake&&c.type!==s.Type.FrozenLake);c.feature=s.Feature.Spawn,e.map.spawn=[c.position[0],c.position[1]]}(e,t),function(e,t){const i=new r.a(e.random,1/32,4),a=new r.a(e.random,1/32,4);for(const{from:r,to:h,level:c}of m(e.rivers,t)){function o(e){let t=r[0]+(h[0]-r[0])*(e/I),s=r[1]+(h[1]-r[1])*(e/I);return[t+=Math.floor((2*i.noise2D(t,s)-1)*F),s+=Math.floor((2*a.noise2D(t,s)-1)*F)]}function n(e){if(!e)return!1;switch(e.type){case s.Type.FrozenLake:case s.Type.FrozenBarren:case s.Type.SnowPlain:case s.Type.Taiga:return!0}return!1}for(let t=0;t<I;t++){const i=o(t),s=o(t+1),a=e.biomes[e.getBiomeIndex(i[0],i[1])],r=e.biomes[e.getBiomeIndex(s[0],s[1])],h=n(a)&&n(r)?"ice":"water";w(i[0],i[1],s[0],s[1],(t,i)=>{const s=Math.round(4*c);for(let a=0;a<s;a++)for(let r=0;r<s;r++)"water"!==e.getTerrain(t+r,i+a)&&e.setTerrain(t+r,i+a,h),e.setObject(t+r,i+a,null)})}}}(e,t),function(e,t){const i=y(e.width,e.height,A,e.random),s=e.map.spawn;for(const t of i){const i=t[0]-s[0],a=t[1]-s[1];i*i+a*a<4096||(e.entities.push(O(e.game.nextEntityId++,e.enemies.egg,t)),e.setObject(t[0],t[1],null))}}(e)}var L=i(54),V=i(5);function W(e,t,i,s){return{numDrops:{type:"exponential",min:e,max:t,rate:i},items:[{prob:1,item:s}]}}var _=i(3);const q=()=>({"tree-coconut":{texture:"sprites/objects/tree-coco",color:"4d6211",scale:3,jitter:!0,collidable:!0,obstacle:!0,drops:{hp:5,replaceWith:null,table:W(2,4,.5,{template:{id:"wood-palm",name:"Palm Wood",type:a.b.Type.Material,texture:"sprites/items/wood"},substs:[]})}},"tree-oak":{texture:"sprites/objects/tree-oak",color:"01ac1d",scale:3,jitter:!0,collidable:!0,obstacle:!0,drops:{hp:5,replaceWith:null,table:W(2,4,.5,{template:{id:"wood-oak",name:"Oak Wood",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/wood",tint:"a0a0a0"}},substs:[]})}},"tree-spruce":{texture:"sprites/objects/tree-spruce",color:"004b01",scale:3,jitter:!0,collidable:!0,obstacle:!0,drops:{hp:5,replaceWith:null,table:W(2,4,.5,{template:{id:"wood-spruce",name:"Spruce Wood",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/wood",tint:"808080"}},substs:[]})}},bones:{texture:"sprites/objects/bones",color:"cccccc",jitter:!0,terrain:!0,collidable:!0,obstacle:!0,drops:{hp:3,replaceWith:null,table:W(2,5,.7,{template:{id:"bone",name:"Bone",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/bone",tint:"ccb396"},material:{name:"Bone",color:"ccb396",weight:.1,toughness:.1,sharpness:.15,affinity:.15}},substs:[]})}},cross:{texture:"sprites/objects/cross",color:"cccccc",scale:2,jitter:!0,collidable:!0,obstacle:!0},pillar:{texture:{type:"random",texs:["sprites/objects/pillar-1","sprites/objects/pillar-2","sprites/objects/pillar-3"]},color:"606060",scale:2,collidable:!0,obstacle:!0},fern:{texture:{type:"random",texs:["sprites/objects/fern-1","sprites/objects/fern-2","sprites/objects/fern-3"]},color:"416652",jitter:!0,collidable:!0,drops:{hp:0,replaceWith:null,table:W(0,1,4,{template:{id:"leaf",name:"Leaf",type:a.b.Type.Consumable,texture:"sprites/items/leaf",material:{name:"Leaf",color:"00d000",weight:.05,toughness:.05,sharpness:.05,affinity:.1},aspects:[{element:u.a.Type.Life,amount:50}],effects:[Object(V.b)(_.a.Type.Heal,5,0)]},substs:[]})}},cactus:{texture:"sprites/objects/cactus",color:"416652",scale:1.5,jitter:!0,collidable:!0,obstacle:!0},bush:{texture:"sprites/objects/bush",color:"416652",scale:1.5,jitter:!0,collidable:!0,obstacle:!0},stone:{texture:"sprites/objects/stone",color:"505050",jitter:!0,collidable:!0,obstacle:!0,drops:{hp:8,replaceWith:null,table:W(2,5,.5,{template:{id:"stone",name:"Stone",type:a.b.Type.Material,texture:"sprites/items/stone"},substs:[]})}},rocks:{texture:{type:"random",texs:["sprites/objects/rocks-1","sprites/objects/rocks-2","sprites/objects/rocks-3"]},color:"505050",jitter:!0,terrain:!0,collidable:!0,drops:{hp:1,replaceWith:null,table:W(1,3,1,{template:{id:"stone",name:"Stone",type:a.b.Type.Material,texture:"sprites/items/stone"},substs:[]})}}});function H(e,t){return{input:e,output:t}}const R=()=>[H([{accepts:"^bone$",texture:{type:"single",tex:"sprites/items/bone",tint:"ccb396"}},{accepts:"^leaf$",texture:"sprites/items/leaf"}],{id:"gel-bone",name:"Bone Gel",description:"alchemical reagent: boost elemental fusion",type:a.b.Type.Consumable,texture:{type:"single",tex:"sprites/items/gel",tint:"ccb396"}}),H([{accepts:"^stone$",texture:"sprites/items/stone"},{accepts:"^leaf$",texture:"sprites/items/leaf"}],{id:"gel-stone",name:"Stone Gel",description:"alchemical reagent: boost elemental fission",type:a.b.Type.Consumable,texture:{type:"single",tex:"sprites/items/gel",tint:"808080"}}),H([{accepts:"^solution$",texture:"sprites/items/solution"},{accepts:"^leaf$",texture:"sprites/items/leaf"},{accepts:"^stone$",texture:"sprites/items/stone"}],{id:"gel-alchemy",name:"Alchemical Gel",description:"alchemical reagent: purify solution",type:a.b.Type.Consumable,texture:{type:"single",tex:"sprites/items/gel",tint:"e06060"}}),H([{accepts:"^stone$",texture:"sprites/items/stone"}],{id:"scale",name:"Stone Shard",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/scale",tint:"808080"},material:{name:"Stone",color:"808080",weight:.1,toughness:.1,sharpness:.15,affinity:.1}}),H([{accepts:"^bone$",texture:{type:"single",tex:"sprites/items/bone",tint:"ccb396"}}],{id:"scale",name:"Bone Shard",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/scale",tint:"ccb396"},material:{name:"Bone",color:"ccb396",weight:.05,toughness:.05,sharpness:.2,affinity:.15}}),H([{accepts:"^wood-",texture:"sprites/items/wood"},{accepts:"^wood-",texture:"sprites/items/wood"}],{id:"rod",name:"Wooden Rod",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/rod",tint:"b3927b"},material:{name:"Wood",color:"b3927b",weight:.15,toughness:.15,sharpness:.05,affinity:.25}}),H([{accepts:"^stone$",texture:"sprites/items/stone"},{accepts:"^stone$",texture:"sprites/items/stone"}],{id:"rod",name:"Stone Rod",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/rod",tint:"808080"},material:{name:"Stone",color:"808080",weight:.25,toughness:.2,sharpness:.1,affinity:.1}}),H([{accepts:"^wood-",texture:"sprites/items/wood"},{accepts:"^wood-",texture:"sprites/items/wood"}],{id:"skin",name:"Wood Plate",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/skin",tint:"b3927b"},material:{name:"Wood",color:"b3927b",weight:.2,toughness:.2,sharpness:.05,affinity:.25}}),H([{accepts:"^leaf$",texture:"sprites/items/leaf"},{accepts:"^leaf$",texture:"sprites/items/leaf"}],{id:"skin",name:"Leaf Pelt",type:a.b.Type.Material,texture:{type:"single",tex:"sprites/items/skin",tint:"00d000"},material:{name:"Leaf",color:"00d000",weight:.1,toughness:.15,sharpness:.05,affinity:.15}})],N=4;function U(e,t,i,s){return{texture:{type:"composite",overlay:{type:"single",tex:`sprites/objects/flower-petal-${t}`,tint:i},base:{type:"single",tex:`sprites/objects/flower-stem-${t}`}},color:i,jitter:!0,collidable:!0,drops:{hp:0,replaceWith:null,table:W(1,2,1,{template:{id:`flower-${e.toLowerCase()}`,name:e,type:a.b.Type.Consumable,texture:{type:"composite",overlay:{type:"single",tex:`sprites/items/flower-petal-${t}`,tint:i},base:{type:"single",tex:`sprites/items/flower-stem-${t}`}},aspects:[{element:s[0],amount:0},{element:s[1],amount:0}],effects:[Object(V.b)(_.a.Type.Heal,10,0)]},substs:[{path:"aspects[0].amount",type:"gaussian",mean:15,sd:2,min:0,max:20},{path:"aspects[1].amount",type:"gaussian",mean:8,sd:2,min:0,max:12}]})}}}function G(){return{texture:"sprites/objects/bush",color:"416652",scale:1.5,jitter:!0,collidable:!0,obstacle:!0}}const K=4;function Y(e,t,i,s,r){return{texture:{type:"composite",overlay:{type:"single",tex:"sprites/objects/berrybush-berries",tint:s},base:{type:"single",tex:"sprites/objects/berrybush-bush"}},color:"416652",scale:1.5,jitter:!0,collidable:!0,obstacle:!0,drops:{hp:1,replaceWith:t,table:W(2,4,1,{template:{id:`berries-${e.toLowerCase()}`,name:`${e} Berries`,type:a.b.Type.Consumable,texture:{type:"single",tex:`sprites/items/berries-${i}`,tint:s},aspects:[{element:r[0],amount:0},{element:r[1],amount:0}],effects:[Object(V.b)(_.a.Type.Heal,10,0)]},substs:[{path:"aspects[0].amount",type:"gaussian",mean:20,sd:2,min:0,max:25},{path:"aspects[1].amount",type:"gaussian",mean:12,sd:2,min:0,max:15}]})}}}const J=()=>({water:{texture:{type:"liquid",tex:"sprites/terrains/water",offset:16,time:5e3},color:"235c7c",liquid:!0,speed:-5},lava:{texture:{type:"liquid",tex:"sprites/terrains/lava",offset:16,time:15e3},color:"8b1408",liquid:!0,speed:-20,damage:10},mud:{texture:{type:"liquid",tex:"sprites/terrains/mud",offset:8,time:5e3},color:"6d584b",speed:-10,liquid:!0},grass:{texture:{type:"random",texs:["sprites/terrains/grass-1","sprites/terrains/grass-2","sprites/terrains/grass-3"],tint:"00ff00"},color:"51a01e"},"grass-deep":{texture:{type:"random",texs:["sprites/terrains/grass-1","sprites/terrains/grass-2","sprites/terrains/grass-3"],tint:"00cc00"},color:"316112"},"grass-light":{texture:{type:"random",texs:["sprites/terrains/grass-1","sprites/terrains/grass-2","sprites/terrains/grass-3"],tint:"aaffaa"},color:"487f61"},soil:{texture:{type:"random",texs:["sprites/terrains/soil-1","sprites/terrains/soil-2","sprites/terrains/soil-3"]},color:"846b5c"},stone:{texture:{type:"random",texs:["sprites/terrains/stone-1","sprites/terrains/stone-2","sprites/terrains/stone-3"],tint:"404040"},color:"514845"},sand:{texture:{type:"random",texs:["sprites/terrains/sand-1","sprites/terrains/sand-2","sprites/terrains/sand-3"]},color:"e2bf90"},ice:{texture:"sprites/terrains/ice",color:"aad0e7"},snow:{texture:"sprites/terrains/snow",color:"e0e9ee"}});var X=i(203);const Q=16/N,Z=16/K;const ee=()=>({id:1,type:"player",age:0,traits:{spatial:{pos:[0,0]}}});function te(e,t,i,r,o=(()=>{})){const n=function(e,t){const i=Object(h.create)(e);t("generating game data...",0);const s=J(),r=q(),o=R(),n=[],c=f(i,Q*N,{type:"uniform",min:.5,max:1},{type:"uniform",min:.8,max:1});for(let e=1;e<=N;e++)for(let t=0;t<Q;t++)r[`flower-${e}${t}`]=U(Object(L.a)(5,10,i.random),e,c.pop().toString(16),g(i,n));const l=f(i,Z*K,{type:"uniform",min:.3,max:1},{type:"uniform",min:.7,max:1});for(let e=1;e<=K;e++)for(let t=0;t<Z;t++)r[`berrybush-${e}${t}-depleted`]=G(),r[`berrybush-${e}${t}`]=Y(Object(L.a)(5,10,i.random),`berrybush-${e}${t}-depleted`,e,l.pop().toString(16),g(i,n));const p=f(i,u.c.length),d=Object(X.a)(u.c.map(({tier:e,name:t})=>{const s=6*i.random()+8*e,a=.1+.1*(e+1)*i.random();return[t,{fissionThreshold:{type:"gaussian",mean:s,sd:e+1,max:8*(e+1)},fusionThreshold:{type:"gaussian",mean:10+8*i.random()+10*e,sd:2*(e+1),min:10*e},fissionRate:{type:"gaussian",mean:a,sd:.05,min:0,max:.8},fusionRate:{type:"gaussian",mean:.2+.1*(u.a.MaxTier-e+1)*(i.random()+1),sd:.05,min:0,max:.8},color:p.pop().toString(16)}]}));return Object(a.d)(s,r,o,d)}(i,o),l=new c(e,t,i,r,n);k(l,o),E(l,o),function(e,t){t("decorating map...",0);const i=e.library.objects.filter(e=>e&&/^flower-\d+$/.test(e.name)).map(e=>e.name),a=e.library.objects.filter(e=>e&&/^berrybush-\d+$/.test(e.name)).map(e=>e.name);function r(t,r){if(e.getObject(t,r))return;const o=e.getTerrain(t,r);if("water"===o||"lava"===o||"ice"===o||"mud"===o)return;const n=e.biomes[e.getBiomeIndex(t,r)],h=T[n.type];if(!h)return;if(n.feature!==s.Feature.None&&n.feature!==s.Feature.Floral&&n.feature!==s.Feature.Rocky)return;let c=e.random.random();for(const[o,l]of h)if(c-=l,n.feature===s.Feature.Floral&&"flower"===o?c-=.1:n.feature===s.Feature.Rocky&&"rocks"===o&&(c-=.1),c<=0){"flower"===o?e.setObject(t,r,i[e.random.range(i.length)]):"berries"===o?e.setObject(t,r,a[e.random.range(a.length)]):e.setObject(t,r,o);break}}for(let i=0;i<e.height;i++){for(let t=0;t<e.width;t++)r(t,i);t(null,i/e.height)}}(l,o),function(e,t){t("generating game data...",0),e.map.seed=e.seed;const i=ee();i.traits.spatial.pos=e.map.spawn,e.entities.push(i)}(l,o),o("done!",1);const p=l.finalizeMap();return new a.a("",n,p,l.entities,{},l.game)}t.default=function(){onmessage=(e=>{switch(e.data.action){case"generate":{const{width:t,height:i,seed:s,enemies:a}=e.data,r=te(t,i,s,a,(e,t)=>{postMessage({action:"progress",message:e,progress:t})});postMessage({action:"completed",save:r.save()})}break;default:console.error("unknown message",e.data)}})}},216:function(e,t,i){"use strict";i.r(t);var s=i(0),a=i(194),r=i(193),o=i(31);i(374),i(371),i(369);var n=i(1),h=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class c{constructor(e){this.app=e,this.root=new n.Container}enter(){return h(this,void 0,void 0,function*(){})}pause(){return h(this,void 0,void 0,function*(){})}resume(){return h(this,void 0,void 0,function*(){})}leave(){return h(this,void 0,void 0,function*(){})}update(e){}layout(){}}class l extends n.Container{constructor(){super(),this.content=new n.Container,this.texNormal=n.Texture.fromFrame("sprites/ui/button-normal"),this.texPressed=n.Texture.fromFrame("sprites/ui/button-pressed"),this.plane=new n.mesh.NineSlicePlane(this.texNormal,6,6,6,6),this.isPressed=!1,this._contentWidth=0,this._contentHeight=0,this._isEnabled=!0,this.addChild(this.plane),this.addChild(this.content),this.plane.scale=new n.Point(fs,fs),this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",()=>this.updateState(!0)),this.on("pointerupoutside",()=>this.updateState(!1)),this.on("pointerup",()=>{this._isEnabled&&this.isPressed&&this.emit(l.Clicked),this.updateState(!1)})}updateState(e){this._isEnabled||(e=!1),this.isPressed=e,this.plane.texture=e?this.texPressed:this.texNormal}get contentWidth(){return this._contentWidth}get contentHeight(){return this._contentHeight}get isEnabled(){return this._isEnabled}set isEnabled(e){this._isEnabled=e,this.updateState(this.isPressed),this.alpha=e?1:.5}layout(e,t){this.plane.x=0,this.plane.y=0,this.plane.width=e/fs,this.plane.height=t/fs,this.isPressed?(this.content.x=fs,this.content.y=fs,this._contentWidth=e-fs,this._contentHeight=t-fs):(this.content.x=0,this.content.y=0,this._contentWidth=e-fs,this._contentHeight=t-fs)}}l.Clicked="button.clicked";class p extends n.Container{set text(e){this._text.text=e}get style(){return this._text.style}get contentWidth(){return this._text.width}get contentHeight(){return this._text.height}constructor(e,t){super(),this._text=new n.Text(e,Object.assign({fontFamily:"Unibody8Pro",fontSize:8,fill:"white",align:"center"},t)),this.addChild(this._text);const i=(t&&t.scale||1)*fs;this._text.scale=new n.Point(i,i)}layout(e,t){switch(this._text.style.align){case"left":this._text.x=0;break;case"center":this._text.x=(e-this._text.width)/2;break;case"right":this._text.x=e-this._text.width}this._text.y=(t-this._text.height)/2}}class u extends n.Container{constructor(e){super(),this.app=e,this.content=new n.Container,this.panelBg=new n.Sprite(n.Texture.WHITE),this.panelMask=new n.mesh.NineSlicePlane(n.Texture.fromFrame("sprites/ui/panel-mask"),6,6,6,6),this.maskTex=n.RenderTexture.create(0,0),this.panelBorder=new n.mesh.NineSlicePlane(n.Texture.fromFrame("sprites/ui/panel"),6,6,6,6),this._contentWidth=0,this._contentHeight=0,this.panelMask.scale=new n.Point(fs,fs),this.panelBorder.scale=new n.Point(fs,fs),this.panelBg.tint=4210752;const t=new n.Sprite(this.maskTex);this.content.addChild(this.panelBg),this.addChild(this.content),this.content.mask=t,this.addChild(this.panelBorder),this.addChild(t)}get contentWidth(){return this._contentWidth}get contentHeight(){return this._contentHeight}layout(e,t){this.panelBorder.width=e/fs,this.panelBorder.height=t/fs,this.panelBg.width=e,this.panelBg.height=t,this.panelMask.width=this.panelBorder.width,this.panelMask.height=this.panelBorder.height,this._contentWidth===e&&this._contentHeight===t&&this.maskTex||(this.content.x=0,this.content.y=0,this._contentWidth=e,this._contentHeight=t,this.maskTex.resize(e,t),this.app.renderer.render(this.panelMask,this.maskTex))}}class d extends l{constructor(e,t){super(),this.text=new p(e,t),this.content.addChild(this.text)}layout(e,t){super.layout(e,t),this.text.x=0,this.text.y=0,this.text.layout(this.contentWidth,this.contentHeight)}}const m=2,y=2e3,f=524288,g=new Uint16Array(6*y);for(let e=0;e<y;e++)g[6*e+0]=4*e+0,g[6*e+1]=4*e+1,g[6*e+2]=4*e+2,g[6*e+3]=4*e+0,g[6*e+4]=4*e+2,g[6*e+5]=4*e+3;class w extends n.ObjectRenderer{constructor(){super(...arguments),this.currentTex=null,this.currentBlendMode=-1,this.batchSize=0,this.batch=[],this.vaoBuf=new ArrayBuffer(f),this.f32=new Float32Array(this.vaoBuf),this.u32=new Uint32Array(this.vaoBuf)}onContextChange(){const e=this.renderer.gl;this.shader=new b(e),this.vb=n.glCore.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),this.ib=n.glCore.GLBuffer.createIndexBuffer(e,g,e.STATIC_DRAW);this.vao=this.renderer.createVao().addIndex(this.ib).addAttribute(this.vb,this.shader.attributes.aVertexPosition,e.FLOAT,!1,48,0).addAttribute(this.vb,this.shader.attributes.aTextureCoord,e.UNSIGNED_SHORT,!0,48,8).addAttribute(this.vb,this.shader.attributes.aColor,e.UNSIGNED_BYTE,!0,48,12).addAttribute(this.vb,this.shader.attributes.aClamp,e.FLOAT,!0,48,16).addAttribute(this.vb,this.shader.attributes.aOffset,e.FLOAT,!0,48,32).addAttribute(this.vb,this.shader.attributes.aThickness,e.FLOAT,!0,48,40)}render(e){e.texture.valid&&((this.batchSize>=y||e.texture.baseTexture!==this.currentTex||e.blendMode!==this.currentBlendMode)&&this.flush(),this.batch[this.batchSize++]=e,this.currentTex=e.texture.baseTexture,this.currentBlendMode=e.blendMode)}start(){this.renderer.bindShader(this.shader),this.renderer.bindVao(this.vao),this.vb.bind()}stop(){this.flush()}flush(){if(0===this.batchSize)return;const e=this.renderer;e.bindTexture(this.currentTex,0,!0),e.state&&e.state.setBlendMode(this.currentBlendMode);const t=this.f32,i=this.u32;let s=0;for(let e=0;e<this.batchSize;e++){const a=this.batch[e],r=a.texture._uvs.uvsUint32,o=a.vertexData,h=Math.min(a.worldAlpha,1);let c=a._tint;c=(c>>16)+(65280&c)+((255&c)<<16);const l=h<1&&this.currentTex.premultipliedAlpha?n.utils.premultiplyTint(c,h):c+(255*h<<24),p=a.offset||[0,0],u=a.texture.frame,d=a.transform.worldTransform,y=u.x/this.currentTex.width,f=u.y/this.currentTex.height,g=(u.x+u.width)/this.currentTex.width,w=(u.y+u.height)/this.currentTex.height,b=p[0]/this.currentTex.width,x=p[1]/this.currentTex.height,S=a.outline?m/Math.sqrt(d.a*d.a+d.c*d.c)/this.currentTex.realWidth:0,v=a.outline?m/Math.sqrt(d.b*d.b+d.d*d.d)/this.currentTex.realHeight:0,z=a.renderTranslation?Math.round(a.renderTranslation[0]):0,k=a.renderTranslation?Math.round(a.renderTranslation[1]):0;t[s++]=o[0]+z,t[s++]=o[1]+k,i[s++]=r[0],i[s++]=l,t[s++]=y,t[s++]=f,t[s++]=g,t[s++]=w,t[s++]=b,t[s++]=x,t[s++]=S,t[s++]=v,t[s++]=o[2]+z,t[s++]=o[3]+k,i[s++]=r[1],i[s++]=l,t[s++]=y,t[s++]=f,t[s++]=g,t[s++]=w,t[s++]=b,t[s++]=x,t[s++]=S,t[s++]=v,t[s++]=o[4]+z,t[s++]=o[5]+k,i[s++]=r[2],i[s++]=l,t[s++]=y,t[s++]=f,t[s++]=g,t[s++]=w,t[s++]=b,t[s++]=x,t[s++]=S,t[s++]=v,t[s++]=o[6]+z,t[s++]=o[7]+k,i[s++]=r[3],i[s++]=l,t[s++]=y,t[s++]=f,t[s++]=g,t[s++]=w,t[s++]=b,t[s++]=x,t[s++]=S,t[s++]=v}this.vb.upload(this.vaoBuf.slice(0,4*s*2),0,!0);const a=this.renderer.gl;a.drawElements(a.TRIANGLES,6*this.batchSize,a.UNSIGNED_SHORT,0),this.batchSize=0,this.currentTex=null,this.currentBlendMode=-1}}w.Name="tex-sprite";class b extends n.Shader{constructor(e){super(e,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec4 aClamp;\nattribute vec4 aOffset;\nattribute vec4 aThickness;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec4 vClamp;\nvarying vec4 vOffset;\nvarying vec4 vThickness;\n\nvoid main(void)\n{\n    vec4 v = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    gl_Position = v;\n    vTextureCoord = aTextureCoord;\n    vColor = aColor;\n    vClamp = aClamp;\n    vOffset = aOffset;\n    vThickness = aThickness;\n}","\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec4 vClamp;\nvarying vec4 vOffset;\nvarying vec4 vThickness;\n\nuniform sampler2D uSampler;\n\nfloat sampleAlpha(vec2 coords, float x, float y) {\n  return texture2D(uSampler, clamp(coords + vec2(x, y), vClamp.xy, vClamp.zw)).a;\n}\n\nvoid main(void)\n{\n    vec2 coords = mod(vTextureCoord - vClamp.xy + vOffset.xy, vClamp.zw - vClamp.xy) + vClamp.xy;\n    vec4 sample = texture2D(uSampler, coords);\n    float a = sample.a;\n    a = max(a, sampleAlpha(coords, -vThickness.x, 0.0));\n    a = max(a, sampleAlpha(coords, vThickness.x, 0.0));\n    a = max(a, sampleAlpha(coords, 0.0, -vThickness.y));\n    a = max(a, sampleAlpha(coords, 0.0, vThickness.y));\n    a = max(a, sampleAlpha(coords, -vThickness.x, -vThickness.y));\n    a = max(a, sampleAlpha(coords, vThickness.x, -vThickness.y));\n    a = max(a, sampleAlpha(coords, -vThickness.x, vThickness.y));\n    a = max(a, sampleAlpha(coords, vThickness.x, vThickness.y));\n    gl_FragColor = vec4((sample.rgb + vec3(0.2) * (1.0 - sample.a)) * a, a) * vColor;\n}\n")}}n.WebGLRenderer.registerPlugin(w.Name,w),n.CanvasRenderer.registerPlugin(w.Name,n.CanvasSpriteRenderer);class x extends n.Sprite{constructor(e){super(e),this.outline=!1,this.animBeginTime=0,this.animName="",this.still=!0,this.actionAnimName="",this.actionAnimFPS=0,this.actionEndTime=-1,this.currentTex=n.Texture.EMPTY,this.frame=-1,this.elapsed=0,this.pluginName=w.Name,e&&(this.currentTex=e)}updateTex(){let e=this.currentTex;if(this.clip){const t=(e=e.clone()).frame.clone();t.width-=Math.round(this.clip[0]*t.width),t.height-=Math.round(this.clip[1]*t.height),e.frame=t}this._texture!==e&&(this.texture=e)}clearTexture(){this.tint=16777215,this.overlay&&this.removeChild(this.overlay),this.overlay=void 0,this.currentTex=n.Texture.EMPTY,this.textureDef=void 0,this.offset=void 0,this.updateTex()}setTexture(e,t=0){if(t=function(e){return e=73244475*((e=73244475*(e>>16^e))>>16^e),e^=e>>16}(t),this.clearTexture(),"string"==typeof e)this.textureDef=void 0,this.currentTex=n.Texture.fromFrame(e);else switch(this.textureDef=e,e.type){case"single":this.currentTex=n.Texture.fromFrame(e.tex),e.tint&&(this.tint=parseInt(e.tint,16));break;case"random":this.currentTex=n.Texture.fromFrame(e.texs[t%e.texs.length]),e.tint&&(this.tint=parseInt(e.tint,16));break;case"composite":{this.setTexture(e.base,t);const i=new x;i.anchor.copy(this.anchor),i.setTexture(e.overlay,t),this.overlay=i,this.addChild(i)}break;case"animation":this.frame=-1,this.currentTex=n.Texture.EMPTY,this.animBeginTime=this.elapsed,e.tint&&(this.tint=parseInt(e.tint,16));break;case"liquid":this.currentTex=n.Texture.fromFrame(e.tex),e.tint&&(this.tint=parseInt(e.tint,16))}this.updateTex()}playActionAnim(e,t){if(this.textureDef&&"animation"===this.textureDef.type&&e in this.textureDef.anims){if(this.actionAnimName!==e){const i=this.textureDef.anims[e];this.frame=0,this.actionAnimName=e,this.animBeginTime=this.elapsed,this.actionAnimFPS=void 0===t?i.fps:i.numFrames/(t/1e3),this.actionEndTime=this.elapsed+1e3/this.actionAnimFPS*i.numFrames}}else console.log("animation: no such name: "+e)}stopActionAnim(e){this.actionAnimName===e&&(this.frame=0,this.actionAnimName="",this.actionEndTime=-1,this.actionAnimFPS=0,this.animBeginTime=this.elapsed)}update(e){if(this.elapsed=e,this.textureDef)if(this.actionEndTime>0&&this.actionEndTime<e&&(this.actionAnimName="",this.actionEndTime=-1,this.actionAnimFPS=0,this.animBeginTime=e),"animation"===this.textureDef.type&&(this.animName||this.actionAnimName)){const t=this.textureDef.anims[this.actionAnimName||this.animName];if(t){if(this.still&&!this.actionAnimName)this.frame=-1;else{const i=1e3/(this.actionAnimFPS||t.fps);this.frame=Math.floor((e-this.animBeginTime)/i)%t.numFrames}this.currentTex=n.Texture.fromFrame(`${t.frameId}-${this.frame+1}`)}else console.log("animation: no such name: "+(this.actionAnimName||this.animName))}else if("liquid"===this.textureDef.type){let t=e%this.textureDef.time/this.textureDef.time;t=Math.sin(t*Math.PI*2);const i=this.textureDef.offset*t;this.offset=[i,i]}this.updateTex(),this.overlay&&(this.overlay.clip=this.clip,this.overlay.update(e))}_onAnchorUpdate(){n.Sprite.prototype._onAnchorUpdate.call(this),this.overlay&&this.overlay.anchor.copy(this._anchor)}}var S=i(191),v=i.n(S);class z extends n.Container{set text(e){this._text.text=e}get style(){return this._text.style}get contentWidth(){return this._text.width}get contentHeight(){return this._text.height}constructor(e,t,i=1){super();const s=Object.assign({fontFamily:"Unibody8Pro",fontSize:8,fill:"white",align:"center"},t.default||{});this._text=new v.a(e,Object.assign({},t,{default:s})),this.addChild(this._text),this._text.scale=new n.Point(i*fs,i*fs)}layout(e,t){switch(this._text.style.align){case"left":this._text.x=0;break;case"center":this._text.x=(e-this._text.width)/2;break;case"right":this._text.x=e-this._text.width}this._text.y=(t-this._text.height)/2}}class k extends u{constructor(e,t,i,s=1){super(e),this.textView=new z(t,i,s),this.addChild(this.textView)}set text(e){this.textView.text=e}layout(){const e=this.textView.contentWidth,t=this.textView.contentHeight;this.textView.position.set(16,16),this.textView.layout(e,t),super.layout(e+32,t+32)}}var T,j=i(59),O=i(121);class M extends k{constructor(e,t){super(e,"",{default:{align:"left"},label:{fontWeight:"bold"},details:{fill:"#d0d0d0"},desc:{fontStyle:"italic"}}),this.item=t,this.updateView()}setItem(e){this.item!==e&&(this.item=e,this.updateView())}updateView(){const e=[`<label>${this.item.name}</label>`,`<details>${Object(j.a)(this.item.type)}</details>`];if(this.item.description&&e.push(`<desc>${this.item.description}</desc>`),this.item.aspects&&this.item.aspects.length>0){e.push("");let t=0;for(const{amount:e}of this.item.aspects)t+=e;for(const{element:i,amount:s}of this.item.aspects.slice().sort((e,t)=>t.amount-e.amount)){const a=s/t*100;a<10||e.push(`<details>${a.toFixed(0)}% <label>${i}</label></details>`)}}if(this.item.effects&&this.item.effects.length>0){if(e.push(""),this.item.material&&this.item.weapon){const t=this.item.material.affinity;t<.2?e.push("<details>rarely inflicts effects:</details>"):t<.5?e.push("<details>sometimes inflicts effects:</details>"):t<.7?e.push("<details>often inflicts effects:</details>"):e.push("<details>inflicts effects:</details>")}for(const t of this.item.effects)e.push(`<details>• ${t.description}</details>`)}this.item.weapon&&(e.push(""),e.push(`<details>strength  <label>${Object(O.a)(this.item.weapon.strength,1)}</label> </details>`),this.item.weapon.cooldown&&e.push(`<details>cooldown  <label>${Object(O.a)(this.item.weapon.cooldown/1e3,1)}s</label></details>`),this.item.weapon.range&&e.push(`<details>range  <label>${Object(O.a)(this.item.weapon.range,1)} tiles</label></details>`)),this.text=e.join("\n")}}class C{constructor(e,t){this.slotA=e,this.slotB=t,this.type="inventory-swap"}}class B{constructor(e){this.slot=e,this.type="inventory-updated"}}class I{constructor(e,t){this.effect=e,this.target=t,this.type="play-fx"}}!function(e){let t;!function(e){e.Shake="shake"}(t=e.Type||(e.Type={}));e.Shake=class extends e{}}(I||(I={}));class F{constructor(e,t,i,s,a=0){this.particleType=e,this.coords=t,this.numParticles=i,this.color=s,this.z=a,this.type="show-particles"}}!function(e){let t;!function(e){e.Splash="splash",e.Float="float"}(t=e.Type||(e.Type={})),e.splash=function(i,s,a,r=0){return new e(t.Splash,i,s,a,r)},e.float=function(i,s,a,r=0){return new e(t.Float,i,s,a,r)}}(F||(F={}));class P{constructor(e,t){this.entityId=e,this.effects=t,this.type="apply-effects"}}class A{constructor(e,t){this.entityId=e,this.hpDiff=t,this.type="update-hp"}}class D{constructor(e,t,i,s,a){this.entityId=e,this.weapon=t,this.targetPosition=i,this.effects=s,this.duration=a,this.type="attack"}}class ${constructor(e,t){this.x=e,this.y=t,this.type="object-sprite-request"}}class E{constructor(e,t){this.entityIdA=e,this.entityIdB=t,this.type="entity-collision"}}class L{constructor(e,t,i){this.entityId=e,this.x=t,this.y=i,this.type="tile-collision"}}class V{constructor(e){this.entityId=e,this.type="death"}}class W{constructor(e,t){this.enemyType=e,this.position=t,this.type="spawn-enemy"}}class _ extends n.Container{constructor(e,t){let i;super(),this.game=e,this.slot=t,this.bg=new x,this.bgOverlay=new x,this.fgOverlay=new x,this.dragging=!1,this.enabled=!0,this.toolTipOpacity=1,this.alwaysInteractive=!1,this.endDrag=(e=>{this.dragging=!1,this.addChild(this.obj),e instanceof _&&e!==this&&this.enabled&&e.enabled&&this.game.dispatch(new C(this.slot,e.slot))}),this.bg.setTexture("sprites/ui/inv-slot"),this.bgOverlay.scale.set(2,2),this.bgOverlay.position.set(4,4),this.bgOverlay.alpha=.5,this.addChild(this.bg),this.addChild(this.bgOverlay),this.obj=new x,this.obj.scale.set(2,2),this.obj.anchor.set(.5,.5),this.obj.outline=!0,this.addChild(this.obj),this.addChild(this.fgOverlay),this.interactive=!0,this.game.app.toolTip.add(this,()=>this.slot.item&&this.toolTipOpacity>0?(i?i.setItem(this.slot.item):i=new M(this.game.app,this.slot.item),i.alpha=this.toolTipOpacity,i):null),this.on("pointerdown",()=>{this.enabled&&this.slot.item&&!this.game.app.dragDrop.active&&(this.dragging=!0,this.game.app.dragDrop.begin(this.obj).then(this.endDrag),i&&this.game.app.toolTip.hide(i))})}get empty(){return!this.slot.item}updateSlot(){this.slot.item?(this.obj.setTexture(this.slot.item.texture),this.obj.visible=!0,this.buttonMode=!0):(this.obj.clearTexture(),this.obj.visible=!1,this.buttonMode=this.alwaysInteractive)}layout(){this.updateSlot(),this.dragging||this.obj.position.set(_.Size/2,_.Size/2)}update(e){this.obj.update(e)}}_.Size=56,function(e){e.types=new Map}(T||(T={}));class q extends n.Container{constructor(){super(),this.offset=s.b.create(),this.viewWidth=0,this.viewHeight=0,this.bg=Object.assign(new n.Sprite(n.Texture.WHITE),{layer:q.Layer.Background,sortOffset:s.b.fromValues(0,0)}),this.nextId=0,this.bg.tint=2105376,this.add(this.bg),this.interactive=!0}toMapCoords(e,t){return s.b.scaleAndAdd(t,[(e.x-Math.floor(this.viewWidth/2))/gs,(e.y-Math.floor(this.viewHeight/2))/gs],this.offset,1/gs),t}toCameraPoint(e,t,i=0){return t.x=Math.floor(e[0]*gs-this.offset[0])+Math.floor(this.viewWidth/2),t.y=Math.floor((e[1]-i)*gs-this.offset[1])+Math.floor(this.viewHeight/2),t}add(e){e.id=this.nextId++,this.addChild(e)}layout(e,t){if(this.bg.width=e,this.bg.height=t,this.viewWidth!==e||this.viewHeight!==t){this.viewWidth=e,this.viewHeight=t;const i=new n.Graphics;i.beginFill(16777215),i.drawRect(this.x,this.y,e,t),i.endFill(),this.mask=i}this.sortLayers()}sortLayers(){this.children.sort((e,t)=>{const i=e.sortOffset,s=t.sortOffset,{x:a,y:r}=e.transform.position,{x:o,y:n}=t.transform.position;let h=0;return 0===h&&(h=e.layer-t.layer),0===h&&(h=r+i[1]*gs-(n+s[1]*gs)),0===h&&(h=a+i[0]*gs-(o+s[0]*gs)),0===h&&(h=e.id-t.id),h})}}!function(e){let t;!function(e){e[e.Background=-1]="Background",e[e.Terrain=0]="Terrain",e[e.Objects=1]="Objects",e[e.Projectiles=2]="Projectiles"}(t=e.Layer||(e.Layer={}))}(q||(q={}));var H,R=i(27);!function(e){e.Type="spatial",e.make=function(){return{type:e.Type,position:s.b.fromValues(0,0),velocity:s.b.fromValues(0,0),scale:s.b.fromValues(1,1),offset:s.b.fromValues(0,0),horizontalAnim:!1,sprite:Object.assign(new x,{layer:q.Layer.Objects,sortOffset:s.b.fromValues(0,0)})}},e.serialize=function(e){return{pos:[e.position[0],e.position[1]],vel:[e.velocity[0],e.velocity[1]]}},e.deserialize=function(e,t){return Object(R.a)({position:e.pos&&s.b.fromValues(e.pos[0],e.pos[1]),velocity:e.vel&&s.b.fromValues(e.vel[0],e.vel[1])},t)}}(H||(H={})),T.types.set(H.Type,H);var N,U,G=i(56);!function(e){e.Type="inventory",e.make=function(t=1){return{type:e.Type,slots:Object(G.a)(t,()=>({item:null,accepts:null}))}},e.serialize=function(e){return{slots:e.slots}},e.deserialize=function(e,t){return Object(R.a)({slots:e.slots.slice()},t)}}(N||(N={})),T.types.set(N.Type,N),function(e){e.Type="float",e.make=function(){return{type:e.Type,z:s.b.fromValues(0,0),gravity:!0}},e.serialize=function(e){return{z:[e.z[0],e.z[1]],gravity:e.gravity}},e.deserialize=function(e,t){return Object(R.a)({z:e.z&&s.b.fromValues(e.z[0],e.z[1]),gravity:void 0===e.gravity||e.gravity},t)}}(U||(U={})),T.types.set(U.Type,U);var K,Y,J,X,Q,Z,ee,te,ie,se=i(3);!function(e){function t(e,...t){return e.effects.some(({type:e})=>t.indexOf(e)>=0)}e.Type="stats",e.make=function(){return{type:e.Type,base:{hp:100,maxHp:100,str:10,def:0,spd:10,vit:10},boost:{hp:0,maxHp:0,str:0,def:0,spd:0,vit:0},bonus:{hp:0,maxHp:0,str:0,def:0,spd:0,vit:0},effects:[]}},e.serialize=function(e){return{base:e.base,effects:e.effects}},e.deserialize=function(e,t){return Object(R.a)({base:e.base||{hp:100,maxHp:100,str:10,def:0,spd:10,vit:10},effects:e.effects||[]},t)},e.compute=function(e){return{get hp(){return e.base.hp+e.boost.hp+e.bonus.hp},get maxHp(){return e.base.maxHp+e.boost.maxHp+e.bonus.maxHp},get str(){return e.base.str+e.boost.str+e.bonus.str},get def(){return e.base.def+e.boost.def+e.bonus.def},get spd(){return e.base.spd+e.boost.spd+e.bonus.spd},get vit(){return e.base.vit+e.boost.vit+e.bonus.vit}}},e.hasEffect=t,e.canMove=function(e){return!t(e,se.a.Type.Stunned,se.a.Type.Knockback)}}(K||(K={})),T.types.set(K.Type,K),function(e){e.Type="player-data",e.make=function(){return{type:e.Type,hotbarSelection:0,consumeCooldown:0,attackCooldown:0,lastAttackId:0}},e.serialize=function(e){return{hotbarSelection:e.hotbarSelection,consumeCooldown:e.consumeCooldown,attackCooldown:e.attackCooldown,lastAttackId:e.lastAttackId}},e.deserialize=function(e,t){return Object(R.a)({hotbarSelection:e.hotbarSelection||0,consumeCooldown:e.consumeCooldown||0,attackCooldown:e.attackCooldown||0,lastAttackId:e.lastAttackId||0},t)}}(Y||(Y={})),T.types.set(Y.Type,Y),function(e){e.Type="projectile-data",e.make=function(t){return{type:e.Type,sourceEntityId:t?t.sourceEntityId:0,weapon:t?t.weapon:void 0,damage:t?t.damage:0,effects:t?t.effects:[],start:t?s.b.clone(t.start):s.b.fromValues(0,0),end:t?s.b.clone(t.end):s.b.fromValues(0,0),lifetime:t?t.lifetime:0,texture:t?t.texture:"",hit:new Set}},e.serialize=function(e){return{sourceEntityId:e.sourceEntityId,weapon:e.weapon,damage:e.damage,effects:e.effects,lifetime:e.lifetime,start:[e.start[0],e.start[1]],end:[e.end[0],e.end[1]],texture:e.texture,hit:Array.from(e.hit)}},e.deserialize=function(e,t){return Object(R.a)({sourceEntityId:e.sourceEntityId,weapon:e.weapon,damage:e.damage,effects:e.effects,lifetime:e.lifetime,start:e.start&&s.b.fromValues(e.start[0],e.start[1]),end:e.end&&s.b.fromValues(e.end[0],e.end[1]),texture:e.texture,hit:e.hit&&new Set(e.hit)},t)}}(J||(J={})),T.types.set(J.Type,J),function(e){e.Type="enemy-data",e.make=function(t){return{type:e.Type,def:t}},e.serialize=function(e){return{def:e.def}},e.deserialize=function(e,t){return Object(R.a)({def:e.def},t)}}(X||(X={})),T.types.set(X.Type,X),function(e){e.Type="behavior",e.make=function(t){return{type:e.Type,behaviors:t}},e.serialize=function(e){return{behaviors:e.behaviors}},e.deserialize=function(e,t){return Object(R.a)({behaviors:e.behaviors},t)}}(Q||(Q={})),T.types.set(Q.Type,Q),function(e){e.Type="collidable",e.make=function(){return{type:e.Type,mass:1,size:s.b.fromValues(.5,.5)}},e.serialize=function(e){return{size:[e.size[0],e.size[1]],mass:e.mass}},e.deserialize=function(e,t){return Object(R.a)({size:e.size&&s.b.fromValues(e.size[0],e.size[1]),mass:t.mass},t)}}(Z||(Z={})),T.types.set(Z.Type,Z),function(e){e.actions=new Map,e.conditions=new Map,e.registerAction=function(t){e.actions.set(t.Type,t)},e.registerCondition=function(t){e.conditions.set(t.Type,t)},e.dump=function(t){return t.states.map(t=>{const i=[];i.push(`When ${e.conditions.get(t.condition.type).dump(t.condition)}:`);for(const s of t.actions)i.push("  "+e.actions.get(s.type).dump(s));return i.join("\n")}).join("\n\n")},e.run=function(t,i,s){const a={game:t.game,self:t,state:void 0};let r=s.activeStateIndex;for(let t=0;t<s.states.length;t++){const i=e.conditions.get(s.states[t].condition.type);a.state=s.states[t].condition,i.isFulfilled.call(a)&&(r=t)}if(r<0&&(r=0),r!==s.activeStateIndex){if(s.activeStateIndex>=0)for(const t of s.states[s.activeStateIndex].actions){const i=e.actions.get(t.type);a.state=t,i.end&&i.end.call(a)}for(const t of s.states[r].actions){const i=e.actions.get(t.type);a.state=t,i.begin&&i.begin.call(a)}s.activeStateIndex=r}let o=!1;for(const n of s.states[r].actions){const s=e.actions.get(n.type);a.state=n,(s.Kind!==te.Movement||!o&&K.canMove(t.traits.get(K)))&&s.tick.call(a,i)&&s.Kind===te.Movement&&(o=!0)}}}(ee||(ee={})),function(e){e.Movement="movement",e.Attack="attack",e.Effect="effect"}(te||(te={})),function(e){e.Type="hp",e.mutate=function(e){return Object.assign({},e,{threshold:e.threshold+(.2*Math.random()-.1)})},e.dump=function(e){return`HP of target is ${e.isGreater?"greater":"less"} than ${(100*e.threshold).toFixed(1)}%`},e.isFulfilled=function(){const e=this.state.targetId?this.game.entities.get(this.state.targetId):this.self;if(!e)return!1;const{hp:t,maxHp:i}=K.compute(e.traits.get(K));return this.state.isGreater?t/i>this.state.threshold:t/i<=this.state.threshold},e.greaterThan=function(t,i=0){return{type:e.Type,threshold:t,isGreater:!0,targetId:i}},e.lessThan=function(t,i=0){return{type:e.Type,threshold:t,isGreater:!1,targetId:i}}}(ie||(ie={})),ee.registerCondition(ie);var ae,re,oe=i(11);!function(e){e.Type="at-spawn",e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"at spawn"},e.isFulfilled=function(){return 0===this.self.age},e.make=function(){return{type:e.Type}}}(ae||(ae={})),ee.registerCondition(ae),function(e){e.Type="distance",e.mutate=function(e){return Object.assign({},e,{threshold:e.threshold+(4*Math.random()-2)})},e.dump=function(e){return`distance with target is ${e.isGreater?"greater":"less"} than ${e.threshold.toFixed(1)}`};const t=s.b.create();e.isFulfilled=function(){const e=this.state.targetId?this.game.entities.get(this.state.targetId):this.game.player;if(!e)return!1;const{position:i}=e.traits.get(H),{position:a}=this.self.traits.get(H);s.b.sub(t,i,a);const r=s.b.length(t);return this.state.isGreater?r>this.state.threshold:r<=this.state.threshold},e.greaterThan=function(t,i=0){return{type:e.Type,threshold:t,isGreater:!0,targetId:i}},e.lessThan=function(t,i=0){return{type:e.Type,threshold:t,isGreater:!1,targetId:i}}}(re||(re={})),ee.registerCondition(re);var ne=i(10);function he(e){return 1+Math.max(0,4*e/10)}function ce(e){return Math.max(0,e/500)}function le(e,t,i){const{spd:a}=K.compute(i.traits.get(K)),r=he(a);s.b.scale(e,t,r)}const pe=250,ue=8;var de;!function(e){e.Type="chase",e.Kind=te.Movement,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Chase target"};const t=s.b.create();e.tick=function(e){const{position:i,velocity:a}=this.self.traits.get(H),r=this.state.targetId?this.game.entities.get(this.state.targetId):this.game.player;if(!r)return!1;const{position:o}=r.traits.get(H);return s.b.subtract(t,o,i),!(s.b.length(t)>ue||(this.state.interval>0?(this.state.interval-=e,le(a,this.state.direction,this.self),0):(this.state.interval=pe,s.b.normalize(t,t),le(a,this.state.direction,this.self),this.state.direction[0]=t[0],this.state.direction[1]=t[1],0)))},e.make=function(t=0){return{type:e.Type,targetId:t,interval:0,direction:[0,0]}}}(de||(de={})),ee.registerAction(de);const me=200;var ye;!function(e){e.Type="wander",e.Kind=te.Movement,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Wander around"},e.tick=function(e){const{velocity:t}=this.self.traits.get(H);if(this.state.interval>0)return this.state.interval-=e,s.b.copy(t,this.state.velocity),!0;this.state.interval=me;const{spd:i}=K.compute(this.self.traits.get(K));return s.b.random(t),s.b.scale(t,t,he(.5*i)),this.state.velocity[0]=t[0],this.state.velocity[1]=t[1],!0},e.make=function(){return{type:e.Type,interval:0,velocity:[0,0]}}}(ye||(ye={})),ee.registerAction(ye);const fe=5;var ge;!function(e){e.Type="charge",e.Kind=te.Movement,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Charge towards target"};const t=s.b.create();e.tick=function(e){const{position:i,velocity:a}=this.self.traits.get(H),r=this.state.targetId?this.game.entities.get(this.state.targetId):this.game.player;if(!r)return!1;if(this.state.interval>0)return this.state.interval-=e,le(a,this.state.direction,this.self),!0;if(this.state.cooldown>0)return this.state.cooldown-=e,!1;const{position:o}=r.traits.get(H);s.b.subtract(t,o,i);const{spd:n}=K.compute(this.self.traits.get(K));return this.state.interval=Math.min(3e3,(s.b.length(t)+5)/(he(n)*fe)*1e3),this.state.cooldown=Math.max(2500,this.state.interval),s.b.normalize(t,t),s.b.scale(t,t,fe),le(a,t,this.self),this.state.direction[0]=t[0],this.state.direction[1]=t[1],!0},e.make=function(t=0){return{type:e.Type,targetId:t,interval:0,cooldown:0,direction:[0,0]}}}(ge||(ge={})),ee.registerAction(ge);const we=5;var be;!function(e){e.Type="escape",e.Kind=te.Movement,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Escape from target"},e.tick=function(e){const{position:t,velocity:i}=this.self.traits.get(H),a=this.state.targetId?this.game.entities.get(this.state.targetId):this.game.player;if(!a)return!1;const{position:r}=a.traits.get(H);return s.b.subtract(i,r,t),!(s.b.length(i)>we||(s.b.normalize(i,i),s.b.scale(i,i,-.5),le(i,i,this.self),0))},e.make=function(t=0){return{type:e.Type,targetId:t}}}(be||(be={})),ee.registerAction(be);var xe=i(2),Se=i(7);const ve=12;var ze,ke,Te,je;!function(e){e.Type="shoot",e.Kind=te.Attack,e.mutate=function(e){const t=Math.abs(e.angle*e.numShoots-2*Math.PI)<1e-4,i=Math.floor(3*Math.random()),s=Object(oe.a)(e);switch(i){case 0:Object.assign(s,{duration:Object(Se.a)(s.duration*(1+.25*(2*Math.random()-1)),500,5e3),delay:Object(Se.a)(s.delay*(1+.25*(2*Math.random()-1)),0,5e3)});break;case 1:const e=Object(Se.a)(s.numShoots+Math.floor(6*Math.random()-3),0,10);Object.assign(s,{numShoots:e,angle:t?2*Math.PI/e:s.angle});break;case 2:Object.assign(s,{angle:Object(Se.a)(s.angle+(Math.random()-.5),0,2*Math.PI/s.numShoots)});break;case 3:Object.assign(s.weapon,{range:Object(Se.a)(s.weapon.range+(4*Math.random()-2),2,15)});break;case 4:Object.assign(s.weapon,{strength:Object(Se.a)(s.weapon.strength+(6*Math.random()-3),1,50)})}return Object.assign(s.weapon,{type:Math.random()<.5?xe.c.Type.Bolt:xe.c.Type.Orb}),s.cooldown=s.delay,s},e.dump=function(e){const t=[];return t.push(`Shoot ${e.numShoots} projectiles of damage ${e.weapon.strength.toFixed(1)}`),e.numShoots>1&&t.push(`with angle ${(180*e.angle/Math.PI).toFixed(1)}`),t.push(`, reaches ${e.weapon.range.toFixed(1)} in ${(e.duration/1e3).toFixed(2)} seconds`),t.join(" ")};const t=s.b.create(),i=s.b.create();e.tick=function(e){if(this.state.cooldown>0)return this.state.cooldown-=e,!1;this.state.cooldown=this.state.weapon.cooldown;const{position:a}=this.self.traits.get(H),{position:r}=this.game.player.traits.get(H);if(s.b.subtract(t,r,a),s.b.length(t)>ve)return!1;s.b.normalize(t,t);const o=-(this.state.numShoots-1)*this.state.angle/2+(this.state.numShoots+1)%2*this.state.angle/2;for(let e=0;e<this.state.numShoots;e++){const r=o+this.state.angle*e;i[0]=t[0]*Math.cos(r)-t[1]*Math.sin(r),i[1]=t[0]*Math.sin(r)+t[1]*Math.cos(r),s.b.add(i,i,a),this.game.dispatch(new D(this.self.id,this.state.weapon,i,this.state.effects,this.state.duration))}return!0},e.make=function(t,i,s,a=1,r=15,o=0,n=0){return{type:e.Type,weapon:t,effects:i,duration:s,numShoots:a,angle:r*Math.PI/180,offset:o,delay:n,cooldown:n}}}(ze||(ze={})),ee.registerAction(ze),function(e){e.Type="buff",e.Kind=te.Effect,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Buff target with effects"},e.tick=function(e){return this.state.cooldown>0?(this.state.cooldown-=e,!1):(this.state.cooldown=this.state.cooldown,this.game.dispatch(new P(this.state.targetId||this.self.id,this.state.effects.slice())),!0)},e.make=function(t,i,s=0){return{type:e.Type,targetId:s,interval:i,effects:t,cooldown:0}}}(ke||(ke={})),ee.registerAction(ke),function(e){e.Type="spawn",e.Kind=te.Effect,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return`Spawn ${e.enemyType}`};const t=s.b.create();e.tick=function(e){return this.state.cooldown>0?(this.state.cooldown-=e,!1):(this.state.cooldown=this.state.interval,s.b.random(t),s.b.add(t,this.self.traits.get(H).position,t),this.game.dispatch(new W(this.state.enemyType,t)),!0)},e.make=function(t,i){return{type:e.Type,enemyType:t.toLowerCase(),interval:i,cooldown:0}}}(Te||(Te={})),ee.registerAction(Te),function(e){e.Type="suicide",e.Kind=te.Effect,e.mutate=function(e){return Object(oe.a)(e)},e.dump=function(e){return"Destroy self"},e.tick=function(e){return this.self.delete(),!0},e.make=function(t=0){return{type:e.Type}}}(je||(je={})),ee.registerAction(je);var Oe=i(5);const Me={Player:{type:"animation",anims:{left:{frameId:"sprites/player/left",numFrames:8,fps:15},right:{frameId:"sprites/player/right",numFrames:8,fps:15},up:{frameId:"sprites/player/up",numFrames:8,fps:15},down:{frameId:"sprites/player/down",numFrames:8,fps:15},"fist-left":{frameId:"sprites/player/fist-left",numFrames:5,fps:15},"fist-right":{frameId:"sprites/player/fist-right",numFrames:5,fps:15},"fist-up":{frameId:"sprites/player/fist-up",numFrames:5,fps:15},"fist-down":{frameId:"sprites/player/fist-down",numFrames:5,fps:15},"sword-left":{frameId:"sprites/player/sword-left",numFrames:5,fps:15},"sword-right":{frameId:"sprites/player/sword-right",numFrames:5,fps:15},"sword-up":{frameId:"sprites/player/sword-up",numFrames:5,fps:15},"sword-down":{frameId:"sprites/player/sword-down",numFrames:5,fps:15},"spear-left":{frameId:"sprites/player/spear-left",numFrames:7,fps:10},"spear-right":{frameId:"sprites/player/spear-right",numFrames:7,fps:10},"spear-up":{frameId:"sprites/player/spear-up",numFrames:7,fps:10},"spear-down":{frameId:"sprites/player/spear-down",numFrames:7,fps:10},"arrow-left":{frameId:"sprites/player/arrow-left",numFrames:11,fps:48},"arrow-right":{frameId:"sprites/player/arrow-right",numFrames:11,fps:48},"arrow-up":{frameId:"sprites/player/arrow-up",numFrames:11,fps:48},"arrow-down":{frameId:"sprites/player/arrow-down",numFrames:11,fps:48}}},Skeleton:{type:"animation",anims:{left:{frameId:"sprites/skeleton/left",numFrames:8,fps:15},right:{frameId:"sprites/skeleton/right",numFrames:8,fps:15},up:{frameId:"sprites/skeleton/up",numFrames:8,fps:15},down:{frameId:"sprites/skeleton/down",numFrames:8,fps:15}}},Dragon:{type:"animation",anims:{left:{frameId:"sprites/dragons/left",numFrames:1,fps:1},right:{frameId:"sprites/dragons/right",numFrames:1,fps:1}}}},Ce={skeleton:{name:"Skeleton",texture:Me.Skeleton,scale:1,horizontalAnim:!1,offset:[0,-.25],behaviors:{activeStateIndex:-1,states:[{condition:ie.greaterThan(.7),actions:[de.make(),ye.make(),ze.make({type:xe.c.Type.Invisible,pierce:!0,strength:5,cooldown:100,knockback:10,range:1,color:"000000"},[],100)]},{condition:ie.lessThan(.5),actions:[be.make(),ye.make(),ze.make({type:xe.c.Type.Invisible,pierce:!0,strength:5,cooldown:100,knockback:10,range:1,color:"000000"},[],100)]}]},drops:{numDrops:{type:"exponential",min:2,max:5,rate:.7},items:[{prob:1,item:{template:{id:"bone",name:"Bone",type:xe.b.Type.Material,texture:{type:"single",tex:"sprites/items/bone",tint:"ccb396"},material:{name:"Bone",color:"ccb396",weight:.1,toughness:.1,sharpness:.15,affinity:.15}},substs:[]}}]},stats:{hp:50,maxHp:50,str:10,def:0,spd:5,vit:0}},egg:{name:"Egg",texture:"sprites/dragons/egg",scale:1,horizontalAnim:!1,offset:[0,-.25],behaviors:{activeStateIndex:-1,states:[{condition:ie.greaterThan(.99),actions:[ke.make([Object(Oe.b)(se.a.Type.KnockbackResist,0,1e6)],5e5)]},{condition:ie.lessThan(.99),actions:[Te.make("dragon",0),je.make()]}]},drops:{numDrops:{type:"constant",value:0},items:[]},stats:{hp:1e4,maxHp:1e4,str:0,def:0,spd:0,vit:10}},spawner:{name:"Skeleton Spawner",texture:"sprites/skeleton/spawner",scale:1,horizontalAnim:!1,offset:[0,-.25],behaviors:{activeStateIndex:-1,states:[{condition:ie.greaterThan(0),actions:[ke.make([Object(Oe.b)(se.a.Type.KnockbackResist,0,1e6)],5e5)]},{condition:re.lessThan(8),actions:[ke.make([Object(Oe.b)(se.a.Type.KnockbackResist,0,1e6)],5e5),Te.make("skeleton",1e4),ze.make({type:xe.c.Type.Bolt,pierce:!0,strength:10,cooldown:5e3,knockback:10,range:10,color:"404040"},[],1e3,10,36)]}]},drops:{numDrops:{type:"constant",value:0},items:[]},stats:{hp:100,maxHp:150,str:10,def:0,spd:0,vit:5}}};var Be=i(190),Ie=i.n(Be),Fe=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class Pe{constructor(e,t,i=""){this.width=e,this.height=t,this.seed=i,this.worker=Ie()(215)}generate(e=(()=>{})){return Fe(this,void 0,void 0,function*(){const t=yield new Promise(t=>{this.worker.onmessage=(i=>{"completed"===i.data.action?t(xe.a.load(i.data.save)):"progress"===i.data.action&&e(i.data.message,i.data.progress)}),this.worker.postMessage({action:"generate",width:this.width,height:this.height,seed:this.seed,enemies:Ce})});return this.worker.terminate(),t})}}class Ae{constructor(e,t){this.age=0,this._traits=new Map,this.traits=Object.assign((e,t)=>{let i=this._traits.get(e.Type);return i||(i=e.make(t),this._traits.set(i.type,i)),i},{get:e=>this._traits.get(e.Type),set:e=>{this._traits.set(e.type,e)},list:()=>this._traits.values()}),this._game=e,this.id=t||e.data.props.nextEntityId++,this.init()}get game(){return this._game}init(){}hydrate(){}delete(){this._game&&(this._game.entities.delete(this),this._game=null)}}Ae.types=new Map;class De extends Ae{get type(){return De.Type}init(){const e=this.traits(H);s.b.set(e.scale,2,2),s.b.set(e.offset,0,-.25);const t=this.traits(Z);s.b.set(t.size,.25,.25);const i=this.traits(N,43);i.slots[40].accepts=[xe.b.Type.Chestplate],i.slots[41].accepts=[xe.b.Type.Leggings],i.slots[42].accepts=[xe.b.Type.Boots],this.traits(K),this.traits(Y)}hydrate(){this.traits.get(H).sprite.setTexture(Me.Player,this.id)}}De.Type="player",Ae.types.set(De.Type,De);class $e extends Ae{get type(){return $e.Type}static make(e,t,i=e.player.traits(H).position){const a=new $e(e);a.traits.get(N).slots[0].item=t;const r=a.traits.get(H);return s.b.copy(r.position,i),s.b.random(r.velocity),a.traits.get(U).z[0]=.5*Math.random()+.5,a}init(){const e=this.traits(H);s.b.set(e.scale,2,2);const t=this.traits(Z);s.b.set(t.size,.25,.25),t.mass=0,this.traits(U),this.traits(N,1)}hydrate(){const e=this.traits.get(H);e.sprite.outline=!0,e.sprite.setTexture(this.traits.get(N).slots[0].item.texture,this.id)}}$e.Type="item-drop",Ae.types.set($e.Type,$e);class Ee extends Ae{get type(){return Ee.Type}static make(e,t,i){const a=new Ee(e);return a.traits.get(X).def=t,a.traits.get(Q).behaviors=t.behaviors,Object.assign(a.traits.get(K).base,t.stats),s.b.copy(a.traits.get(H).position,i),a}init(){this.traits(H),this.traits(Z),this.traits(K),this.traits(X),this.traits(Q)}hydrate(){const e=this.traits.get(X),t=this.traits.get(H);t.sprite.setTexture(e.def.texture,this.id),t.horizontalAnim=e.def.horizontalAnim,s.b.set(t.scale,2*e.def.scale,2*e.def.scale),s.b.set(t.offset,e.def.offset[0],e.def.offset[1]);const i=this.traits.get(Z);s.b.set(i.size,.4*e.def.scale,.4*e.def.scale)}}Ee.Type="enemy",Ae.types.set(Ee.Type,Ee);class Le extends Ae{get type(){return Le.Type}static make(e,t,i,a,r,o,n,h){const c=new Le(e),l=c.traits.get(H);s.b.copy(l.position,r);const p=c.traits.get(U);p.z[0]=.001,p.gravity=!1;const{str:u}=K.compute(e.entities.get(t).traits.get(K)),d=function(e,t){return e*((1+(t-10)/50)*Object(ne.a)(1,.25,.5,1.5))}(i.strength,u);return c.traits.set(J.make({sourceEntityId:t,weapon:i,damage:d,effects:a,start:r,end:o,lifetime:n,texture:{type:"single",tex:h,tint:i.color}})),c}init(){const e=this.traits(H);s.b.set(e.scale,4,4);const t=this.traits(Z);s.b.set(t.size,.25,.25),t.mass=0,this.traits(U)}hydrate(){const e=this.traits.get(H),t=this.traits.get(J);e.sprite.layer=q.Layer.Projectiles,e.sprite.setTexture(t.texture),e.sprite.anchor.set(0,0),e.sprite.visible=!1,e.sprite.rotation=-3*Math.PI/4+Math.atan2(t.start[1]-t.end[1],t.start[0]-t.end[0])}}Le.Type="projectile",Ae.types.set(Le.Type,Le);class Ve{constructor(e){this.game=e,this.entities=new Map}init(){for(const e of this.game.data.entities){const t=new(Ae.types.get(e.type))(this.game,e.id);t.age=e.age;for(const i of Object.keys(e.traits)){const s=T.types.get(i),a=s.deserialize(e.traits[i],t.traits(s));t.traits.set(a)}this.add(t)}}dispose(){}save(){this.game.data.entities=Array.from(this.entities.values()).map(e=>{const t={id:e.id,type:e.type,age:e.age,traits:{}};for(const i of e.traits.list())t.traits[i.type]=T.types.get(i.type).serialize(i);return t})}*ofType(e){for(const t of this.entities.values())t.type===e.Type&&(yield t)}*withTrait(e){for(const t of this.entities.values())t.traits.get(e)&&(yield t)}get(e){return this.entities.get(e)}add(e){e.hydrate(),this.entities.set(e.id,e)}delete(e){this.entities.delete(e.id)}update(e){for(const t of this.entities.values())t.age+=e}}class We extends n.Container{constructor(){super(),this.camera=new q,this.add(this.camera),this.interactive=!0}add(e){this.addChild(e)}layout(e,t){for(const i of this.children)i.layout(e,t)}}class _e{constructor(e){this.game=e,this.runWhenPaused=!1,this._active=!0}get isActive(){return this._active}deactivate(){if(!this._active)throw new Error("not active");this._active=!1}update(e){}dispose(){}}class qe extends n.Container{constructor(){super(...arguments),this.active=!1}dispose(e){}update(e){}}var He=i(24);const Re=3;class Ne extends n.Container{constructor(e,t){super(),this.game=e,this.recipe=t,this.output=new _(e,{accepts:[],item:this.makeOutput()}),this.output.position.set(0,(64-_.Size)/2),this.addChild(this.output),this.inputs=t.input.map(({accepts:t,texture:i})=>{const s=new _(e,{accepts:t,item:null});return s.bgOverlay.setTexture(i),s.bgOverlay.outline=!0,s}),this.arrow=new x(n.Texture.fromFrame("sprites/ui/arrow")),this.arrow.position.set(_.Size+16,0),this.arrow.scale.set(2,2),this.addChild(this.arrow);let i=_.Size+16+64+16;for(const e of this.inputs)this.addChild(e),e.position.set(i+8,8),i+=64}makeOutput(){return Object(oe.a)(this.recipe.output)}check(e){let t=0;for(const e of this.inputs)e.slot.item?(e.alpha=1,t++):e.alpha=.5;const i=t===this.recipe.input.length;if(this.output.enabled=i,this.output.alpha=i?1:.5,this.arrow.alpha=i?1:.5,!this.output.slot.item){this.output.slot.item=this.makeOutput(),this.game.dispatch(new B(this.output.slot));for(const{slot:e}of this.inputs)e.item=null,this.game.dispatch(new B(e))}}layout(){this.output.layout();for(const e of this.inputs)e.layout()}dispose(){for(const{slot:e}of this.inputs)if(e.item){const t=$e.make(this.game,e.item);this.game.entities.add(t),e.item=null,this.game.dispatch(new B(e))}}}class Ue extends qe{constructor(e){super(),this.game=e,this.name="Workbench",this.icon=n.Texture.fromFrame("sprites/ui/tab-workbench"),this.upButton=new l,this.downButton=new l,this.recipeViews=[],this.subscription=new He.Subscription,this.scrollOffset=0,this.wheelDebounce=0,this.wheelList=(e=>{if(!this.active)return;if(this.elapsed-this.wheelDebounce<20)return;const t=e.deltaX+e.deltaY;Math.abs(t)<32||(this.scrollOffset+=Math.sign(t))}),this.elapsed=0,this.checkInventory=(({slot:e})=>{for(const t of this.recipeViews)t.check(e)}),this.upButton=new l;const t=new x(n.Texture.fromFrame("sprites/ui/arrow-compact"));t.scale.set(2,2),t.rotation=Math.PI/2,t.pivot.set(8,8),t.position.set(32,16),this.upButton.content.addChild(t),this.addChild(this.upButton),this.downButton=new l;const i=new x(n.Texture.fromFrame("sprites/ui/arrow-compact"));i.scale.set(2,2),i.rotation=-Math.PI/2,i.pivot.set(8,8),i.position.set(32,16),this.downButton.content.addChild(i),this.addChild(this.downButton);for(const t of e.library.recipes){const i=new Ne(e,t);this.addChild(i),this.recipeViews.push(i)}this.subscription.add(e.messages$.ofType(B).subscribe(this.checkInventory));for(const e of this.recipeViews)e.check();this.upButton.on(l.Clicked,()=>this.scrollOffset--),this.downButton.on(l.Clicked,()=>this.scrollOffset++),e.app.view.addEventListener("wheel",this.wheelList)}update(e){this.elapsed+=e}layout(e,t){const i=this.recipeViews.length-Re;this.scrollOffset=Object(Se.a)(this.scrollOffset,0,i),this.upButton.visible=this.scrollOffset>0,this.downButton.visible=this.scrollOffset<i;let s=0;this.upButton.position.set(0,s),this.upButton.layout(64,32),s+=32;for(let e=0;e<this.recipeViews.length;e++){const t=this.recipeViews[e];e<this.scrollOffset||e>=this.scrollOffset+Re?t.visible=!1:(t.visible=!0,t.position.set(2,s),t.layout(),s+=64)}this.downButton.position.set(0,s),this.downButton.layout(64,32)}dispose(e){e&&(this.subscription.unsubscribe(),this.game.app.view.removeEventListener("wheel",this.wheelList));for(const e of this.recipeViews)e.dispose()}}var Ge=i(15);class Ke extends qe{constructor(e){super(),this.game=e,this.name="Alchemy",this.icon=n.Texture.fromFrame("sprites/ui/tab-alchemy"),this.processButton=new l,this.subscription=new He.Subscription,this.checkInventory=(()=>{this.processButton.isEnabled=!this.input1.empty&&!this.input2.empty&&!this.fuel.empty&&this.output.empty}),this.doAlchemy=(()=>{const e=this.input1.slot.item,t=this.input2.slot.item,i=Object(Ge.d)(e,t,this.game.library.elements);this.output.slot.item=i,this.input1.slot.item=null,this.input2.slot.item=null,this.fuel.slot.item=null,this.game.dispatch(new B(this.input1.slot)),this.game.dispatch(new B(this.input2.slot)),this.game.dispatch(new B(this.output.slot)),this.game.dispatch(new B(this.fuel.slot))}),this.bg=new x(n.Texture.from("sprites/ui/cauldron")),this.bg.outline=!0,this.bg.scale.set(7,7),this.addChild(this.bg);const t=new x(n.Texture.fromFrame("sprites/ui/arrow-compact"));t.scale.set(2,2),t.rotation=-Math.PI/2,t.pivot.set(8,8),t.position.set(18,20),this.processButton.content.addChild(t),this.addChild(this.processButton),this.input1=new _(e,{accepts:[xe.b.Type.Consumable],item:null}),this.input2=new _(e,{accepts:[xe.b.Type.Consumable],item:null}),this.fuel=new _(e,{accepts:"^wood-",item:null}),this.output=new _(e,{accepts:[],item:null}),this.addChild(this.input1),this.addChild(this.input2),this.addChild(this.fuel),this.addChild(this.output),this.fuel.bgOverlay.setTexture("sprites/ui/inv-slot-fire"),this.subscription.add(e.messages$.ofType(B).subscribe(this.checkInventory)),this.checkInventory(),this.processButton.on(l.Clicked,this.doAlchemy)}layout(e,t){const i=_.Size+16+40+16+_.Size;this.input1.position.set(16,4),this.input1.layout(),this.processButton.position.set(16+_.Size+16,16),this.processButton.layout(40,40),this.input2.position.set(16+_.Size+16+40+16,4),this.input2.layout(),this.bg.position.set(16+(i-this.bg.width)/2,_.Size+8),this.output.position.set(16+(i-_.Size)/2,_.Size+28),this.output.layout(),this.fuel.position.set(16+(i-_.Size)/2,192),this.fuel.layout()}dispose(e){e&&this.subscription.unsubscribe();for(const{slot:e}of[this.input1,this.input2,this.fuel,this.output])if(e.item){const t=$e.make(this.game,e.item);this.game.entities.add(t),e.item=null,this.game.dispatch(new B(e))}}}var Ye=i(41),Je=i(4);function Xe(e,t,i){switch(e){case Je.a.Type.Energy:{let e=50*t;return Object(Oe.b)(se.a.Type.Strength,e,0)}case Je.a.Type.Weakness:{let e=50*t;return Object(Oe.b)(se.a.Type.Weakness,e,0)}case Je.a.Type.Defense:{let e=50*t;return i[Je.a.Type.Void]>.5*t?Object(Oe.b)(se.a.Type.DefBreak,e,0):Object(Oe.b)(se.a.Type.Resistance,e,0)}case Je.a.Type.Life:case Je.a.Type.Recovery:{let i=50*t;return e===Je.a.Type.Life&&(i*=.5),Object(Oe.b)(se.a.Type.VitalityUp,i,0)}case Je.a.Type.Void:case Je.a.Type.Injury:{let i=50*t;return e===Je.a.Type.Void&&(i*=.3),Object(Oe.b)(se.a.Type.VitalityDown,i,0)}case Je.a.Type.Motion:{let e=50*t;return Object(Oe.b)(se.a.Type.Speed,e,0)}case Je.a.Type.Frost:case Je.a.Type.Capture:{let i=50*t;return e===Je.a.Type.Capture&&(i*=1.5),Object(Oe.b)(se.a.Type.Slowness,i,0)}}}function Qe(e,t,i,s){const a=[{element:Je.a.Type.Defense,amount:t.toughness*(1+Math.pow(t.weight,.75))*1e3*i},{element:Je.a.Type.Capture,amount:10*t.weight*i},{element:Je.a.Type.Energy,amount:100*t.sharpness*i}],r=Math.pow(t.affinity,.5),o=Object(Ge.c)([...e.map(e=>({aspects:Object(Oe.c)(e.aspects||[],r)})),{aspects:a}],s);return[Object(Oe.a)(o,Xe,.01),o]}var Ze,et=i(30),tt=i(376);!function(e){e.Chestplate="chestplate",e.Leggings="leggings",e.Boots="boots",e.Sword="sword",e.Spear="spear",e.Bow="bow",e.Arrow="arrow",e.Infusion="infusion"}(Ze||(Ze={}));const it={[Ze.Chestplate]:[{weight:.2,toughness:.4,sharpness:.4,affinity:.2},{weight:.2,toughness:.4,sharpness:.4,affinity:.2},{weight:.05,toughness:0,sharpness:.1,affinity:.45},{weight:.35,toughness:.2,sharpness:.1,affinity:.15}],[Ze.Leggings]:[{weight:.2,toughness:.3,sharpness:.3,affinity:.5},{weight:.4,toughness:.35,sharpness:.35,affinity:.25},{weight:.4,toughness:.35,sharpness:.35,affinity:.25}],[Ze.Boots]:[{weight:.5,toughness:.5,sharpness:.5,affinity:.5},{weight:.5,toughness:.5,sharpness:.5,affinity:.5}],[Ze.Sword]:[{weight:.45,toughness:.3,sharpness:.5,affinity:.25},{weight:.35,toughness:.3,sharpness:.4,affinity:.2},{weight:.2,toughness:.4,sharpness:.1,affinity:.55}],[Ze.Spear]:[{weight:.6,toughness:.1,sharpness:.9,affinity:.7},{weight:.2,toughness:.45,sharpness:.05,affinity:.15},{weight:.2,toughness:.45,sharpness:.05,affinity:.15}],[Ze.Bow]:[{weight:.35,toughness:.1,sharpness:.05,affinity:.2},{weight:.1,toughness:.1,sharpness:.35,affinity:.05},{weight:.35,toughness:.1,sharpness:.05,affinity:.2},{weight:.05,toughness:.3,sharpness:.1,affinity:.25},{weight:.1,toughness:.1,sharpness:.35,affinity:.05},{weight:.05,toughness:.3,sharpness:.1,affinity:.25}],[Ze.Arrow]:[{weight:.6,toughness:.5,sharpness:.45,affinity:.4},{weight:.3,toughness:.4,sharpness:.1,affinity:.2},{weight:.1,toughness:.1,sharpness:.45,affinity:.4}]};function st(...e){return{accepts:`^(${e.join("|")})$`,textures:e.map(e=>`sprites/items/${e}`)}}const at=[{id:Ze.Chestplate,name:"Chestplate",description:"",slots:[st("skin","scale"),null,st("skin","scale"),null,st("skin"),null,null,st("skin","scale"),null]},{id:Ze.Leggings,name:"Leggings",description:"",slots:[null,null,null,null,st("skin"),null,st("skin","scale"),null,st("skin","scale")]},{id:Ze.Boots,name:"Boots",description:"",slots:[null,null,null,null,null,null,st("skin"),null,st("skin")]},{id:Ze.Sword,name:"Sword",description:"\naverage damage\naverage range\naverage speed\n",slots:[st("fang","scale"),null,null,null,st("fang","scale"),null,null,null,st("bone","rod")]},{id:Ze.Spear,name:"Spear",description:"\nhigh damage\naverage range\nlow speed\n",slots:[st("fang","scale"),null,null,null,st("bone","rod"),null,null,null,st("bone","rod")]},{id:Ze.Bow,name:"Bow",description:"\nlow damage\nhigh range\nhigh speed\n",slots:[null,st("bone","rod"),st("bone","rod"),st("bone","rod"),null,st("skin"),st("bone","rod"),st("skin"),null]},{id:Ze.Arrow,name:"Arrow",description:"ammo of bow",slots:[st("fang","scale"),null,null,null,st("bone","rod"),null,null,null,st("scale","leaf")]},{id:Ze.Infusion,name:"Infusion",description:"infuse solution effects into equipment",slots:[null,null,st("solution"),null,null,null,null,null,st("chestplate","leggings","boots","sword","spear","bow","arrow")]}];class rt extends qe{constructor(e){super(),this.game=e,this.name="Anvil",this.icon=n.Texture.fromFrame("sprites/ui/tab-anvil"),this.arrow=new n.Sprite(n.Texture.fromFrame("sprites/ui/arrow")),this.activeTarget=at[0],this.targetButtons=[],this.subscription=new He.Subscription,this.checkInventory=(({slot:e})=>{let t=!0;const i=[];for(let e=0;e<9;e++){if(!this.activeTarget.slots[e])continue;const s=this.inSlots[e].slot.item;if(!s){t=!1;break}i.push(s)}if(!t&&this.outSlot.slot.item)this.outSlot.slot.item=null,this.game.dispatch(new B(this.outSlot.slot));else if(t&&e===this.outSlot.slot&&!e.item)for(const{slot:e}of this.inSlots)e.item=null,this.game.dispatch(new B(e));else t&&e!==this.outSlot.slot&&(this.outSlot.slot.item=function(e,t,i){if(e===Ze.Infusion){const e=t[1].material;if(!e)return console.error("unexpected item"),null;if(t[1].type===xe.b.Type.Weapon){const e=Object(Ge.c)(t,i);return Object.assign({},t[1],{effects:Object(et.a)(e)})}{const[s,a]=Qe(t,e,1,i);return Object.assign({},t[1],{aspects:a,effects:s})}}{const r={weight:0,toughness:0,sharpness:0,affinity:0};for(let i=0;i<t.length;i++){const s=t[i].material;if(!s)return console.error("unexpected item"),null;r.weight+=s.weight*it[e][i].weight,r.toughness+=s.toughness*it[e][i].toughness,r.sharpness+=s.sharpness*it[e][i].sharpness,r.affinity+=s.affinity*it[e][i].affinity}let o,n,h,c;r.weight*=t.length,r.toughness=Math.pow(r.toughness,1.5),r.sharpness=Math.pow(r.sharpness,1.5),console.log(r);let l=xe.b.Type.Weapon;function s(e){return Object(Ye.a)(e.map(({material:e})=>({color:parseInt(e.color,16)}))).toString(16)}let p="",u="ffffff";function a(e){const t=Object(tt.a)(e.map(e=>e.material.name));let i=0;for(const e of Object.keys(t))t[e]>i&&(p=e,i=t[e]);u=s(e)}switch(e){case Ze.Sword:a(t.slice(0,2)),o={type:xe.c.Type.Sword,strength:(1+r.sharpness)*(r.weight+r.toughness)/2*100,cooldown:r.weight*(1-r.toughness)*5e3,knockback:r.weight*(1+r.sharpness)*10,pierce:!0,range:2.5,color:u},h=Object(Ge.c)(t,i),n=Object(et.a)(h),c={type:"composite",overlay:{type:"single",tex:"sprites/items/sword-blade",tint:s(t.slice(0,2))},base:{type:"single",tex:"sprites/items/sword",tint:t[2].material.color}};break;case Ze.Spear:a(t.slice(0,1)),o={type:xe.c.Type.Spear,strength:(1+r.sharpness)*(r.weight+r.toughness)/2*250,cooldown:r.weight*(1-r.toughness)*15e3,knockback:r.weight*(1+r.sharpness)*20,pierce:!0,range:4,color:u},h=Object(Ge.c)(t,i),n=Object(et.a)(h),c={type:"composite",overlay:{type:"single",tex:"sprites/items/spear-head",tint:t[0].material.color},base:{type:"single",tex:"sprites/items/spear",tint:s(t.slice(1,3))}};break;case Ze.Bow:a([t[0],t[1],t[2],t[4]]),o={type:xe.c.Type.Bow,strength:r.toughness*(1+r.weight)*20,cooldown:r.weight*(1-r.toughness)*1e3,knockback:0,range:0,color:u},h=Object(Ge.c)(t,i),n=Object(et.a)(h),c={type:"composite",overlay:{type:"single",tex:"sprites/items/bow-string",tint:s([t[3],t[5]])},base:{type:"single",tex:"sprites/items/bow",tint:s([t[0],t[1],t[2],t[4]])}};break;case Ze.Arrow:a(t.slice(0,1)),o={type:xe.c.Type.Arrow,strength:r.weight*(1+r.sharpness)*10,cooldown:0,knockback:0,range:5+15*r.toughness,color:u},h=Object(Oe.c)(Object(Ge.c)(t,i),Math.pow(r.affinity,.5)),n=Object(et.a)(h),c={type:"composite",base:{type:"single",tex:"sprites/items/arrow",tint:t[1].material.color},overlay:{type:"composite",base:{type:"single",tex:"sprites/items/arrow-head",tint:t[0].material.color},overlay:{type:"single",tex:"sprites/items/arrow-fletch",tint:t[2].material.color}}};break;case Ze.Chestplate:a(t),l=xe.b.Type.Chestplate,[n,h]=Qe(t,r,1,i),c={type:"composite",base:{type:"single",tex:"sprites/items/chestplate",tint:t[3].material.color},overlay:{type:"composite",base:{type:"single",tex:"sprites/items/chestplate-belt",tint:t[2].material.color},overlay:{type:"composite",base:{type:"single",tex:"sprites/items/chestplate-left",tint:t[0].material.color},overlay:{type:"single",tex:"sprites/items/chestplate-right",tint:t[1].material.color}}}};break;case Ze.Leggings:a(t),l=xe.b.Type.Leggings,[n,h]=Qe(t,r,.5,i),c={type:"composite",base:{type:"single",tex:"sprites/items/leggings",tint:t[0].material.color},overlay:{type:"composite",base:{type:"single",tex:"sprites/items/leggings-left",tint:t[1].material.color},overlay:{type:"single",tex:"sprites/items/leggings-right",tint:t[2].material.color}}};break;case Ze.Boots:a(t),l=xe.b.Type.Boots,[n,h]=Qe(t,r,.2,i),c={type:"composite",base:{type:"single",tex:"sprites/items/boots",tint:t[0].material.color},overlay:{type:"single",tex:"sprites/items/boots-right",tint:t[1].material.color}};break;default:return console.error("unexpected type"),null}return console.log(o),console.log(n),{id:e,name:`${p} ${Object(j.a)(e)}`,type:l,texture:c,aspects:h,effects:n,material:Object.assign({name:p,color:u},r),weapon:o}}}(this.activeTarget.id,i,this.game.library.elements),this.game.dispatch(new B(this.outSlot.slot)))}),this.elapsed=0,this.toolTip=new k(e.app,"",{default:{align:"left"},desc:{fill:"#d0d0d0"}}),this.inSlots=Object(G.a)(9,()=>new _(e,{accepts:[],item:null}));for(const e of this.inSlots)e.bgOverlay.outline=!0,this.addChild(e);this.outSlot=new _(e,{accepts:[],item:null}),this.addChild(this.outSlot),this.arrow.scale.set(2,2),this.arrow.rotation=Math.PI,this.arrow.pivot.set(16,16),this.arrow.position.set(3*_.Size+112,64+_.Size+24),this.addChild(this.arrow);let t=0;for(const i of at){const s=Object.assign(new l,{target:i}),a=i.id===Ze.Infusion?"solution":i.id,r=new n.Sprite(n.Texture.fromFrame(`sprites/ui/inv-slot-${a}`));r.scale.set(2,2),r.alpha=.5,s.content.addChild(r),s.position.set(t,0),this.addChild(s),e.app.toolTip.add(s,()=>(this.toolTip.text=`\n${i.name}\n<desc>${i.description}</desc>\n`.trim(),this.toolTip)),s.on(l.Clicked,()=>this.updateTarget(i)),this.targetButtons.push(s),t+=64}this.updateTarget(),this.subscription.add(e.messages$.ofType(B).subscribe(this.checkInventory))}updateTarget(e=this.activeTarget){for(const{slot:e}of this.inSlots)e.item&&(this.game.entities.add($e.make(this.game,e.item)),e.item=null,this.game.dispatch(new B(e)));for(let t=0;t<9;t++){this.inSlots[t].slot.item=null;const i=e.slots[t];i?(this.inSlots[t].enabled=!0,this.inSlots[t].visible=!0,this.inSlots[t].slot.accepts=i.accepts):(this.inSlots[t].enabled=!1,this.inSlots[t].visible=!1)}this.activeTarget=e}layout(e,t){let i=0,s=0;for(const e of this.inSlots)e.position.set(64+i*_.Size,64+s*_.Size),e.layout(),3==++i&&(i=0,s++);this.outSlot.position.set(3*_.Size+164,64+_.Size),this.outSlot.layout();for(const e of this.targetButtons)e.isEnabled=this.activeTarget!==e.target,e.layout(50,50)}update(e){this.elapsed+=e;const t=Math.floor(this.elapsed/1e3);for(let e=0;e<9;e++){const i=this.activeTarget.slots[e];i&&(this.inSlots[e].slot.item?this.inSlots[e].bgOverlay.clearTexture():this.inSlots[e].bgOverlay.setTexture(i.textures[t%i.textures.length]))}}dispose(e){this.updateTarget(),e&&this.subscription.unsubscribe()}}const ot=256,nt=32;class ht extends qe{constructor(e){super(),this.game=e,this.name="Enemy Info",this.icon=n.Texture.fromFrame("sprites/ui/tab-enemy"),this.enemyTex=new x,this.nameLabel=new p("",{align:"left"}),this.hpBar=new n.Container,this.hpBarIcon=new x(n.Texture.fromFrame("sprites/ui/status-hp")),this.hpBarBg=new x(n.Texture.WHITE),this.hpBarFill=new x(n.Texture.WHITE),this.hpBarText=new p,this.enemyTex.animName="right",this.hpBarBg.tint=8421504,this.hpBarBg.width=ot,this.hpBarBg.height=nt,this.hpBar.addChild(this.hpBarBg),this.hpBar.addChild(this.hpBarFill),this.hpBar.addChild(this.hpBarText),this.addChild(this.hpBarIcon),this.addChild(this.hpBar),this.addChild(this.enemyTex),this.addChild(this.nameLabel)}getEnemy(){const{lastAttackId:e}=this.game.player.traits.get(Y),t=this.game.entities.get(e);return t&&t.traits.get(X)?t:null}update(){const e=this.getEnemy();if(!e)return this.enemyTex.clearTexture(),this.hpBarIcon.visible=!1,this.hpBar.visible=!1,void(this.nameLabel.text="none");const{def:t}=e.traits.get(X),{hp:i,maxHp:s}=K.compute(e.traits.get(K));this.enemyTex.setTexture(t.texture),this.enemyTex.update(0),this.nameLabel.text=t.name,this.hpBarIcon.visible=!0,this.hpBar.visible=!0;const a=i/s;this.hpBarText.text=`${Math.ceil(i)}/${s}`,this.hpBarFill.width=ot*a,this.hpBarFill.height=nt,this.hpBarFill.tint=a<.3?10485760:a<.6?10526720:40960}layout(e,t){this.enemyTex.position.set(0,0),this.nameLabel.position.set(80,0),this.nameLabel.layout(256,64),this.hpBarIcon.position.set(0,96),this.hpBar.position.set(48,96),this.hpBarText.layout(ot,nt)}}var ct=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class lt extends u{constructor(e){super(e.app),this.game=e}init(){}dispose(){}update(e){}done(){return ct(this,void 0,void 0,function*(){yield this.game.app.popState()})}}var pt=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};const ut=400,dt=200;class mt extends lt{constructor(e){super(e),this.exit=(()=>pt(this,void 0,void 0,function*(){yield this.done(),yield this.game.app.popState()})),this.message=new p("you died!",{fontWeight:"bold"}),this.addChild(this.message),this.exitButton=new d("exit"),this.exitButton.position.set((ut-128)/2,dt-16-48),this.exitButton.on(d.Clicked,this.exit),this.addChild(this.exitButton)}layout(e,t){this.position.set(Math.round((e-ut)/2),Math.round((t-dt)/2)),super.layout(ut,dt),this.message.layout(ut,128),this.exitButton.layout(128,48)}}var yt=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};const ft=800,gt=600,wt=8;class bt extends lt{constructor(e){super(e),this.tabs=[],this.saveButton=new d("save"),this.exitButton=new d("exit"),this.slotViews=[],this.trash=new _(this.game,{item:null,accepts:null}),this.statNames=new z("",{default:{align:"right",fontWeight:"bold"},s:{fontSize:12}}),this.statValues=new z("",{default:{align:"left"},s:{fontSize:12},incr:{fill:"#d0d000"},decr:{fill:"#d00000"}}),this.tabs.push(new Ue(e)),this.tabs.push(new Ke(e)),this.tabs.push(new rt(e)),this.tabs.push(new ht(e)),this.activeTab=this.tabs[0],this.activeTab.active=!0,this.addChild(this.activeTab);const t=new k(e.app,"",{});this.tabButtons=this.tabs.map(i=>{const s=new l,a=new x(i.icon);return a.scale.set(2,2),s.content.addChild(a),this.addChild(s),e.app.toolTip.add(s,()=>(t.text=i.name,t)),s.on(l.Clicked,()=>{this.activeTab!==i&&(this.removeChild(this.activeTab),this.addChild(i),this.activeTab.active=!1,this.activeTab=i,i.active=!0)}),s});const i=e.player.traits.get(N).slots;for(const e of i){const t=new _(this.game,e);this.slotViews.push(t),this.content.addChild(t)}this.slotViews[40].bgOverlay.setTexture("sprites/ui/inv-slot-chestplate"),this.slotViews[41].bgOverlay.setTexture("sprites/ui/inv-slot-leggings"),this.slotViews[42].bgOverlay.setTexture("sprites/ui/inv-slot-boots"),this.content.addChild(this.trash),this.trash.bgOverlay.setTexture("sprites/ui/inv-slot-trash");const s=this.game.player.traits.get(K);this.stats=K.compute(s),this.base=s.base,this.content.addChild(this.statNames),this.content.addChild(this.statValues),this.content.addChild(this.saveButton),this.content.addChild(this.exitButton),this.saveButton.on(d.Clicked,this.save.bind(this)),this.exitButton.on(d.Clicked,this.exit.bind(this))}layout(e,t){this.position.set(Math.round((e-ft)/2),Math.round((t-gt)/2)),super.layout(ft,gt);let i=0,s=0;for(const e of this.slotViews.slice(-3))e.position.set(24+(i+wt)*_.Size+16,24),e.layout(),i++;this.trash.position.set(24+(wt+4)*_.Size+16,24),this.trash.layout(),i=s=0;for(const e of this.slotViews.slice(0,-3))e.position.set(24+i*_.Size,24+s*_.Size+(s>0?16:0)),e.layout(),++i===wt&&(i=0,s++);this.statNames.position.set(24+wt*_.Size+16,24+_.Size+16),this.statNames.layout(this.statNames.contentWidth,this.statNames.contentHeight),this.statValues.position.set(24+wt*_.Size+16+this.statNames.contentWidth,24+_.Size+16),this.statValues.layout(this.statValues.contentWidth,this.statValues.contentHeight);i=24,s=336;for(let e=0;e<this.tabs.length;e++){const t=this.tabButtons[e];t.isEnabled=this.activeTab!==this.tabs[e],t.position.set(i,s),t.layout(50,50),(i+=66)+50>=256&&(i=24,s+=66)}s+=66,i=24,this.saveButton.position.set(i,s),this.saveButton.layout(96,48),i+=112,this.exitButton.position.set(i,s),this.exitButton.layout(96,48),this.activeTab.position.set(256,336),this.activeTab.layout(ft-256-16,gt-336-16)}update(e){this.game.keyboard.isDown("Escape")&&this.done();for(const t of this.slotViews)t.update(e);this.trash.slot.item=null,this.trash.update(e),this.updateStats(),this.activeTab.update(e)}updateStats(){function e(e,t){const i=t-e;return i<0?`(<decr>${t-e}</decr>)`:i>0?`(<incr>+${t-e}</incr>)`:""}this.statNames.text="\nhp<s> </s>\nstr<s> </s>\ndef<s> </s>\nspd<s> </s>\nvit<s> </s>\n".trim(),this.statValues.text=`\n<s> </s>${Math.ceil(this.stats.hp)} / ${this.stats.maxHp} ${e(this.base.maxHp,this.stats.maxHp)}\n<s> </s>${this.stats.str} ${e(this.base.str,this.stats.str)}\n<s> </s>${this.stats.def} ${e(this.base.def,this.stats.def)}\n<s> </s>${this.stats.spd} ${e(this.base.spd,this.stats.spd)}\n<s> </s>${this.stats.vit} ${e(this.base.vit,this.stats.vit)}\n`.trim()}save(){o.dialog.prompt({label:"Save name (max 8 char.): ",value:this.game.data.id,callback:e=>{if(!1!==e)if(e)if(e.length>8)o.dialog.alert({content:"Name is too long!",callback:()=>this.game.app.view.focus()});else{for(const e of this.tabs)e.dispose(!1);this.game.save(),this.game.data.id=e,localStorage[e]=this.game.data.export(),o.dialog.alert({content:`Saved as name '${e}'.`,callback:()=>this.game.app.view.focus()})}else o.dialog.alert({content:"Name is empty!",callback:()=>this.game.app.view.focus()});else this.game.app.view.focus()}})}exit(){return yt(this,void 0,void 0,function*(){yield this.done(),yield this.game.app.popState()})}done(){const e=e=>super[e];return yt(this,void 0,void 0,function*(){this.game.app.dragDrop.cancel();for(const e of this.tabs)e.dispose(!0);yield e("done").call(this)})}}class xt extends _e{constructor(e){super(e),this.direction=s.b.create(),this.vel=e.player.traits.get(H).velocity,this.stats=e.player.traits.get(K),this.statList=K.compute(this.stats)}update(e){K.canMove(this.stats)&&(s.b.set(this.direction,0,0),this.game.keyboard.isPressed("a")&&this.direction[0]--,this.game.keyboard.isPressed("d")&&this.direction[0]++,this.game.keyboard.isPressed("w")&&this.direction[1]--,this.game.keyboard.isPressed("s")&&this.direction[1]++,s.b.normalize(this.direction,this.direction),s.b.scale(this.vel,this.direction,he(this.statList.spd))),this.game.keyboard.isDown("Escape")&&this.game.app.pushState(new os(new bt(this.game)))}}var St=i(39);class vt extends _e{constructor(e){super(e),this.spawn=(({enemyType:e,position:t})=>{const i=Ce[e],s=Ee.make(this.game,i,t);this.game.entities.add(s)}),this.game.messages$.ofType(W).pipe(Object(St.filter)(e=>"dragon"!==e.enemyType)).subscribe(this.spawn)}update(e){for(const t of this.game.entities.withTrait(Q)){const{behaviors:i}=t.traits.get(Q);ee.run(t,e,i)}}}function zt(e,t){return Math.random()*(t-e)+e}const kt=[e=>ze.make({type:Math.random()<.5?xe.c.Type.Bolt:xe.c.Type.Orb,pierce:!0,strength:5+zt(-3,5),cooldown:5e3+zt(-2e3,2e3),knockback:10,range:5+zt(-2,2),color:e},[],1e3+zt(-500,1e3),Math.floor(zt(1,3)),zt(5,20),zt(0,10),2e3*Math.random()),e=>{let t=Math.floor(zt(3,6));return ze.make({type:Math.random()<.5?xe.c.Type.Bolt:xe.c.Type.Orb,pierce:!0,strength:5+zt(-3,5),cooldown:5e3+zt(-2e3,2e3),knockback:10,range:5+zt(-2,2),color:e},[],1e3+zt(-500,1e3),t,360/t,zt(0,10),2e3*Math.random())}],Tt=[()=>de.make(),()=>ge.make(),()=>be.make()],jt=[()=>ie.greaterThan(zt(.7,.9)),()=>ie.lessThan(zt(.3,.4)),()=>ae.make(),()=>re.greaterThan(zt(6,10)),()=>re.lessThan(zt(5,8))];var Ot=i(377),Mt=i(200);const Ct=4,Bt=.5;var It=i(54),Ft=i(42);function Pt(e){return Math.floor(Math.random()*e)}const At={dragonId:0,maxDPS:0,color:"",minPlayerHP:1e5,age:0,score:0,name:"",texture:Me.Dragon,scale:2,horizontalAnim:!0,offset:[0,-1],behaviors:{activeStateIndex:-1,states:[]},drops:{numDrops:{type:"constant",value:0},items:[]},stats:{hp:200,maxHp:200,str:10,def:0,spd:5,vit:0}};class Dt extends _e{constructor(e){super(e),this.thisGeneration=[],this.instancePool=[],this.spawn=(({position:e})=>{0===this.instancePool.length&&this.nextGen(function(e,t){const i=Object(Ot.a)(t,t=>-e.evaluate(t)).slice(Ct*Bt),s=Object(G.a)(Ct-i.length,()=>{const t=i.slice(),s=t.splice(Math.floor(Math.random()*t.length),1)[0],a=t.splice(Math.floor(Math.random()*t.length),1)[0];return e.crossover(s,a)}),a=i.map(t=>e.mutate(t));return Object(Mt.a)([...a,...s])}(this,this.thisGeneration));const t=this.instancePool.pop(),i=Ee.make(this.game,t,e);this.game.entities.add(i)}),this.interval=0,this.lastPlayerHP=-1,this.game.messages$.ofType(W).pipe(Object(St.filter)(e=>"dragon"===e.enemyType)).subscribe(this.spawn),this.data=this.game.data.custom.dragons||(this.game.data.custom.dragons={dragons:[],nextId:0}),this.nextGen(function(e){return Object(G.a)(Ct,()=>e.seed())}(this))}nextGen(e){this.thisGeneration=e.map(e=>(e.dragonId=this.data.nextId++,this.computeDrops(e),this.data.dragons[e.dragonId]=e,e)),this.instancePool=this.thisGeneration.slice()}update(e){this.interval-=e;const t=this.game.player.traits.get(K).base.hp;this.lastPlayerHP<0&&(this.lastPlayerHP=t);for(const e of this.game.entities.withTrait(X)){const{def:i}=e.traits.get(X),s=i.dragonId;if("number"!=typeof s)continue;const a=this.data.dragons[s];a.minPlayerHP=Math.min(a.minPlayerHP,t),this.interval<=0&&(a.maxDPS=Math.max(a.maxDPS,Math.max(0,this.lastPlayerHP-t))),a.age=e.age}this.interval<=0&&(this.lastPlayerHP=t,this.interval=1e3)}makeRandomState(e){const t={condition:jt[Math.floor(Math.random()*jt.length)](),actions:[]},i=1+Pt(2);for(let s=0;s<i;s++)t.actions.push(kt[Pt(kt.length)](e));return t.actions.push(Tt[Pt(Tt.length)]()),t.actions.push(function(){return ze.make({type:xe.c.Type.Invisible,pierce:!0,strength:5,cooldown:100,knockback:10,range:2,color:"0"},[],100)}()),t.actions.push(ye.make()),t}seed(){const e=Object(Ye.b)({type:"uniform",min:.6,max:.8},{type:"uniform",min:.6,max:.8}),t=Object(oe.a)(At);t.name=Object(It.a)(6,12),t.color=e,t.texture=Object.assign({},Me.Dragon,{tint:e});for(let i=0;i<4;i++){const s=this.makeRandomState(e);0===i&&(s.condition=ie.greaterThan(0)),t.behaviors.states.push(s)}return t}evaluate(e){const t=this.data.dragons[e.dragonId],i=1-(Object(Se.a)(Math.abs(t.age-6e4)/6e4,0,1)+Object(Se.a)(Math.abs(t.maxDPS-20)/10,0,1)+Object(Se.a)(Math.abs(t.minPlayerHP-50)/50,0,1))/3;return console.log(`evaluate ${e.dragonId}: ${i}`),t.score=i,i}adjustStats(e,t){const i=Object(Se.a)(Object(Ft.a)(e,e=>e.age-6e4)/6e4,-1,1),s=Object(Se.a)(Object(Ft.a)(e,e=>e.maxDPS-20)/10,-1,1),a=Object(Se.a)(Object(Ft.a)(e,e=>e.minPlayerHP-50)/50,-1,1);t.stats.maxHp=Object(Ft.a)(e,e=>e.stats.maxHp)*(1-i/2),t.stats.hp=t.stats.maxHp,t.stats.str=Object(Ft.a)(e,e=>e.stats.str)*(1-s/2),t.stats.spd=Object(Ft.a)(e,e=>e.stats.spd)*(1-a/2),console.log("stats",t.stats)}computeDrops(e){const t={numDrops:{type:"exponential",min:3,max:6,rate:.5},items:[]},i=e.stats.maxHp/2e3-e.stats.spd/200+.1*Math.random(),s=e.stats.maxHp/2e3+.1*Math.random(),a=e.stats.str/100+.1*Math.random(),r=Object(Se.a)((e.stats.maxHp/1e3+e.stats.spd/100+e.stats.str/50)/3,0,1);t.items.push({prob:.3,item:{template:{id:"skin",name:`Skin of ${e.name}`,type:xe.b.Type.Material,texture:{type:"single",tex:"sprites/items/skin",tint:e.color},material:{name:e.name,color:e.color,weight:Object(Se.a)(1*i,0,1),toughness:Object(Se.a)(1.5*s,0,1),sharpness:Object(Se.a)(.5*a,0,1),affinity:r}},substs:[]}},{prob:.3,item:{template:{id:"bone",name:`Bone of ${e.name}`,type:xe.b.Type.Material,texture:{type:"single",tex:"sprites/items/bone",tint:e.color},material:{name:e.name,color:e.color,weight:Object(Se.a)(1.5*i,0,1),toughness:Object(Se.a)(1.5*s,0,1),sharpness:Object(Se.a)(1*a,0,1),affinity:r}},substs:[]}},{prob:.2,item:{template:{id:"fang",name:`Fang of ${e.name}`,type:xe.b.Type.Material,texture:{type:"single",tex:"sprites/items/fang",tint:e.color},material:{name:e.name,color:e.color,weight:Object(Se.a)(.5*i,0,1),toughness:Object(Se.a)(.5*s,0,1),sharpness:Object(Se.a)(2*a,0,1),affinity:r}},substs:[]}},{prob:.2,item:{template:{id:"scale",name:`Scale of ${e.name}`,type:xe.b.Type.Material,texture:{type:"single",tex:"sprites/items/scale",tint:e.color},material:{name:e.name,color:e.color,weight:Object(Se.a)(.5*i,0,1),toughness:Object(Se.a)(2*s,0,1),sharpness:Object(Se.a)(1*a,0,1),affinity:r}},substs:[]}}),e.drops=t}crossover(e,t){console.log(`crossover: ${e.dragonId} ${t.dragonId}`);const i=this.seed(),s=[...Object(oe.a)(e.behaviors.states.slice(1)),...Object(oe.a)(t.behaviors.states.slice(1))],a=Object(Mt.a)(s).slice(s.length/2);return i.behaviors.states=[i.behaviors.states[0],...a],this.adjustStats([e,t],i),i}mutate(e){console.log(`mutate: ${e.dragonId}`);const t=this.seed();t.behaviors=Object(oe.a)(e.behaviors);const i=Math.floor(Math.random()*(t.behaviors.states.length+1));if(i<t.behaviors.states.length){const e=t.behaviors.states[i];e.condition=ee.conditions.get(e.condition.type).mutate(e.condition);const s=Math.floor(Math.random()*e.actions.length),a=e.actions[s];e.actions[s]=ee.actions.get(a.type).mutate(a)}else{const i=this.makeRandomState(t.color);e.behaviors.states.push(i)}return this.adjustStats([e],t),t}}function $t(e){const t=Math.round(Object(ne.c)(e.numDrops)),i=[];for(let s=0;s<t;s++){let t=Math.random();for(const{prob:s,item:a}of e.items)if((t-=s)<=0){i.push(Object(ne.b)(a));break}}return i}const Et=5e3;class Lt extends _e{constructor(e){super(e),this.regenCooldown=0,this.objectDamages=new Map,this.target=s.b.create(),this.tileCollided=(({entityId:e,x:t,y:i})=>{const s=this.game.entities.get(e);if(!s)return;const a=s.traits.get(J);if(!a)return;const r=this.game.map.getObject(t,i),o=this.game.library.objects[r];o&&(o.drops&&(a.weapon.type!==xe.c.Type.Arrow||o.obstacle)&&this.hitObject(a,t,i,o),o.obstacle&&!a.weapon.pierce&&s.delete())}),this.objectCenter=s.b.create(),this.knockbackDirection=s.b.create(),this.entityCollided=(({entityIdA:e,entityIdB:t})=>{const i=this.game.entities.get(e),a=this.game.entities.get(t);if(!i||!a)return;let r,o,n,h;if((r=i.traits.get(J))&&(o=a.traits.get(K)))n=i,h=a;else{if(!(r=a.traits.get(J))||!(o=i.traits.get(K)))return;n=a,h=i}const c=`${h.id}`;if(r.hit.has(c))return;if(r.hit.add(c),r.sourceEntityId!==this.game.player.id&&h!==this.game.player)return;if(r.sourceEntityId===this.game.player.id&&h===this.game.player)return;const l=Object(oe.a)(r.effects);if(!K.hasEffect(o,se.a.Type.KnockbackResist)){s.b.sub(this.knockbackDirection,r.end,r.start),s.b.normalize(this.knockbackDirection,this.knockbackDirection),r.weapon.type===xe.c.Type.Sword&&s.b.set(this.knockbackDirection,this.knockbackDirection[1],-this.knockbackDirection[0]);const{velocity:e}=h.traits.get(H);s.b.scale(e,this.knockbackDirection,function(e){return 5+1.5*e}(r.weapon.knockback)),l.push(Object(Oe.b)(se.a.Type.Knockback,0,100))}const p=Math.max(Math.ceil(.1*r.damage),r.damage-K.compute(o).def);this.game.dispatch(new A(h.id,-p)),this.game.dispatch(new P(h.id,l)),r.weapon.pierce||n.delete(),r.sourceEntityId===this.game.player.id&&(this.game.player.traits.get(Y).lastAttackId=h.id)}),e.messages$.ofType(L).subscribe(this.tileCollided),e.messages$.ofType(E).subscribe(this.entityCollided)}update(e){for(const t of this.game.entities.withTrait(J)){const i=t.traits.get(J);if(t.age>=i.lifetime){t.delete();continue}const a=t.traits.get(H);a.sprite.visible=t.age>100,s.b.sub(this.target,i.end,i.start),s.b.scaleAndAdd(this.target,i.start,this.target,t.age/i.lifetime),s.b.sub(a.velocity,this.target,a.position),s.b.scale(a.velocity,a.velocity,1e3/e)}if(this.regenCooldown+=e,this.regenCooldown>=Et){for(const e of this.objectDamages.keys()){const t=(this.objectDamages.get(e)||0)-1;t<=0?this.objectDamages.delete(e):this.objectDamages.set(e,t)}this.regenCooldown=0}}hitObject(e,t,i,a){const r=`${t}:${i}`;if(e.hit.has(r))return;e.hit.add(r);const o=this.game.dispatch(new $(t,i)).sprite;s.b.set(this.objectCenter,t+.5,i+.5),o&&(s.b.add(this.objectCenter,this.objectCenter,o.jitter),this.game.dispatch(new I.Shake(I.Type.Shake,o)),this.game.dispatch(F.splash(this.objectCenter,20,parseInt(a.color,16),0)));const n=(this.objectDamages.get(r)||0)+1,h=a.drops;if(n<=h.hp)return void this.objectDamages.set(r,n);this.objectDamages.delete(r);for(const e of $t(h.table)){const t=$e.make(this.game,e,this.objectCenter);this.game.entities.add(t)}const c=h.replaceWith,l=c?this.game.library.objects.find(e=>e&&e.name===c).id:0;this.game.map.setObject(t,i,l)}}class Vt extends _e{constructor(e){super(e),this.applyEffects=(({entityId:e,effects:t})=>{const i=this.game.entities.get(e);if(!i)return;const s=i.traits.get(K);if(!s)return;const a=s.effects;for(let e=0;e<a.length;e++){const{type:i,duration:s,power:r}=a[e],o=t.findIndex(e=>e.type===i);o>=0&&((t[o].duration>s||t[o].power>r)&&(a[e]=t[o]),t.splice(o,1))}a.push(...t)}),this.game.messages$.ofType(P).subscribe(this.applyEffects)}update(e){for(const t of this.game.entities.withTrait(K)){const{base:i,boost:s,effects:a}=t.traits.get(K);s.hp=0,s.maxHp=0,s.str=0,s.def=0,s.spd=0,s.vit=0;for(let r=a.length-1;r>=0;r--){const o=a[r],n=Math.floor(o.duration/1e3)-Math.floor((o.duration-e)/1e3)!=0;this.applyEffect(o,t,i,s,n),o.duration-=e,o.duration<=0&&a.splice(r,1)}}}applyEffect(e,t,i,s,a){switch(e.type){case se.a.Type.Regen:if(!a)break;case se.a.Type.Heal:this.game.dispatch(new A(t.id,e.power));break;case se.a.Type.Poison:if(!a)break;case se.a.Type.Damage:this.game.dispatch(new A(t.id,-e.power));break;case se.a.Type.Resistance:s.def+=e.power;break;case se.a.Type.DefBreak:s.def-=e.power;break;case se.a.Type.Speed:s.spd+=e.power;break;case se.a.Type.Slowness:s.spd-=e.power;break;case se.a.Type.Strength:s.str+=e.power;break;case se.a.Type.Weakness:s.str-=e.power;break;case se.a.Type.VitalityUp:s.vit+=e.power;break;case se.a.Type.VitalityDown:s.vit-=e.power}}}class Wt extends _e{constructor(){super(...arguments),this.elapsed=0}update(e){const t=Math.floor(this.elapsed/1e3)-Math.floor((this.elapsed+e)/1e3)!=0;this.elapsed+=e;for(const e of this.game.entities.withTrait(H)){const{position:i}=e.traits.get(H),s=e.traits.get(U);if(s&&s.z[0]>0)continue;const a=e.traits.get(K);if(!a)continue;const r=this.game.map.getTerrain(i[0],i[1]+.5),o=this.game.library.terrains[r];o&&(o.speed&&(a.boost.spd+=o.speed),o.damage&&t&&this.game.dispatch(new A(e.id,-o.damage)))}}}class _t extends _e{constructor(e){super(e),this.runWhenPaused=!0}update(e){const{slots:t}=this.game.player.traits.get(N),{bonus:i}=this.game.player.traits.get(K);i.hp=0,i.maxHp=0,i.str=0,i.def=0,i.spd=0,i.vit=0;const s=t.slice(40,43);for(const{item:e}of s)if(e&&e.effects)for(const t of e.effects)this.applyEffect(t,i)}applyEffect(e,t){switch(e.type){case se.a.Type.Resistance:t.def+=e.power;break;case se.a.Type.DefBreak:t.def-=e.power;break;case se.a.Type.Speed:t.spd+=e.power;break;case se.a.Type.Slowness:t.spd-=e.power;break;case se.a.Type.Strength:t.str+=e.power;break;case se.a.Type.Weakness:t.str-=e.power;break;case se.a.Type.VitalityUp:t.vit+=e.power;break;case se.a.Type.VitalityDown:t.vit-=e.power}}}class qt extends _e{constructor(e){super(e),this.updateHP=(({entityId:e,hpDiff:t})=>{const i=this.game.entities.get(e);if(!i)return;const s=i.traits.get(K);if(!s)return;const{maxHp:a}=K.compute(s);s.base.hp=Object(Se.a)(s.base.hp+t,0,a);const r=i.traits.get(H).position;0===s.base.hp?this.game.dispatch(F.splash(r,100,16711680)):t>0?this.game.dispatch(F.float(r,20,16777215)):t<0&&this.game.dispatch(F.splash(r,20,16711680)),0===s.base.hp&&this.game.dispatch(new V(i.id))}),this.game.messages$.ofType(A).subscribe(this.updateHP)}update(e){for(const e of this.game.entities.withTrait(K)){const t=e.traits.get(K),{vit:i,maxHp:s}=K.compute(t);t.base.hp>0&&(t.base.hp=Object(Se.a)(t.base.hp+ce(i),0,s))}}}var Ht=i(21),Rt=i(104);function Nt(e){return Object(Rt.bindCallback)(t=>new Ht.Tween(e).to({alpha:0},250).easing(Ht.Easing.Quadratic.Out).onComplete(t).start())()}function Ut(e){return Object(Rt.bindCallback)(t=>new Ht.Tween(e).to({alpha:1},250).easing(Ht.Easing.Quadratic.In).onComplete(t).start())()}function Gt(e,t,i,s){const a=Math.atan2(e,t);return Math.abs(a)>=Math.PI*i?"left":Math.abs(a)<Math.PI*s?"right":a<0?"up":"down"}function Kt(e,t,i){switch(i){case"movement":return Gt(e,t,.6,.4);case"attack":return Gt(e,t,.75,.25);case"horizontal":return Gt(e,t,.5,.5)}}const Yt=1e-8;function Jt(e){return e<0?-e:e}function Xt(e,t,i){return e<t?t:e>i?i:e}function Qt(e){return e<0?-1:1}class Zt{constructor(e=0,t=0){this.x=e,this.y=t}clone(){return new Zt(this.x,this.y)}normalize(){let e=this.x*this.x+this.y*this.y;if(e>0){const t=1/(e=Math.sqrt(e));this.x*=t,this.y*=t}else this.x=1,this.y=0;return e}}class ei{constructor(e){this.collider=e,this.pos=new Zt,this.delta=new Zt,this.normal=new Zt,this.time=0}}class ti{constructor(){this.hit=null,this.pos=new Zt,this.time=1}}class ii{constructor(e,t){this.pos=e,this.half=t}intersectPoint(e){const t=e.x-this.pos.x,i=this.half.x-Jt(t);if(i<=0)return null;const s=e.y-this.pos.y,a=this.half.y-Jt(s);if(a<=0)return null;const r=new ei(this);if(i<a){const s=Qt(t);r.delta.x=i*s,r.normal.x=s,r.pos.x=this.pos.x+this.half.x*s,r.pos.y=e.y}else{const t=Qt(s);r.delta.y=a*t,r.normal.y=t,r.pos.x=e.x,r.pos.y=this.pos.y+this.half.y*t}return r}intersectSegment(e,t,i=0,s=0){const a=1/t.x,r=1/t.y,o=Qt(a),n=Qt(r),h=(this.pos.x-o*(this.half.x+i)-e.x)*a,c=(this.pos.y-n*(this.half.y+s)-e.y)*r,l=(this.pos.x+o*(this.half.x+i)-e.x)*a,p=(this.pos.y+n*(this.half.y+s)-e.y)*r;if(h>p||c>l)return null;const u=h>c?h:c;if(u>=1||(l<p?l:p)<=0)return null;const d=new ei(this);return d.time=Xt(u,0,1),h>c?(d.normal.x=-o,d.normal.y=0):(d.normal.x=0,d.normal.y=-n),d.delta.x=(1-d.time)*-t.x,d.delta.y=(1-d.time)*-t.y,d.pos.x=e.x+t.x*d.time,d.pos.y=e.y+t.y*d.time,d}intersectAABB(e){const t=e.pos.x-this.pos.x,i=e.half.x+this.half.x-Jt(t);if(i<=0)return null;const s=e.pos.y-this.pos.y,a=e.half.y+this.half.y-Jt(s);if(a<=0)return null;const r=new ei(this);if(i<a){const s=Qt(t);r.delta.x=i*s,r.normal.x=s,r.pos.x=this.pos.x+this.half.x*s,r.pos.y=e.pos.y}else{const t=Qt(s);r.delta.y=a*t,r.normal.y=t,r.pos.x=e.pos.x,r.pos.y=this.pos.y+this.half.y*t}return r}sweepAABB(e,t){const i=new ti;if(0===t.x&&0===t.y)return i.pos.x=e.pos.x,i.pos.y=e.pos.y,i.hit=this.intersectAABB(e),i.hit?i.time=i.hit.time=0:i.time=1,i;if(i.hit=this.intersectSegment(e.pos,t,e.half.x,e.half.y),i.hit){i.time=Xt(i.hit.time-Yt,0,1),i.pos.x=e.pos.x+t.x*i.time,i.pos.y=e.pos.y+t.y*i.time;const s=t.clone();s.normalize(),i.hit.pos.x=Xt(i.hit.pos.x+s.x*e.half.x,this.pos.x-this.half.x,this.pos.x+this.half.x),i.hit.pos.y=Xt(i.hit.pos.y+s.y*e.half.y,this.pos.y-this.half.y,this.pos.y+this.half.y)}else i.pos.x=e.pos.x+t.x,i.pos.y=e.pos.y+t.y,i.time=1;return i}sweepInto(e,t){let i=new ti;i.time=1,i.pos.x=this.pos.x+t.x,i.pos.y=this.pos.y+t.y;for(let s=0,a=e.length;s<a;s++){const a=e[s].sweepAABB(this,t);a.time<i.time&&(i=a)}return i}}const si=-10,ai=.5,ri=5;function oi(e,t){return new Zt(e,t)}class ni extends ii{constructor(e,t,i){super(oi(e+.5,t),!i||i.terrain?oi(.5,.5):oi(.4,.4)),this.x=e,this.y=t,this.obstacle=!i||!!i.obstacle}}class hi extends ii{constructor(e){const{position:t}=e.traits.get(H),{size:i,mass:s}=e.traits.get(Z);super(oi(t[0],t[1]),oi(i[0],i[1])),this.entity=e,this.obstacle=s>0}update(){const{position:e}=this.entity.traits.get(H),{size:t}=this.entity.traits.get(Z);this.pos.x=e[0],this.pos.y=e[1],this.half.x=t[0],this.half.y=t[1]}}class ci extends _e{constructor(){super(...arguments),this.vel=s.b.create(),this.collisions=new Set,this.entityAABBMap=new Map,this.entityAABBs=[],this.collidedAABBs=new Map}update(e){const t=e/1e3;for(const e of this.entityAABBMap.keys())this.game.entities.get(e)||this.entityAABBMap.delete(e);for(const e of this.game.entities.withTrait(Z)){let t=this.entityAABBMap.get(e.id);t?t.update():this.entityAABBMap.set(e.id,t=new hi(e)),this.entityAABBs.push(t)}const i=[];for(const a of this.game.entities.withTrait(H)){const{position:r,sprite:o,velocity:n,horizontalAnim:h}=a.traits.get(H),c=a.traits.get(K);let l;if(s.b.scale(this.vel,n,e/1e3),a.traits.get(Z)){this.getAABBs(r,a,i);const e=this.entityAABBMap.get(a.id)||new hi(a);l=this.resolve(i,e),i.length=0,s.b.set(r,e.pos.x,e.pos.y)}else s.b.add(r,r,this.vel),l=[];c&&K.canMove(c)&&this.updateDisplay(n,this.vel,o,h);const p=a.traits.get(U);p&&p.gravity?(p.z[0]+=p.z[1]*t+.5*si*t*t,p.z[1]+=si*t,p.z[0]<.1*ai&&(s.b.set(p.z,0,0),s.b.set(n,0,0))):p&&0!==p.z[0]||(0===this.vel[0]&&(n[0]=0),0===this.vel[1]&&(n[1]=0),s.b.scale(n,n,Math.pow(.5,t)),Math.abs(n[0])<ai&&(n[0]=0),Math.abs(n[1])<ai&&(n[1]=0));for(const e of l)e instanceof hi?this.entityCollided(a,e.entity):e instanceof ni&&this.tileCollided(a,e.x,e.y)}this.collisions.clear(),this.entityAABBs.length=0}getAABBs(e,t,i){const s=this.game.map,a=this.game.library,r=Math.floor(Math.min(e[0]+this.vel[0],e[0]))-1,o=Math.ceil(Math.max(e[0]+this.vel[0],e[0]))+1,n=Math.floor(Math.min(e[1]+this.vel[1],e[1]))-1,h=Math.ceil(Math.max(e[1]+this.vel[1],e[1]))+1;for(let e=n;e<=h;e++)for(let t=r;t<=o;t++){a.terrains[s.getTerrain(t,e)]||i.push(new ni(t,e));const r=a.objects[s.getObject(t,e)];r&&r.collidable&&i.push(new ni(t,e,r))}for(const e of this.entityAABBs)e.entity!==t&&(e.pos.x<r-ri||e.pos.y>o+ri||e.pos.x<n-ri||e.pos.y>h+ri||i.push(e))}resolve(e,t){const i=i=>{let s=new ti;s.time=1,s.pos.x=t.pos.x+i.x,s.pos.y=t.pos.y+i.y;for(const a of e){const e=a.sweepAABB(t,i);if(e.hit&&e.time<s.time){if(this.collidedAABBs.set(a,e.time),!a.obstacle)continue;s=e}}return s},a=e=>{if(e.hit&&e.hit.time>0){const i=e.hit.collider;0!==e.hit.normal.x&&(e.pos.x=i.pos.x+(i.half.x+t.half.x+Yt)*e.hit.normal.x),0!==e.hit.normal.y&&(e.pos.y=i.pos.y+(i.half.y+t.half.y+Yt)*e.hit.normal.y),s.b.mul(this.vel,this.vel,[1-Math.abs(e.hit.normal.x),1-Math.abs(e.hit.normal.y)])}else e.hit&&(e.pos.x+=e.hit.delta.x,e.pos.y+=e.hit.delta.y);t.pos=e.pos};let r;if(t.obstacle){const e=i(oi(this.vel[0],0)),t=i(oi(0,this.vel[1]));a(e.time>t.time?e:t),a(i(e.time>t.time?oi(0,this.vel[1]):oi(this.vel[0],0))),r=Math.min(e.time,t.time)}else{const e=i(oi(this.vel[0],this.vel[1]));t.pos.x+=this.vel[0],t.pos.y+=this.vel[1],r=e.time}const o=[...this.collidedAABBs].filter(([,e])=>e<=r).map(([e])=>e);return this.collidedAABBs.clear(),o}tileCollided(e,t,i){const s=`${e.id}:${t},${i}`;this.collisions.has(s)||(this.collisions.add(s),this.game.dispatch(new L(e.id,t,i)))}entityCollided(e,t){const i=Math.min(e.id,t.id),s=Math.max(e.id,t.id),a=`${i}:${s}`;this.collisions.has(a)||(this.collisions.add(a),this.game.dispatch(new E(i,s)))}updateDisplay(e,t,i,s){i.animName||(i.animName=s?"left":"down"),i.still=0===t[0]&&0===t[1],0===e[0]&&0===e[1]||(i.animName=Kt(e[1],e[0],s?"horizontal":"movement"))}}class li extends _e{constructor(e){super(e),this.death=(({entityId:e})=>{const t=this.game.entities.get(e);if(!t)return;const i=t.traits.get(X);if(i){const{position:e}=t.traits.get(H);for(const t of $t(i.def.drops)){const i=$e.make(this.game,t,e);this.game.entities.add(i)}t.delete()}else t.traits.get(Y)&&this.game.app.pushState(new os(new mt(this.game)))}),this.game.messages$.ofType(V).subscribe(this.death)}}const pi=1e3,ui=2.5;class di extends _e{constructor(e){super(e),this.type=null,this.cursorPos=new n.Point,this.coords=s.b.create(),this.direction=s.b.create(),this.data=e.player.traits.get(Y),this.stats=e.player.traits.get(K),({position:this.playerPos,velocity:this.playerVel,sprite:this.playerSprite}=e.player.traits.get(H)),this.inventory=e.player.traits.get(N).slots;const t=e=>{e.data.originalEvent.target===this.game.app.view?(e.data.getLocalPosition(this.game.view.camera,this.cursorPos),0!=(1&e.data.buttons)?this.type="attack":0!=(2&e.data.buttons)?this.type="interact":this.type=null):this.type=null};e.view.camera.on("pointermove",t),e.view.camera.on("pointerdown",t),e.view.camera.on("pointerup",t),e.view.camera.on("pointerupoutside",t)}update(e){if(this.data.consumeCooldown=Math.max(0,this.data.consumeCooldown-e),this.data.attackCooldown=Math.max(0,this.data.attackCooldown-e),!this.type)return;const{hotbarSelection:t}=this.game.player.traits.get(Y),i=this.inventory[t];"interact"===this.type?this.interact(i):"attack"===this.type&&this.attack(i)}interact(e){if(e.item&&e.item.type===xe.b.Type.Consumable){if(this.data.consumeCooldown>0)return;this.consumeItem(e.item),e.item=null,this.game.dispatch(new B(e))}}consumeItem(e){if(e.effects&&e.effects.length>0){const t=Object(oe.a)(e.effects);this.game.dispatch(new P(this.game.player.id,t)),this.data.consumeCooldown=pi}}attack(e){if(this.data.attackCooldown>0)return;if(K.hasEffect(this.stats,se.a.Type.Stunned))return;let t=e.item,i=t&&t.weapon&&t.weapon.type!==xe.c.Type.Arrow?t.weapon:{type:xe.c.Type.Fist,strength:5,cooldown:0,knockback:2.5,range:ui,color:"ffffff"};if(i.type===xe.c.Type.Bow){let e;for(const t of this.inventory){const i=t.item;if(i&&i.weapon&&i.weapon.type===xe.c.Type.Arrow){e=i,t.item=null,this.game.dispatch(new B(t));break}}if(!e)return;t=e,i={type:xe.c.Type.Arrow,strength:i.strength+e.weapon.strength,cooldown:i.cooldown+e.weapon.cooldown,knockback:i.knockback+e.weapon.knockback,range:i.range+e.weapon.range,color:e.weapon.color}}let a=500;i.type===xe.c.Type.Spear?a=Math.min(1e3,i.cooldown):i.type!==xe.c.Type.Fist&&(a=Math.min(500,i.cooldown));let r=[];if(t&&t.weapon&&t.material&&t.material.affinity>Math.random()&&(r=t.effects||[]),this.game.view.camera.toMapCoords(this.cursorPos,this.coords),s.b.sub(this.direction,this.coords,this.playerPos),i.type===xe.c.Type.Fist&&s.b.length(this.direction)>i.range)return;s.b.normalize(this.direction,this.direction);const o=Kt(this.direction[1],this.direction[0],"attack"),n=`${i.type}-${o}`;this.playerSprite.animName=o,this.playerSprite.playActionAnim(n,a),this.game.dispatch(new D(this.game.player.id,i,this.coords,r)),s.b.set(this.playerVel,0,0),this.data.attackCooldown=i.cooldown||500}}class mi extends _e{constructor(e){super(e),this.direction=s.b.create(),this.start=s.b.create(),this.end=s.b.create(),this.attack=(({entityId:e,weapon:t,targetPosition:i,effects:a,duration:r})=>{const o=this.game.entities.get(e);if(!o)return;const{position:n}=o.traits.get(H);let h;if(s.b.sub(this.direction,i,n),t.type===xe.c.Type.Fist){s.b.scaleAndAdd(this.start,i,this.direction,-.5),s.b.copy(this.end,i);const r=Le.make(this.game,e,t,a,this.start,this.end,100,"sprites/projectiles/invisible");this.game.entities.add(r),h=500}else{t.type===xe.c.Type.Sword?(s.b.length(this.direction)>t.range?(s.b.normalize(this.direction,this.direction),s.b.scaleAndAdd(i,n,this.direction,t.range)):s.b.normalize(this.direction,this.direction),s.b.scaleAndAdd(this.start,i,[this.direction[1],-this.direction[0]],1),s.b.scaleAndAdd(this.end,i,[-this.direction[1],this.direction[0]],1),r=r||250):(s.b.normalize(this.direction,this.direction),s.b.copy(this.start,n),s.b.scaleAndAdd(this.end,this.start,this.direction,t.range),r=r||500),h=Math.min(t.type===xe.c.Type.Spear?1e3:500,t.cooldown);const o=Le.make(this.game,e,t,a,this.start,this.end,r,`sprites/projectiles/${t.type}`);this.game.entities.add(o)}o===this.game.player&&this.game.dispatch(new P(o.id,[Object(Oe.b)(se.a.Type.Stunned,0,h)]))}),e.messages$.ofType(D).subscribe(this.attack)}}const yi=350;class fi extends _e{constructor(e){super(e),this.runWhenPaused=!0,this.entityCollided=(({entityIdA:e,entityIdB:t})=>{const i=this.game.entities.get(e),s=this.game.entities.get(t);let a;if(i instanceof $e&&s===this.game.player)a=i;else{if(!(i===this.game.player&&s instanceof $e))return;a=s}a.age>=yi&&this.pickUp(a.traits.get(N).slots[0].item)&&a.delete()}),this.swapInventory=(e=>{const{slotA:t,slotB:i}=e;if(!this.acceptable(t.item,i.accepts)||!this.acceptable(i.item,t.accepts))return;const s=i.item;i.item=t.item,t.item=s,this.game.dispatch(new B(t)),this.game.dispatch(new B(i))}),e.messages$.ofType(C).subscribe(this.swapInventory),e.messages$.ofType(E).subscribe(this.entityCollided),this.playerPos=e.player.traits.get(H).position,this.playerInv=e.player.traits.get(N).slots}update(e){for(const e of this.game.entities.ofType($e)){const{slots:t}=e.traits.get(N);if(!this.canPickUp(t[0].item))continue;const i=e.traits.get(H),a=s.b.dist(i.position,this.playerPos);if(e.age>=yi&&a>.5&&a<3.5){s.b.sub(i.velocity,this.playerPos,i.position);const e=s.b.len(i.velocity);s.b.normalize(i.velocity,i.velocity),s.b.scale(i.velocity,i.velocity,5/(e*e))}}}acceptable(e,t){return!e||!t||("string"==typeof t?!!e.id.match(t):t.indexOf(e.type)>=0)}canPickUp(e){for(const t of this.playerInv)if(!t.item&&this.acceptable(e,t.accepts))return!0;return!1}pickUp(e){for(const t of this.playerInv)if(!t.item&&this.acceptable(e,t.accepts))return t.item=e,this.game.dispatch(new B(t)),!0;return!1}}class gi extends _e{constructor(e){super(e),this.runWhenPaused=!0,this.cameraOffset=s.b.create(),this.position=e.player.traits.get(H).position}update(e){s.b.scale(this.cameraOffset,this.position,gs),s.b.floor(this.game.view.camera.offset,this.cameraOffset)}}const wi=16;class bi extends _e{constructor(e){super(e),this.runWhenPaused=!0,this.sprites=new Map,this.container=new n.Container,this.renderTex=n.RenderTexture.create(1,1,n.SCALE_MODES.NEAREST),this.view=Object.assign(new n.Sprite(this.renderTex),{layer:q.Layer.Terrain,sortOffset:s.b.fromValues(0,0)}),this.elapsed=0,this.game.view.camera.add(this.view)}update(e){this.updateVisibility(),this.updateSprites(e),this.render()}updateVisibility(){const{offset:[e,t],viewWidth:i,viewHeight:a}=this.game.view.camera,r=Math.ceil(Math.sqrt(i*i+a*a)/2+gs),o=s.b.fromValues(e,t),n=gs/wi;function h(e,t){const i=e*n-o[0],s=t*n-o[1];return i*i+s*s<=r*r}const c=[];for(const[e,t]of this.sprites){const{x:i,y:s}=t.transform.position;h(i,s)||(c.push(t),this.sprites.delete(e))}const l=this.game.map,p=Math.max(0,Math.floor((e-r)/gs)),u=Math.min(l.width-1,Math.ceil((e+r)/gs)),d=Math.max(0,Math.floor((t-r)/gs)),m=Math.min(l.height-1,Math.ceil((t+r)/gs)),y=this.game.library.terrains;for(let e=p;e<=u;e++)for(let t=d;t<=m;t++){const i=y[l.getTerrain(e,t)];if(!i)continue;const s=e*wi,a=t*wi;if(!h(s,a))continue;const r=`${e}:${t}`;if(this.sprites.has(r))continue;const o=c.pop()||new x;o.setTexture(i.texture,e+t*l.width),o.position.set(s,a),o.parent||this.container.addChild(o),this.sprites.set(r,o)}for(const e of c)this.container.removeChild(e)}updateSprites(e){this.elapsed+=e;for(const e of this.container.children)e.update(this.elapsed)}render(){const{offset:[e,t],viewWidth:i,viewHeight:s}=this.game.view.camera,a=Math.ceil(Math.sqrt(i*i+s*s));let r=Number.MAX_VALUE,o=Number.MAX_VALUE;for(const e of this.sprites.values()){const{x:t,y:i}=e.transform.position;r=Math.min(r,t),o=Math.min(o,i)}this.container.setTransform(-r,-o);const n=Math.ceil(a/gs)*wi*2,h=1<<32-Math.clz32(n-1);this.renderTex.resize(h,h),this.game.app.renderer.render(this.container,this.renderTex);const c=gs/wi;this.view.setTransform(r*c-e+i/2,o*c-t+s/2,c,c)}}var xi=i(17),Si=i(40);const vi=32,zi=5;class ki extends x{constructor(e){super(),this.game=e,this.jitter=s.b.fromValues(0,0),this.sortOffset=s.b.fromValues(0,0),this.layer=q.Layer.Objects,this.coords=s.b.fromValues(-1,-1),this.outline=!0,this.anchor.set(.5,1)}setTile(e,t,i){s.b.set(this.coords,e,t),this.layer=i.terrain?q.Layer.Terrain:q.Layer.Objects,this.setTexture(i.texture,e+t*this.game.map.width),this.interactive=i.interactive||!1;const a=(i.scale||1)*gs/vi;this.scale.set(a,a)}}function Ti(e,t){return`${e}:${t}`}class ji extends _e{constructor(e){super(e),this.runWhenPaused=!0,this.sprites=new Map,this.elapsed=0,this.spriteCoords=s.b.create();const t=Object(Si.create)(this.game.map.props.seed);this.jitterNoiseX=new xi.a(t,1,1),this.jitterNoiseY=new xi.a(t,1,1),this.game.map.changes$.subscribe(({x:e,y:t})=>{const i=Ti(e,t),s=this.sprites.get(i);s&&(this.game.view.camera.removeChild(s),this.sprites.delete(i))}),this.game.messages$.ofType($).subscribe(e=>{e.sprite=this.sprites.get(Ti(e.x,e.y))})}update(e){this.updateVisibility(),this.updateSprites(e),this.updateTransforms()}updateVisibility(){const{offset:[e,t],viewWidth:i,viewHeight:s}=this.game.view.camera,a=zi*gs,r=i/2+a,o=s/2+a;function n(i,s){return i>=e-r&&i<=e+r&&s>=t-o&&s<=t+o}const h=[];let c=!1;for(const[e,t]of this.sprites)n(t.coords[0]*gs,t.coords[1]*gs)||(h.push(t),this.sprites.delete(e),c=!0);const l=this.game.map,p=Math.max(0,Math.floor((e-r)/gs)),u=Math.min(l.width-1,Math.ceil((e+r)/gs)),d=Math.max(0,Math.floor((t-o)/gs)),m=Math.min(l.height-1,Math.ceil((t+o)/gs)),y=this.game.library.objects;for(let e=p;e<=u;e++)for(let t=d;t<=m;t++){const i=y[l.getObject(e,t)];if(!i)continue;if(!n(e*gs,t*gs))continue;const s=Ti(e,t);if(this.sprites.has(s))continue;const a=h.pop()||new ki(this.game);a.setTile(e,t,i),i.jitter&&(a.jitter[0]=(2*this.jitterNoiseX.noise2D(e,t)-1)*(1/3),a.jitter[1]=(2*this.jitterNoiseY.noise2D(e,t)-1)*(1/3)),a.parent||this.game.view.camera.add(a),this.sprites.set(s,a),c=!0}for(const e of h)this.game.view.camera.removeChild(e);return c}updateSprites(e){this.elapsed+=e;for(const e of this.sprites.values())e.update(this.elapsed)}updateTransforms(){const e=this.game.map,t=this.game.library.objects;for(const i of this.sprites.values()){const a=t[e.getObject(i.coords[0],i.coords[1])];s.b.add(this.spriteCoords,i.coords,i.jitter),this.spriteCoords[0]+=.5,this.spriteCoords[1]+=a.terrain?1:.5,this.game.view.camera.toCameraPoint(this.spriteCoords,i.position)}}}const Oi=5;class Mi extends _e{constructor(){super(...arguments),this.runWhenPaused=!0,this.visible=new Set,this.halfSize=s.b.create(),this.tr=s.b.create(),this.elapsed=0}update(e){this.updateVisibility(),this.updateSprites(e),this.updateTransforms()}updateVisibility(){const{offset:e,viewWidth:t,viewHeight:i}=this.game.view.camera,a=Oi*gs;s.b.scaleAndAdd(this.halfSize,[a,a],[t,i],2);const r=t=>(s.b.scaleAndAdd(this.tr,this.halfSize,t,-gs),s.b.add(this.tr,this.tr,e),this.tr[0]>0&&this.tr[1]>0);for(const e of this.visible){const{position:t,sprite:i}=e.traits.get(H);e.game&&r(t)||(this.visible.delete(e),this.game.view.camera.removeChild(i))}for(const e of this.game.entities.withTrait(H)){const{position:t,sprite:i}=e.traits.get(H);r(t)&&!this.visible.has(e)&&(this.visible.add(e),this.game.view.camera.add(i))}}updateSprites(e){this.elapsed+=e;for(const e of this.visible)e.traits.get(H).sprite.update(this.elapsed)}updateTransforms(){for(const e of this.visible){const{position:t,offset:i,sprite:a,scale:r}=e.traits.get(H),o=e.traits.get(U);a.scale.set(r[0],r[1]);const n=o?o.z[0]:0,h=this.game.library.terrains[this.game.map.getTerrain(t[0],t[1]+.5)],c=h&&h.liquid;a.clip=c&&0===n?[0,1/6]:void 0,s.b.add(this.tr,t,i),this.game.view.camera.toCameraPoint(this.tr,a.position,n),s.b.sub(a.sortOffset,[0,n+1],i),a.pivot.set(a.width/2/r[0],a.height/2/r[1])}}}class Ci extends _e{constructor(e){super(e),this.animTargets=new Set,this.tween=new Ht.Group,this.elapsed=0,this.shake=(({target:e})=>{if(e){if(this.animTargets.has(e))return;this.animTargets.add(e),e.renderTranslation=e.renderTranslation||[0,0];const t=[4,-4,3,-3,2,-2,1,-1,0];new Ht.Tween(e.renderTranslation,this.tween).to({0:t.slice(0,4)},300).chain(new Ht.Tween(e.renderTranslation,this.tween).to({0:t.slice(4)},300)).onComplete(()=>this.animTargets.delete(e)).start(this.elapsed)}}),this.game.messages$.ofType(I.Shake).subscribe(this.shake)}update(e){this.elapsed+=e,this.tween.update(this.elapsed)}}const Bi=1e3,Ii=16,Fi=-10,Pi=.5;class Ai extends n.Sprite{constructor(e,t,i,a){let r;super(n.Texture.fromFrame("sprites/ui/particle")),this.life=Bi*(.5*Math.random()+.75),e===F.Type.Splash?(this.coords=s.b.random(s.b.create(),.25),this.velocity=s.b.random(s.b.create(),.5),this.z=s.b.fromValues(i+.25+.5*Math.random(),Math.random()),this.gravity=!0,r=Object(Se.a)(Ii*(Math.random()+.5),10,22)):(this.coords=s.b.fromValues(Math.random()-.5,0),this.velocity=s.b.fromValues(0,0),this.z=s.b.fromValues(i+.25+Math.random(),.5*Math.random()+.25),this.gravity=!1,r=Object(Se.a)(Ii*Math.random(),10,16),this.alpha=.7),s.b.add(this.coords,this.coords,t),r=r+1&-2,this.scale.set(r/Ii,r/Ii);const o=Math.floor(32*(2*Math.random()-1));let h=a>>16&255,c=a>>8&255,l=255&a;h=Object(Se.a)(h+o,0,255),c=Object(Se.a)(c+o,0,255),l=Object(Se.a)(l+o,0,255),this.tint=(h<<16)+(c<<8)+l}}class Di extends _e{constructor(e){super(e),this.particles=[],this.overlay=Object.assign(new n.particles.ParticleContainer,{layout:()=>{}}),this.showParticles=(({particleType:e,coords:t,numParticles:i,color:s,z:a})=>{for(let r=0;r<i;r++){const i=new Ai(e,t,a,s);this.overlay.addChild(i),this.particles.push(i)}}),e.view.add(this.overlay),e.messages$.ofType(F).subscribe(this.showParticles)}update(e){const t=e/1e3;for(let i=this.particles.length-1;i>=0;i--){const a=this.particles[i];if(a.life-=e,a.life<=0){this.overlay.removeChild(a),this.particles.splice(i,1);continue}s.b.scaleAndAdd(a.coords,a.coords,a.velocity,t);const r=a.gravity?Fi:0;a.z[0]+=a.z[1]*t+.5*r*t*t,a.z[1]+=r*t,a.z[0]<=0&&(a.z[0]=0,a.z[1]=-a.z[1]*Pi,s.b.scale(a.velocity,a.velocity,Pi)),this.game.view.camera.toCameraPoint(a.coords,a.position,a.z[0])}}}class $i{static register(e){this.registry.set(e.name,e)}get game(){return this.context.game}log(e){return this.context.log(e)}run(e,t){this.context=e,this.exec(...t),this.context=void 0}}$i.registry=new Map;$i.register(new class extends $i{constructor(){super(...arguments),this.name="clear-inv"}exec(){const{slots:e}=this.game.player.traits.get(N);for(const t of e)t.item=null,this.game.dispatch(new B(t));this.log("inventory cleared.")}});var Ei=i(14);$i.register(new class extends $i{constructor(){super(...arguments),this.name="dump"}exec(e="elements"){switch(e){case"elements":{const e=e=>Object(Ei.a)(Object(ne.c)(e).toFixed(2),5," ");this.log("|   name   |    fission   |    fusion    | color |");for(const t of Object.keys(this.game.library.elements)){const i=this.game.library.elements[t];this.log(` ${Object(Ei.a)(t,10," ")} (${e(i.fissionThreshold)}, ${e(i.fissionRate)}) (${e(i.fusionThreshold)}, ${e(i.fusionRate)}) ${Object(Ei.a)(i.color,6,"0")}`)}}break;case"compo":this.log("|tier|    name    |   element   |   element   |");for(const{tier:e,name:t,composition:i}of Je.c)this.log(` ${Object(Ei.a)(e.toString(),4," ")} ${Object(Ei.a)(t,12," ")} ${Object(Ei.a)(i?i[0]:"",13," ")} ${Object(Ei.a)(i?i[1]:"",13," ")}`);break;case"plants":this.log("|       name       |   element   |   element   |");for(const e of this.game.library.objects.filter(e=>e&&e.drops))for(const{item:t}of e.drops.table.items){const e=Object(ne.b)(t);(e.id.startsWith("flower-")||e.id.startsWith("berries-"))&&this.log(` ${Object(Ei.a)(e.name,18," ")} ${Object(Ei.a)(e.aspects[0].element,13," ")} ${Object(Ei.a)(e.aspects[1].element,13," ")}`)}break;case"item":{const{slots:e}=this.game.player.traits.get(N),{hotbarSelection:t}=this.game.player.traits.get(Y),{item:i}=e[t];this.log(JSON.stringify(i,null,4))}break;case"dragons":this.log("| id |       name       |  HP  | STR | SPD | score |");for(const e of this.game.data.custom.dragons.dragons)this.log(` ${Object(Ei.a)(e.dragonId,4," ")} ${Object(Ei.a)(e.name,18," ")} ${Object(Ei.a)(e.stats.maxHp.toFixed(1),6," ")} ${Object(Ei.a)(e.stats.str.toFixed(1),5," ")} ${Object(Ei.a)(e.stats.spd.toFixed(1),5," ")} ${Object(Ei.a)(e.score.toFixed(4),7," ")}`);break;case"behaviors":{const{lastAttackId:e}=this.game.player.traits.get(Y),t=this.game.entities.get(e);if(!t){this.log("target entity does not exist.");break}const i=t.traits.get(X);if(!i){this.log("target entity is not enemy.");break}this.log(ee.dump(i.def.behaviors))}break;default:this.log("unknown dump type: "+e)}}});$i.register(new class extends $i{constructor(){super(...arguments),this.name="dupe"}exec(e){let t=Number(e)||1;const{hotbarSelection:i}=this.game.player.traits.get(Y),{slots:s}=this.game.player.traits.get(N),a=s[i].item;if(a)for(;t-- >0;){const e=$e.make(this.game,a);e.age=1e4,this.game.entities.add(e)}}});$i.register(new class extends $i{constructor(){super(...arguments),this.name="give"}exec(...e){e=e.map(j.a);for(const t of this.game.library.objects.filter(e=>e&&e.drops))for(const{item:i}of t.drops.table.items){const t=Object(ne.b)(i),s=e.indexOf(t.name);if(s<0)continue;e.splice(s,1);const a=$e.make(this.game,t);a.age=1e4,this.game.entities.add(a)}for(const{output:t}of this.game.library.recipes){const i=e.indexOf(t.name);if(i<0)continue;e.splice(i,1);const s=$e.make(this.game,Object(oe.a)(t));s.age=1e4,this.game.entities.add(s)}e.length>0&&this.log("item not found: "+e.join(", "))}});$i.register(new class extends $i{constructor(){super(...arguments),this.name="potion"}exec(...e){const t=[];for(let i=0;i+1<e.length;i+=2){const s=Object(j.a)(e[i]),a=Number(e[i+1])||100;this.game.library.elements[s]?t.push({element:s,amount:a}):this.log("element not found: "+s)}const i=$e.make(this.game,Object(Ge.b)(t,this.game.library.elements));i.age=1e4,this.game.entities.add(i)}});$i.register(new class extends $i{constructor(){super(...arguments),this.name="spawn"}exec(e){Ce[e.toLowerCase()]?this.game.dispatch(new W(e.toLowerCase(),this.game.player.traits.get(H).position)):this.log("unknown type: "+e)}});i(242);var Li=i(378);const Vi='\n<div class="console">\n  <div class="con-log-box">\n    <div class="con-log-scroll">\n      <div class="con-log"></div>\n    </div>\n  </div>\n  <div>\n    <input class="con-input">\n  </div>\n</div>\n';const Wi=.8,_i=.25;const qi=.75,Hi=[[0,"1"],[1,"2"],[2,"3"],[3,"4"],[4,"5"],[5,"6"],[6,"7"],[7,"8"]];class Ri extends k{constructor(e){super(e,"",{default:{align:"left"},s:{fontSize:12},name:{fontWeight:"bold",valign:"middle"},desc:{fontStyle:"italic"},time:{fill:"#d0d0d0"}}),this.icon=new n.Sprite,this.icon.scale.set(2,2),this.icon.position.set(20,20),this.alpha=.75,this.addChild(this.icon)}setEffect(e){this.effect=e,this.icon.texture=n.Texture.fromFrame(`sprites/effects/${e.type}`),this.update()}update(){if(!this.effect)return;const e=[`<s>     </s><name>${this.effect.name}</name>`,`<desc>${this.effect.description}</desc>`,`<time>${Math.floor(this.effect.duration/1e3)}s remains</time>`];this.text=e.join("\n")}}const Ni=256,Ui=32;const Gi=[class{constructor(e){this.game=e,this.display=null,this.root=(new DOMParser).parseFromString(Vi,"text/html").querySelector(".console"),this.input=this.root.querySelector(".con-input"),this.logBox=this.root.querySelector(".con-log"),this.lastInput="",this.onKeyDown=(e=>{const t=this.root.classList.contains("active");t&&"Escape"===e.key?this.toggleInput():t&&"ArrowUp"===e.key&&e.target===this.input?(this.input.value=this.lastInput,this.input.setSelectionRange(this.input.value.length,this.input.value.length),e.preventDefault()):"t"===e.key.toLowerCase()||"/"===e.key?(t?this.input.focus():document.activeElement===this.game.app.view&&this.toggleInput(),"/"===e.key&&e.target!==this.input&&(this.input.value="/")):"Enter"===e.key&&e.target===this.input&&(this.processInput(this.input.value),this.input.value=""),e.target!==this.input&&e.preventDefault()}),document.body.appendChild(this.root),this.root.addEventListener("keydown",this.onKeyDown),this.game.app.view.addEventListener("keydown",this.onKeyDown)}update(){}dispose(){this.root.remove(),document.body.removeEventListener("keydown",this.onKeyDown)}toggleInput(){this.root.classList.toggle("active")?this.input.focus():this.game.app.view.focus()}log(e){const t=document.createElement("li");t.classList.add("con-log-entry"),t.innerText=e,this.logBox.appendChild(t),t.scrollIntoView()}processInput(e){if(!e)return;if(this.lastInput=e,!e.startsWith("/"))return void this.log(e);const[t,...i]=Object(Li.a)(e.split(" ").map(e=>e.trim())),s=t.substr(1).toLowerCase();if("clear"===s)for(;this.logBox.lastChild;)this.logBox.removeChild(this.logBox.lastChild);else $i.registry.has(s)?$i.registry.get(s).run(this,i):this.log("unknown command: "+s)}},class extends n.Container{constructor(e){super(),this.game=e,this.display=this,this.bg=new n.Sprite(n.Texture.WHITE),this.selection=new n.Sprite(n.Texture.fromFrame("sprites/ui/inv-selection")),this.wheelDebounce=0,this.wheelSelection=(e=>{if(this.game.paused)return;if(this.elapsed-this.wheelDebounce<20)return;const t=e.deltaX+e.deltaY;if(Math.abs(t)<32)return;const i=Math.sign(t),s=this.slots.length;this.player.hotbarSelection=(this.player.hotbarSelection+i+s)%s,this.wheelDebounce=this.elapsed}),this.elapsed=0,this.maxConsumeCooldown=0,this.maxAttackCooldown=0,this.lastConsumeCooldown=0,this.lastAttackCooldown=0,this.slots=e.player.traits.get(N).slots.slice(0,8),this.player=e.player.traits.get(Y),this.bg.tint=4210752;const t=new n.Container;t.addChild(this.bg),this.slotViews=this.slots.map(t=>new _(e,t));for(const e of this.slotViews)e.enabled=!1,e.toolTipOpacity=.9,e.alwaysInteractive=!0,e.bgOverlay.texture=n.Texture.WHITE,e.bgOverlay.width=48,e.bgOverlay.height=0,e.bgOverlay.alpha=.2,e.bgOverlay.anchor.set(0,1),e.bgOverlay.position.set(4,52),t.addChild(e),e.on("pointerdown",()=>this.player.hotbarSelection=this.slots.indexOf(e.slot));this.addChild(t),this.addChild(this.selection),t.alpha=qi,this.interactive=!0,this.on("pointerover",()=>t.alpha=1),this.on("pointerout",()=>t.alpha=qi),e.app.view.addEventListener("wheel",this.wheelSelection)}dispose(){this.game.app.view.removeEventListener("wheel",this.wheelSelection)}update(e){for(const[e,t]of Hi)this.game.keyboard.isDown(t)&&(this.player.hotbarSelection=e);this.elapsed+=e,this.player.consumeCooldown>this.lastConsumeCooldown&&(this.maxConsumeCooldown=this.player.consumeCooldown),this.lastConsumeCooldown=this.player.consumeCooldown,this.player.attackCooldown>this.lastAttackCooldown&&(this.maxAttackCooldown=this.player.attackCooldown),this.lastAttackCooldown=this.player.attackCooldown;const t=this.player.consumeCooldown/this.maxConsumeCooldown*48,i=this.player.attackCooldown/this.maxAttackCooldown*48;for(const{slot:e,bgOverlay:s}of this.slotViews)e.item&&e.item.weapon&&e.item.weapon.type!==xe.c.Type.Arrow?s.height=i:e.item&&e.item.type===xe.b.Type.Consumable?s.height=t:s.height=0}layout(e,t){const i=8+(_.Size+4)*this.slotViews.length,s=_.Size+12;this.position.set(Math.round((e-i)/2),t-s);let a=6;for(const e of this.slotViews)e.position.set(a,6),e.layout(),a+=_.Size+4;this.selection.position.set(3+(_.Size+4)*this.player.hotbarSelection,3),this.bg.position.set(0,0),this.bg.width=i,this.bg.height=s}},class extends n.Container{constructor(e){super(),this.game=e,this.display=this,this.hpBarIcon=new n.Sprite(n.Texture.fromFrame("sprites/ui/status-hp")),this.hpBarBg=new n.Sprite(n.Texture.WHITE),this.hpBarFill=new n.Sprite(n.Texture.WHITE),this.hpBarText=new p,this.effectIcons=[],this.stats=K.compute(e.player.traits.get(K)),this.effects=e.player.traits.get(K).effects,this.effectToolTip=new Ri(e.app),this.hpBarBg.tint=8421504,this.hpBarBg.width=Ni,this.hpBarBg.height=Ui;const t=new n.Container;this.addChild(t),t.addChild(this.hpBarBg),t.addChild(this.hpBarFill),t.addChild(this.hpBarText),t.addChild(this.hpBarIcon),t.alpha=.65,this.hpBarText.visible=!1,t.interactive=!0,t.on("pointerover",()=>{t.alpha=1,this.hpBarText.visible=!0}),t.on("pointerout",()=>{t.alpha=.65,this.hpBarText.visible=!1})}update(e){const{hp:t,maxHp:i}=this.stats,s=t/i;this.hpBarText.text=`${Math.ceil(t)}/${i}`,this.hpBarFill.width=Ni*s,this.hpBarFill.height=Ui,this.hpBarFill.tint=s<.3?10485760:s<.6?10526720:40960;const a=this.effects.filter(({type:e,duration:t})=>t>0&&se.b[e].visible);for(;this.effectIcons.length<a.length;){const e=Object.assign(new n.Sprite,{effectIndex:0});e.interactive=!0,e.scale.set(2,2),this.addChild(e),this.game.app.toolTip.add(e,()=>(this.effectToolTip.setEffect(this.effects[e.effectIndex]),this.effectToolTip)),this.effectIcons.push(e)}for(;this.effectIcons.length>a.length;)this.removeChild(this.effectIcons.splice(this.effectIcons.length-1,1)[0]);for(let e=0;e<a.length;e++)this.effectIcons[e].texture=n.Texture.fromFrame(`sprites/effects/${a[e].type}`),this.effectIcons[e].effectIndex=this.effects.indexOf(a[e]);this.effectToolTip.update()}layout(e,t){const i=e-Ni-16;this.hpBarBg.position.set(i,288),this.hpBarFill.position.set(i,288),this.hpBarText.position.set(i,288),this.hpBarText.layout(Ni,Ui),this.hpBarIcon.position.set(i-this.hpBarIcon.width-4,288);const s=i,a=288+Ui+16;for(let e=0;e<this.effectIcons.length;e++)this.effectIcons[e].position.set(s+40*e,a)}},class extends u{constructor(e){super(e.app),this.game=e,this.display=this,this.map=new n.Container,this.mapSprite=new n.Sprite,this.isFullscreen=!1,this.isMouseOver=!1,this.mapDirty=!1,this.indicators=new Map,this.entityVisible=new Set,this.dist=s.b.create(),this.offset=this.game.player.traits.get(H).position,this.content.addChild(this.map),this.map.addChild(this.mapSprite),this.mapSprite.anchor.set(0,0),this.alpha=Wi,this.content.interactive=!0,this.content.on("pointerover",()=>this.isMouseOver=!0),this.content.on("pointerout",()=>this.isMouseOver=!1),this.content.on("pointerdown",()=>this.isFullscreen=!0),this.content.on("pointerup",()=>this.isFullscreen=!1),this.content.on("pointerupoutside",()=>this.isFullscreen=!1);const t=this.game.map;this.canvas=document.createElement("canvas"),this.canvas.width=t.width,this.canvas.height=t.height,this.mapData=new Uint8ClampedArray(t.width*t.height*4),this.mapSprite.texture=n.Texture.fromCanvas(this.canvas),this.game.map.changes$.subscribe(({x:e,y:t})=>this.renderTile(e,t));for(let e=0;e<t.height;e++)for(let i=0;i<t.width;i++)this.renderTile(i,e);this.update()}getIndicator(e){let t=this.indicators.get(e.id);return t||(t=new n.Sprite(n.Texture.fromFrame("sprites/ui/indicator")),e.traits.get(Y)?t.tint=255:t.tint=16711680,t.anchor.set(.5,.5),this.indicators.set(e.id,t),t)}renderTile(e,t){const i=4*(e+t*this.game.map.width);function s(e){if(!e)return null;const t=parseInt(e,16);return[t>>>16&255,t>>>8&255,t>>>0&255]}const a=this.game.library.terrains[this.game.map.getTerrain(e,t)],r=a?s(a.color):[0,0,0],o=this.game.library.objects[this.game.map.getObject(e,t)],n=o?s(o.color):null;let h=r;null!==n&&(h=[r[0]*(1-_i)+n[0]*_i,r[1]*(1-_i)+n[1]*_i,r[2]*(1-_i)+n[2]*_i]),this.mapData[i]=h[0],this.mapData[i+1]=h[1],this.mapData[i+2]=h[2],this.mapData[i+3]=255,this.mapDirty=!0}update(){for(const e of this.indicators.keys())this.game.entities.get(e)||(this.map.removeChild(this.indicators.get(e)),this.indicators.delete(e),this.entityVisible.delete(e));const{position:e}=this.game.player.traits.get(H);for(const t of this.game.entities.withTrait(H)){if(t.type===$e.Type||t.type===Le.Type)continue;const i=this.getIndicator(t),{position:a}=t.traits.get(H);s.b.sub(this.dist,e,a);const r=this.isFullscreen||s.b.length(this.dist)<50;r&&!this.entityVisible.has(t.id)?(this.map.addChild(i),this.entityVisible.add(t.id)):!r&&this.entityVisible.has(t.id)&&(this.map.removeChild(i),this.entityVisible.delete(t.id))}if(!this.mapDirty)return;const t=this.canvas.getContext("2d"),i=t.getImageData(0,0,this.canvas.width,this.canvas.height);i.data.set(this.mapData),t.putImageData(i,0,0),this.mapSprite.texture.update(),this.mapDirty=!1}layout(e,t){let i;this.isFullscreen?(this.x=16,this.y=16,super.layout(e-32,t-32),i=1,this.alpha=1,this.map.position.set(Math.floor(-this.offset[0]+(e-32)/2),Math.floor(-this.offset[1]+(t-32)/2))):(this.x=e-16-256,this.y=16,super.layout(256,256),i=4,this.alpha=this.isMouseOver?1:Wi,this.map.position.set(Math.floor(4*-this.offset[0]+128),Math.floor(4*-this.offset[1]+128))),this.mapSprite.scale.set(i,i);for(const[e,t]of this.indicators){const s=this.game.entities.get(e);if(!s)continue;const{position:a}=s.traits.get(H);t.position.set(a[0]*i,a[1]*i)}}}];class Ki extends _e{constructor(e){super(e),this.runWhenPaused=!0,this.elements=[];for(const t of Gi){const i=new t(e);i.display&&e.view.add(i.display),this.elements.push(i)}}update(e){for(const t of this.elements)t.update(e)}dispose(){for(const e of this.elements)e.dispose&&e.dispose()}}class Yi{constructor(e){this.game=e,this.tasks=[]}init(){this.add(Vt),this.add(Wt),this.add(_t),this.add(xt),this.add(vt),this.add(Dt),this.add(Lt),this.add(qt),this.add(ci),this.add(li),this.add(di),this.add(mi),this.add(fi),this.add(gi),this.add(bi),this.add(ji),this.add(Mi),this.add(Ci),this.add(Di),this.add(Ki)}dispose(){for(const e of this.tasks)e.dispose();this.tasks.length=0}add(e){const t=new e(this.game);this.tasks.push(t)}update(e,t){for(let i=0;i<this.tasks.length;i++)this.tasks[i].isActive?t&&!this.tasks[i].runWhenPaused||this.tasks[i].update(e):(this.tasks[i].dispose(),this.tasks.splice(i,1),i--)}}var Ji=i(34);class Xi{constructor(e,t,i){this.width=e,this.height=t,this.props=i,this.changes$=new Ji.Subject,this.data=new Uint16Array(e*t*2)}serialize(){const e=new Uint16Array(this.width*this.height),t=new Uint16Array(this.width*this.height);for(let i=0;i<e.length;i++)e[i]=this.data[2*i],t[i]=this.data[2*i+1];return{width:this.width,height:this.height,props:this.props,terrains:e,objects:t}}static deserialize(e){const t=new Xi(e.width,e.height,e.props),i=e.width*e.height;for(let s=0;s<i;s++)t.data[2*s]=e.terrains[s],t.data[2*s+1]=e.objects[s];return t}toIndex(e,t){return e=Math.floor(e),t=Math.floor(t),e<0||e>=this.width?-1:t<0||t>=this.height?-1:e+this.width*t}getTerrain(e,t){const i=this.toIndex(e,t);return this.data[2*i]||0}getObject(e,t){const i=this.toIndex(e,t);return this.data[2*i+1]||0}setTerrain(e,t,i){const s=this.toIndex(e,t);s<0||s>=this.data.length||(this.data[2*s]=i,this.changes$.next({x:e,y:t}))}setObject(e,t,i){const s=this.toIndex(e,t);s<0||s>=this.data.length||(this.data[2*s+1]=i,this.changes$.next({x:e,y:t}))}}class Qi{constructor(e,t){this.app=e,this.data=t,this.view=new We,this.keyboard=this.app.keyboard,this.tasks=new Yi(this),this.entities=new Ve(this),this._paused=!1,this._message$=new Ji.Subject,this.messages$=Object.assign(this._message$,{ofType:e=>this.messages$.pipe(Object(St.filter)(t=>t instanceof e))}),this.library=t.library}get paused(){return this._paused}init(){this.map=Xi.deserialize(this.data.map),this.entities.init(),this.tasks.init()}save(){this.data.map=this.map.serialize(),this.entities.save()}update(e,t=!1){this._paused=t,this.tasks.update(e,t),t||this.entities.update(e)}layout(){const{width:e,height:t}=this.app.screen;this.view.layout(e,t)}dispose(){this.tasks.dispose(),this.entities.dispose()}get player(){return this.entities.get(1)}dispatch(e){return this._message$.next(e),e}}var Zi=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class es extends c{get name(){return"main"}constructor(e,t){super(e),this.game=new Qi(e,t),this.root.addChild(this.game.view)}enter(){return Zi(this,void 0,void 0,function*(){this.game.init(),this.root.alpha=0,yield Ut(this.root).toPromise()})}update(e){this.game.update(e)}layout(){this.game.layout()}leave(){return Zi(this,void 0,void 0,function*(){this.game.dispose(),this.root.alpha=1,yield Nt(this.root).toPromise()})}}var ts=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class is extends c{constructor(e){super(e),this.logo=new n.Sprite(n.Texture.fromFrame("sprites/ui/title")),this.newButton=new d("new game"),this.loadBar=new n.Sprite(n.Texture.WHITE),this.loadMessage=new p(""),this.saveLabel=new p("saves"),this.saveButtons=[],this.root.addChild(this.logo),this.root.addChild(this.newButton),this.root.addChild(this.loadBar),this.root.addChild(this.loadMessage),this.newButton.on(d.Clicked,this.newGame.bind(this)),this.loadBar.tint=4210752,this.loadBar.width=0}get name(){return"title"}enter(){return ts(this,void 0,void 0,function*(){this.updateSaves(),this.root.alpha=0,yield Ut(this.root).toPromise()})}pause(){return ts(this,void 0,void 0,function*(){this.root.alpha=1,yield Nt(this.root).toPromise()})}resume(){return ts(this,void 0,void 0,function*(){this.updateSaves(),this.newButton.isEnabled=!0,this.loadMessage.text="",this.loadBar.width=0,this.root.alpha=0,yield Ut(this.root).toPromise()})}updateSaves(){for(const e of this.saveButtons)this.root.removeChild(e);this.saveButtons=[];for(const e of Object.keys(localStorage).sort()){const t=new d(e);t.on(d.Clicked,()=>this.startGame(xe.a.import(localStorage[e]))),this.root.addChild(t),this.saveButtons.push(t)}this.saveButtons.length>0&&this.root.addChild(this.saveLabel)}layout(){const e=this.logo.height+50+75+20+50,{width:t,height:i}=this.app.screen;this.logo.position.set((t-this.logo.width)/2,(i-e)/2),this.newButton.position.set((t-160)/2,this.logo.y+this.logo.height+50),this.newButton.layout(160,64),this.loadMessage.position.set(0,this.newButton.y+64+20),this.loadMessage.layout(t,50),this.loadBar.position.set(t/4,this.newButton.y+64+20),this.loadBar.height=50,this.saveLabel.position.set(t-256,64),this.saveLabel.layout(192,48);let s=this.saveLabel.y+48+16;for(const e of this.saveButtons)e.position.set(t-256,s),e.layout(192,48),s+=64}newGame(){return ts(this,void 0,void 0,function*(){this.newButton.isEnabled=!1,this.saveButtons.forEach(e=>e.isEnabled=!1);const e=yield new Pe(ms,ms,ys||performance.now().toString()).generate((e,t)=>{e&&(this.loadMessage.text=e),this.loadBar.width=this.app.screen.width/2*t});yield this.startGame(e)})}startGame(e){return ts(this,void 0,void 0,function*(){this.newButton.isEnabled=!1,this.saveButtons.forEach(e=>e.isEnabled=!1),yield this.app.pushState(new es(this.app,e))})}}var ss=i(73),as=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};var rs=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class os extends c{constructor(e){super(e.game.app),this.overlay=e,this.bg=new n.Sprite(n.Texture.WHITE),this.bg.tint=0,this.bg.alpha=.5,this.root.addChild(this.bg),this.root.addChild(this.overlay)}get name(){return"overlay"}enter(){return rs(this,void 0,void 0,function*(){this.overlay.init()})}update(e){this.overlay.update(e),this.overlay.game.update(e,!0)}layout(){const{width:e,height:t}=this.app.screen;this.bg.width=e,this.bg.height=t,this.overlay.layout(e,t),this.overlay.game.layout()}leave(){return rs(this,void 0,void 0,function*(){this.overlay.dispose()})}}class ns{constructor(e){this.elem=e,this.state=new Set,this.newKey=new Map,this.keydown=this.keydown.bind(this),this.keyup=this.keyup.bind(this),this.blur=this.blur.bind(this),e.tabIndex=1,e.addEventListener("keydown",this.keydown),e.addEventListener("keyup",this.keyup),e.addEventListener("blur",this.blur),setTimeout(()=>e.focus(),0)}keydown(e){e.preventDefault(),e.repeat||(this.state.add(e.key.toLowerCase()),this.newKey.set(e.key.toLowerCase(),!0))}keyup(e){e.preventDefault(),e.repeat||(this.state.delete(e.key.toLowerCase()),this.newKey.set(e.key.toLowerCase(),!1))}blur(){for(const e of this.state)this.newKey.set(e,!1);this.state.clear()}isDown(...e){return e.some(e=>!0===this.newKey.get(e.toLowerCase()))}isUp(...e){return e.some(e=>!1===this.newKey.get(e.toLowerCase()))}isPressed(...e){return e.some(e=>this.state.has(e.toLowerCase()))}update(){this.newKey.clear()}dispose(){this.elem.removeEventListener("keydown",this.keydown),this.elem.removeEventListener("keyup",this.keyup),this.elem.removeEventListener("blur",this.blur)}}var hs=i(189);class cs{constructor(e){this.app=e,this.overlay=new n.Container,this.pointerPos=new n.Point,this.dragOffset=new n.Point,this.endDrag$=new Ji.Subject,this.end=(e=>{if(this.activeObj){const t=e.data.global.clone();t.x+=this.dragOffset.x,t.y+=this.dragOffset.y;const i=this.interaction.hitTest(t,this.app.root);this.endDrag$.next(i),this.overlay.removeChild(this.activeObj),this.activeObj=void 0}e.data.getLocalPosition(this.overlay,this.pointerPos)}),this.interaction=e.renderer.plugins.interaction,e.stage.addChild(this.overlay),this.interaction.on("pointermove",t=>{t.data.originalEvent.target===e.view?t.data.getLocalPosition(this.overlay,this.pointerPos):this.cancel()}),this.interaction.on("pointerup",this.end)}get active(){return!!this.activeObj}begin(e){return this.activeObj&&(console.log("dragdrop: already in progress"),this.cancel()),this.overlay.toLocal(new n.Point(0,0),e,this.dragOffset),this.dragOffset.x-=this.pointerPos.x,this.dragOffset.y-=this.pointerPos.y,e.parent&&e.parent.removeChild(e),this.overlay.addChild(e),this.activeObj=e,this.endDrag$.pipe(Object(hs.first)()).toPromise()}cancel(e=this.activeObj){this.activeObj&&this.activeObj===e&&(this.overlay.removeChild(this.activeObj),this.endDrag$.next(null),this.activeObj=void 0)}layout(){this.activeObj&&this.activeObj.position.set(this.pointerPos.x+this.dragOffset.x,this.pointerPos.y+this.dragOffset.y)}}const ls=8;class ps{constructor(e){this.app=e,this.overlay=new n.Container,this.pointerPos=new n.Point,this.global=new n.Point,this.interaction=e.renderer.plugins.interaction,e.stage.addChild(this.overlay),this.interaction.on("pointermove",t=>{t.data.originalEvent.target===e.view?(t.data.getLocalPosition(this.overlay,this.pointerPos),this.global.copy(t.data.global)):this.panel&&this.hide(this.panel)})}get active(){return!!this.panel}add(e,t){const i=i=>{if(i.data.originalEvent.target===this.app.view&&i.target===e&&!this.app.dragDrop.active){const i=t();i&&this.show(i,e)}};e.on("pointerover",i),e.on("pointermove",i)}show(e,t){this.panel&&this.hide(this.panel),this.overlay.addChild(e),this.panel=e,this.target=t}hide(e){this.panel===e&&(this.overlay.removeChild(e),this.panel=void 0,this.target=void 0)}update(){if(!this.panel)return;this.interaction.hitTest(this.global,this.app.root)!==this.target&&this.hide(this.panel)}layout(){if(this.panel){const{width:e,height:t}=this.app.screen;this.panel.layout(e,t);const{width:i,height:s}=this.panel;let a=this.pointerPos.x+ls,r=this.pointerPos.y+ls;a+i>=e&&(a=this.pointerPos.x-ls-i),r+s>=t&&(r=this.pointerPos.y-ls-s),this.panel.position.set(a,r)}}}var us=function(e,t,i,s){return new(i||(i=Promise))(function(a,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function n(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(o,n)}h((s=s.apply(e,t||[])).next())})};class ds extends n.Application{constructor(){super({autoResize:!0,antialias:!0,roundPixels:!0}),this.root=this.stage.addChild(new n.Container),this._states=[],this.resources={},this.keyboard=new ns(this.view),this.toolTip=new ps(this),this.dragDrop=new cs(this),this.view.oncontextmenu=(e=>e.preventDefault()),n.settings.SCALE_MODE=n.SCALE_MODES.NEAREST,this.ticker.add(this.tick.bind(this));const e=this.renderer.plugins.interaction;e.moveWhenInside=!0,e.on("pointerup",e=>{!function t(i,s){if(s&&i.interactive&&(e.currentTarget=i,i.emit("pointerupoutside",e)),i.interactiveChildren&&i.children){const e=s||!!i.mask||!!i.hitArea;for(const s of i.children)t(s,e)}}(this.stage,!1)})}get state(){return this._states[this._states.length-1]||null}pushState(e){return us(this,void 0,void 0,function*(){this.state&&(yield this.state.pause(),this.state.root.hitArea=n.Rectangle.EMPTY),this._states.push(e),this.root.addChild(e.root),yield e.enter()})}popState(){return us(this,void 0,void 0,function*(){this.state&&(yield this.state.leave(),this.root.removeChild(this.state.root),this._states.pop()),this.state&&(this.state.root.hitArea=null,yield this.state.resume())})}topState(e){return us(this,void 0,void 0,function*(){yield this.popState(),yield this.pushState(e)})}tick(){this.state&&this.state.update(this.ticker.elapsedMS),Ht.update(),this.keyboard.update(),this.toolTip.update()}render(){this.state&&this.state.layout(),this.toolTip.layout(),this.dragDrop.layout(),super.render()}}const ms=2048,ys="",fs=2,gs=64;i.d(t,"App",function(){return ds}),i.d(t,"MapSize",function(){return ms}),i.d(t,"Seed",function(){return ys}),i.d(t,"UIScaleFactor",function(){return fs}),i.d(t,"DisplayTileSize",function(){return gs});const ws=function(e){function t(){const t=window.innerWidth,i=window.innerHeight;e.renderer.resize(t,i)}document.body.appendChild(e.view),window.onresize=t,t();const i=new a;document.body.appendChild(i.dom);const n=e.ticker.update;return e.ticker.update=((...t)=>{i.begin(),n.apply(e.ticker,t),i.end()}),s.a.setMatrixArrayType(Float64Array),o.registerPlugin(r),o.defaultOptions.className="vex-theme-plain",e}(new ds);ws.pushState(new class extends c{constructor(e){super(e),this.loadingText=new n.Text("loading...\n",{fill:"white",fontSize:14,lineHeight:20,align:"center"}),this.root.addChild(this.loadingText)}get name(){return"preload"}enter(){return as(this,void 0,void 0,function*(){this.run()})}layout(){this.loadingText.x=(this.app.screen.width-this.loadingText.width)/2,this.loadingText.y=(this.app.screen.height-this.loadingText.height)/2}run(){const e=this.app.loader,t=e.onProgress.add(()=>{this.loadingText.text=`loading...\n${Math.round(e.progress)}%`}),s=i(240);for(const t of s.keys()){const i=/^\.\/(.*)\.(.*)$/.exec(t);if(!i)continue;const[,a,r]=i;a.startsWith("sprites/")?"json"===r&&e.add(a,t):e.add(a,s(t))}e.pre((e,t)=>{e.name.startsWith("sprites/")&&"json"===e.extension&&(e.type=n.loaders.Resource.TYPE.JSON,e.data=s(e.url),e.data.meta.image=`../${s(`./sprites/${e.data.meta.image}`)}`,e.complete()),t()});const a=Promise.all([new ss("Unibody8Pro").load(),new ss("Unibody8Pro",{weight:"bold"}).load(),new ss("Unibody8Pro",{style:"italic"}).load()]);e.load((i,s)=>as(this,void 0,void 0,function*(){e.onProgress.detach(t);for(const e of Object.keys(s)){const t=s[e];t.type!==n.loaders.Resource.TYPE.JSON||t.spritesheet||(this.app.resources[e]=t.data)}yield a,yield Nt(this.root).toPromise(),yield this.app.topState(new is(this.app))}))}}(ws)),Object.assign(window,{app:ws})},218:function(e,t,i){e.exports=i.p+"assets/36da4bca0fcaf1b4230ba4d64a98851a.png"},219:function(e){e.exports={meta:{image:"ui.png",size:{w:364,h:280},scale:"1",hash:"07e62371d10a66680c02b4567a974666cef36252"},frames:{"sprites/ui/inv-selection":{frame:{x:2,y:186,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/ui/title":{frame:{x:2,y:2,w:360,h:180},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:360,h:180},sourceSize:{w:360,h:180}},"sprites/ui/inv-slot":{frame:{x:70,y:186,w:56,h:56},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:56,h:56},sourceSize:{w:56,h:56}},"sprites/ui/arrow":{frame:{x:130,y:186,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/ui/panel-mask":{frame:{x:166,y:186,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/ui/panel":{frame:{x:202,y:186,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/ui/status-hp":{frame:{x:238,y:186,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/ui/inv-slot-arrow":{frame:{x:274,y:186,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-boots":{frame:{x:302,y:186,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-bow":{frame:{x:330,y:186,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-chestplate":{frame:{x:2,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-fire":{frame:{x:30,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-leggings":{frame:{x:58,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/arrow-compact":{frame:{x:232,y:222,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/ui/inv-slot-spear":{frame:{x:114,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-sword":{frame:{x:142,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-trash":{frame:{x:170,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/tab-enemy":{frame:{x:198,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/tab-anvil":{frame:{x:226,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/tab-alchemy":{frame:{x:254,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/inv-slot-solution":{frame:{x:282,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/ui/cauldron":{frame:{x:130,y:222,w:18,h:18},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:18,h:18},sourceSize:{w:18,h:18}},"sprites/ui/particle":{frame:{x:152,y:222,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/ui/indicator":{frame:{x:172,y:222,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/ui/button-pressed":{frame:{x:192,y:222,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/ui/button-normal":{frame:{x:212,y:222,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/ui/tab-workbench":{frame:{x:86,y:254,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}}}}},220:function(e,t,i){e.exports=i.p+"assets/c229e891deb9f6d9f1cf520062c124d3.png"},221:function(e){e.exports={meta:{image:"terrains.png",size:{w:100,h:80},scale:"1",hash:"cddf04393769582b42612ec64a83b17182979cee"},frames:{"sprites/terrains/grass-1":{frame:{x:22,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/sand-3":{frame:{x:2,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/grass-3":{frame:{x:2,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/ice":{frame:{x:22,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/lava":{frame:{x:42,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/mud":{frame:{x:42,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/sand-1":{frame:{x:2,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/sand-2":{frame:{x:22,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/water":{frame:{x:82,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/snow":{frame:{x:62,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/soil-1":{frame:{x:62,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/soil-2":{frame:{x:62,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/soil-3":{frame:{x:2,y:62,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/stone-1":{frame:{x:22,y:62,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/stone-2":{frame:{x:42,y:62,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/stone-3":{frame:{x:62,y:62,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/terrains/grass-2":{frame:{x:42,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}}}}},222:function(e,t,i){e.exports=i.p+"assets/e102be4e7a10df707aa4a623bb5d9ff1.png"},223:function(e){e.exports={meta:{image:"skeleton.png",size:{w:476,h:408},scale:"1",hash:"247af8049e316637b81c5140fc1711abc8dd5014"},frames:{"sprites/skeleton/down-0":{frame:{x:70,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-0":{frame:{x:2,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-2":{frame:{x:2,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-3":{frame:{x:70,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-4":{frame:{x:138,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-5":{frame:{x:138,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-6":{frame:{x:2,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-7":{frame:{x:70,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-8":{frame:{x:138,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-0":{frame:{x:206,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-1":{frame:{x:206,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-2":{frame:{x:206,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-3":{frame:{x:2,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-4":{frame:{x:70,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-5":{frame:{x:138,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-6":{frame:{x:206,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-7":{frame:{x:274,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/left-8":{frame:{x:274,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-8":{frame:{x:410,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-1":{frame:{x:274,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-2":{frame:{x:2,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-3":{frame:{x:70,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-4":{frame:{x:138,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-5":{frame:{x:206,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-6":{frame:{x:274,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-7":{frame:{x:342,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/right-8":{frame:{x:342,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/spawner":{frame:{x:342,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-0":{frame:{x:342,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-1":{frame:{x:342,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-2":{frame:{x:2,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-3":{frame:{x:70,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-4":{frame:{x:138,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-5":{frame:{x:206,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-6":{frame:{x:274,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/up-7":{frame:{x:342,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/skeleton/down-1":{frame:{x:274,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}}}},224:function(e,t,i){e.exports=i.p+"assets/07731d168a36a9866b70d85faa0d807e.png"},225:function(e){e.exports={meta:{image:"projectiles.png",size:{w:60,h:40},scale:"1",hash:"694753d8b5ffe39cfae6144556a1be2bc35aa6ae"},frames:{"sprites/projectiles/arrow":{frame:{x:2,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/projectiles/bolt":{frame:{x:22,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/projectiles/invisible":{frame:{x:2,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/projectiles/orb":{frame:{x:22,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/projectiles/spear":{frame:{x:42,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/projectiles/sword":{frame:{x:42,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}}}}},226:function(e,t,i){e.exports=i.p+"assets/8caa79760b88108cfa33ab29e21f0711.png"},227:function(e){e.exports={meta:{image:"player.png",size:{w:884,h:884},scale:"1",hash:"09cf4c58581eba81b69da7a228d1f7386caf5e3d"},frames:{"sprites/player/arrow-down-0":{frame:{x:70,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-1":{frame:{x:2,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-10":{frame:{x:2,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-11":{frame:{x:70,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-2":{frame:{x:138,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-3":{frame:{x:138,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-4":{frame:{x:2,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-5":{frame:{x:70,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-6":{frame:{x:138,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-7":{frame:{x:206,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-8":{frame:{x:206,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-9":{frame:{x:206,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-0":{frame:{x:2,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-1":{frame:{x:70,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-10":{frame:{x:138,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-11":{frame:{x:206,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-2":{frame:{x:274,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-3":{frame:{x:274,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-4":{frame:{x:274,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-5":{frame:{x:274,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-6":{frame:{x:2,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-7":{frame:{x:70,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-8":{frame:{x:138,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-left-9":{frame:{x:206,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-0":{frame:{x:274,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-1":{frame:{x:342,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-10":{frame:{x:342,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-11":{frame:{x:342,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-2":{frame:{x:342,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-3":{frame:{x:342,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-4":{frame:{x:2,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-5":{frame:{x:70,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-6":{frame:{x:138,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-7":{frame:{x:206,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-8":{frame:{x:274,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-right-9":{frame:{x:342,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-0":{frame:{x:410,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-1":{frame:{x:410,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-10":{frame:{x:410,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-11":{frame:{x:410,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-2":{frame:{x:410,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-3":{frame:{x:410,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-4":{frame:{x:2,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-5":{frame:{x:70,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-6":{frame:{x:138,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-7":{frame:{x:206,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-8":{frame:{x:274,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-up-9":{frame:{x:342,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-0":{frame:{x:410,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-1":{frame:{x:478,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-2":{frame:{x:478,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-3":{frame:{x:478,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-4":{frame:{x:478,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-5":{frame:{x:478,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-6":{frame:{x:478,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-7":{frame:{x:478,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/down-8":{frame:{x:2,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-0":{frame:{x:70,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-1":{frame:{x:138,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-2":{frame:{x:206,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-3":{frame:{x:274,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-4":{frame:{x:342,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-down-5":{frame:{x:410,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-0":{frame:{x:478,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-1":{frame:{x:546,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-2":{frame:{x:546,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-3":{frame:{x:546,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-4":{frame:{x:546,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-left-5":{frame:{x:546,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-0":{frame:{x:546,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-1":{frame:{x:546,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-2":{frame:{x:546,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-3":{frame:{x:2,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-4":{frame:{x:70,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-right-5":{frame:{x:138,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-0":{frame:{x:206,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-1":{frame:{x:274,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-2":{frame:{x:342,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-3":{frame:{x:410,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-4":{frame:{x:478,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/fist-up-5":{frame:{x:546,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-0":{frame:{x:614,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-8":{frame:{x:478,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-2":{frame:{x:614,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-3":{frame:{x:614,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-4":{frame:{x:614,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-5":{frame:{x:614,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-6":{frame:{x:614,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-7":{frame:{x:614,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/left-8":{frame:{x:614,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-0":{frame:{x:2,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-1":{frame:{x:70,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-2":{frame:{x:138,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-3":{frame:{x:206,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-4":{frame:{x:274,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-5":{frame:{x:342,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-6":{frame:{x:410,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-7":{frame:{x:478,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/right-8":{frame:{x:546,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-0":{frame:{x:614,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-1":{frame:{x:682,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-2":{frame:{x:682,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-3":{frame:{x:682,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-4":{frame:{x:682,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-5":{frame:{x:682,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-6":{frame:{x:682,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-down-7":{frame:{x:682,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-0":{frame:{x:682,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-1":{frame:{x:682,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-2":{frame:{x:682,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-3":{frame:{x:2,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-4":{frame:{x:70,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-5":{frame:{x:138,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-6":{frame:{x:206,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-left-7":{frame:{x:274,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-0":{frame:{x:342,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-1":{frame:{x:410,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-2":{frame:{x:478,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-3":{frame:{x:546,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-4":{frame:{x:614,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-5":{frame:{x:682,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-6":{frame:{x:750,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-right-7":{frame:{x:750,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-0":{frame:{x:750,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-1":{frame:{x:750,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-2":{frame:{x:750,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-3":{frame:{x:750,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-4":{frame:{x:750,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-5":{frame:{x:750,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-6":{frame:{x:750,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/spear-up-7":{frame:{x:750,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-0":{frame:{x:750,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-1":{frame:{x:2,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-2":{frame:{x:70,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-3":{frame:{x:138,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-4":{frame:{x:206,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-down-5":{frame:{x:274,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-0":{frame:{x:342,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-1":{frame:{x:410,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-2":{frame:{x:478,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-3":{frame:{x:546,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-4":{frame:{x:614,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-left-5":{frame:{x:682,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-0":{frame:{x:750,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-1":{frame:{x:818,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-2":{frame:{x:818,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-3":{frame:{x:818,y:138,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-4":{frame:{x:818,y:206,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-right-5":{frame:{x:818,y:274,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-0":{frame:{x:818,y:342,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-1":{frame:{x:818,y:410,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-2":{frame:{x:818,y:478,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-3":{frame:{x:818,y:546,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-4":{frame:{x:818,y:614,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/sword-up-5":{frame:{x:818,y:682,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-0":{frame:{x:818,y:750,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-1":{frame:{x:2,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-2":{frame:{x:70,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-3":{frame:{x:138,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-4":{frame:{x:206,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-5":{frame:{x:274,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-6":{frame:{x:342,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/up-7":{frame:{x:410,y:818,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}},"sprites/player/arrow-down-1":{frame:{x:614,y:70,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}}}},228:function(e,t,i){e.exports=i.p+"assets/14ee55c8b4b8c8dfb49322478df2f5a2.png"},229:function(e){e.exports={meta:{image:"placeholder.png",size:{w:20,h:20},scale:"1",hash:"4100ad0becb2f0741421e7baced474662f01332b"},frames:{"sprites/placeholder/square":{frame:{x:2,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}}}}},230:function(e,t,i){e.exports=i.p+"assets/cbecab81f1f8884a561e500b807c5d7d.png"},231:function(e){e.exports={meta:{image:"objects.png",size:{w:216,h:180},scale:"1",hash:"97ef076ba12449d85e0c511847ac77e48d0cf031"},frames:{"sprites/objects/berrybush-berries":{frame:{x:38,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-stem-1":{frame:{x:2,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/bones":{frame:{x:2,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/bush":{frame:{x:38,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/cactus":{frame:{x:74,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/cross":{frame:{x:74,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/fern-1":{frame:{x:2,y:74,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/fern-2":{frame:{x:38,y:74,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/fern-3":{frame:{x:74,y:74,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-petal-1":{frame:{x:110,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-petal-2":{frame:{x:110,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-petal-3":{frame:{x:110,y:74,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-petal-4":{frame:{x:2,y:110,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/tree-spruce":{frame:{x:182,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-stem-2":{frame:{x:74,y:110,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-stem-3":{frame:{x:110,y:110,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/flower-stem-4":{frame:{x:146,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/pillar-1":{frame:{x:146,y:38,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/pillar-2":{frame:{x:146,y:74,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/pillar-3":{frame:{x:146,y:110,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/rocks-1":{frame:{x:2,y:146,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/rocks-2":{frame:{x:38,y:146,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/rocks-3":{frame:{x:74,y:146,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/stone":{frame:{x:110,y:146,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/tree-coco":{frame:{x:146,y:146,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/tree-oak":{frame:{x:182,y:2,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"sprites/objects/berrybush-bush":{frame:{x:38,y:110,w:32,h:32},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}}}},232:function(e,t,i){e.exports=i.p+"assets/80d16f4a37bafae97d6525bd52105580.png"},233:function(e){e.exports={meta:{image:"items.png",size:{w:196,h:168},scale:"1",hash:"d9130ab1c7d83f16ed6cd0a61db5616d106c13a4"},frames:{"sprites/items/arrow-fletch":{frame:{x:30,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-petal-4":{frame:{x:2,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/arrow":{frame:{x:2,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/berries-1":{frame:{x:30,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/berries-2":{frame:{x:58,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/berries-3":{frame:{x:58,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/berries-4":{frame:{x:2,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/bone":{frame:{x:30,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/boots-right":{frame:{x:58,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/boots":{frame:{x:86,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/bow-string":{frame:{x:86,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/bow":{frame:{x:86,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/chestplate-belt":{frame:{x:2,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/chestplate-left":{frame:{x:30,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/chestplate-right":{frame:{x:58,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/chestplate":{frame:{x:86,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/dust":{frame:{x:114,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/fang":{frame:{x:114,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-petal-1":{frame:{x:114,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-petal-2":{frame:{x:114,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-petal-3":{frame:{x:2,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/wood":{frame:{x:170,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-stem-1":{frame:{x:58,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-stem-2":{frame:{x:86,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-stem-3":{frame:{x:114,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/flower-stem-4":{frame:{x:142,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/gel":{frame:{x:142,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/leaf":{frame:{x:142,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/leggings-left":{frame:{x:142,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/leggings-right":{frame:{x:142,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/leggings":{frame:{x:2,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/rod":{frame:{x:30,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/scale":{frame:{x:58,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/skin":{frame:{x:86,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/solution-overlay":{frame:{x:114,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/solution":{frame:{x:142,y:142,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/spear-head":{frame:{x:170,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/spear":{frame:{x:170,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/stone":{frame:{x:170,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/sword-blade":{frame:{x:170,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/sword":{frame:{x:170,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/items/arrow-head":{frame:{x:30,y:114,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}}}}},234:function(e,t,i){e.exports=i.p+"assets/b30d95b19a67c96aa17f568568cc3bea.png"},235:function(e){e.exports={meta:{image:"equipment.png",size:{w:140,h:112},scale:"1",hash:"1dc7c10ccf789b2073e228404485f80c51c63081"},frames:{"sprites/equipment/arrow-fletch":{frame:{x:30,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/chestplate-left":{frame:{x:2,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/arrow-shaft":{frame:{x:2,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/boots-left":{frame:{x:30,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/boots-right":{frame:{x:58,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/bow-limb":{frame:{x:58,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/bow-string":{frame:{x:2,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/chestplate-belt":{frame:{x:30,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/chestplate-bottom":{frame:{x:58,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/sword-hilt":{frame:{x:114,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/chestplate-right":{frame:{x:86,y:30,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/leggings-left":{frame:{x:86,y:58,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/leggings-right":{frame:{x:2,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/leggings-top":{frame:{x:30,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/spear-head":{frame:{x:58,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/spear-shaft":{frame:{x:86,y:86,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/sword-blade":{frame:{x:114,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}},"sprites/equipment/arrow-head":{frame:{x:86,y:2,w:24,h:24},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:24},sourceSize:{w:24,h:24}}}}},236:function(e,t,i){e.exports=i.p+"assets/ec95783fec56e1e2460c4f37ad99afa0.png"},237:function(e){e.exports={meta:{image:"effects.png",size:{w:60,h:60},scale:"1",hash:"3cdbd0800fb42987c2a94b3b09ddbe030f3f6c21"},frames:{"sprites/effects/def-break":{frame:{x:2,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/poison":{frame:{x:22,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/regen":{frame:{x:2,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/resistance":{frame:{x:22,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/slowness":{frame:{x:42,y:2,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/speed":{frame:{x:42,y:22,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/strength":{frame:{x:2,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}},"sprites/effects/weakness":{frame:{x:22,y:42,w:16,h:16},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:16,h:16},sourceSize:{w:16,h:16}}}}},238:function(e,t,i){e.exports=i.p+"assets/cd77bfe99eaf472b92eeb4aedfadc9ef.png"},239:function(e){e.exports={meta:{image:"dragons.png",size:{w:208,h:140},scale:"1",hash:"913507f469df36c7256a337e11abf4d3e1db9b10"},frames:{"sprites/dragons/left-0":{frame:{x:2,y:2,w:66,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:66,h:66},sourceSize:{w:66,h:66}},"sprites/dragons/left-1":{frame:{x:72,y:2,w:66,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:66,h:66},sourceSize:{w:66,h:66}},"sprites/dragons/right-0":{frame:{x:2,y:72,w:66,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:66,h:66},sourceSize:{w:66,h:66}},"sprites/dragons/right-1":{frame:{x:72,y:72,w:66,h:66},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:66,h:66},sourceSize:{w:66,h:66}},"sprites/dragons/egg":{frame:{x:142,y:2,w:64,h:64},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:64,h:64},sourceSize:{w:64,h:64}}}}},240:function(e,t,i){var s={"./fonts/Unibody8Pro-Bold.otf":186,"./fonts/Unibody8Pro-Regular.otf":187,"./fonts/Unibody8Pro-RegularItalic.otf":185,"./fonts/unscii-16.woff":184,"./sprites/dragons.json":239,"./sprites/dragons.png":238,"./sprites/effects.json":237,"./sprites/effects.png":236,"./sprites/equipment.json":235,"./sprites/equipment.png":234,"./sprites/items.json":233,"./sprites/items.png":232,"./sprites/objects.json":231,"./sprites/objects.png":230,"./sprites/placeholder.json":229,"./sprites/placeholder.png":228,"./sprites/player.json":227,"./sprites/player.png":226,"./sprites/projectiles.json":225,"./sprites/projectiles.png":224,"./sprites/skeleton.json":223,"./sprites/skeleton.png":222,"./sprites/terrains.json":221,"./sprites/terrains.png":220,"./sprites/ui.json":219,"./sprites/ui.png":218};function a(e){var t=r(e);return i(t)}function r(e){var t=s[e];if(!(t+1)){var i=new Error('Cannot find module "'+e+'".');throw i.code="MODULE_NOT_FOUND",i}return t}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=240},241:function(e,t,i){(e.exports=i(72)(!1)).push([e.i,".console {\n  z-index: 10;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  pointer-events: none;\n  visibility: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.console *::selection {\n  background: rgba(0, 0, 0, 0.25);\n}\n\n.console.active {\n  visibility: visible;\n}\n\n.console * {\n  cursor: default;\n  font-family: Unscii;\n  font-size: 32px;\n  box-sizing: border-box;\n}\n\n.con-log-box {\n  flex: 1;\n  position: relative;\n}\n\n.con-log-scroll {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n\n  background: rgba(255, 255, 255, 0.6);\n  width: 850px;\n  max-height: 800px;\n  pointer-events: auto;\n\n  overflow-y: auto;\n}\n\n.con-log {\n  padding: 4px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.con-log:empty {\n  padding: 0;\n}\n\n.con-log-entry {\n  display: block;\n  padding: 4px;\n  color: #000000;\n  white-space: pre;\n}\n\n.con-input {\n  height: 64px;\n  width: 100%;\n\n  background: rgba(255, 255, 255, 0.6);\n  color: #000000;\n  outline: none;\n  border: none;\n  border-top: 1px solid #202020;\n  padding: 16px;\n  pointer-events: auto;\n}",""])},242:function(e,t,i){var s=i(241);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(71)(s,a);s.locals&&(e.exports=s.locals)},3:function(e,t,i){"use strict";var s;function a(e,t,i=!0){return{name:e,description:t,visible:i}}i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r}),function(e){let t;!function(e){e.Stunned="stunned",e.Knockback="knockback",e.KnockbackResist="knockback-resist",e.Heal="heal",e.Damage="damage",e.Regen="regen",e.Poison="poison",e.Strength="strength",e.Weakness="weakness",e.Resistance="resistance",e.DefBreak="def-break",e.Speed="speed",e.Slowness="slowness",e.VitalityUp="vit-up",e.VitalityDown="vit-down"}(t=e.Type||(e.Type={}))}(s||(s={}));const r={[s.Type.Stunned]:a("Stunned","Cannot move or attack",!1),[s.Type.Knockback]:a("Knockback","Cannot move",!1),[s.Type.KnockbackResist]:a("Knockback Resistance","Resist knockback",!1),[s.Type.Heal]:a("Heal","Recover <power> HP",!1),[s.Type.Damage]:a("Damage","Damage <power> HP",!1),[s.Type.Regen]:a("Regeneration","Recover <power> HP regularly"),[s.Type.Poison]:a("Poison","Lose <power> HP regularly"),[s.Type.Strength]:a("Strength","Increase strength by <power>"),[s.Type.Weakness]:a("Weakness","Decrease strength by <power>"),[s.Type.Resistance]:a("Resistance","Increase defense by <power>"),[s.Type.DefBreak]:a("Defense Break","Decrease defense by <power>"),[s.Type.Speed]:a("Speed","Increase speed by <power>"),[s.Type.Slowness]:a("Slowness","Decrease speed by <power>"),[s.Type.VitalityUp]:a("Vitality Up","Increase vitality by <power>"),[s.Type.VitalityDown]:a("Vitality Down","Decrease vitality by <power>")}},30:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i(5),a=i(3),r=i(4);function o(e,t,i){switch(e){case r.a.Type.Life:case r.a.Type.Recovery:{let o=100*t;e===r.a.Type.Life&&(o*=.5);let n=0;return i[r.a.Type.Time]>.5*t?(o=o/(n=3e4*i[r.a.Type.Time])*1500,Object(s.b)(a.a.Type.Regen,o,n)):Object(s.b)(a.a.Type.Heal,o,0)}case r.a.Type.Void:case r.a.Type.Injury:{let o=50*t;e===r.a.Type.Void&&(o*=.3);let n=0;return i[r.a.Type.Time]>.5*t?(o=o/(n=2e4*i[r.a.Type.Time])*1500,Object(s.b)(a.a.Type.Poison,o,n)):Object(s.b)(a.a.Type.Damage,o,0)}case r.a.Type.Defense:{let e=50*t;return i[r.a.Type.Void]>.5*t?Object(s.b)(a.a.Type.DefBreak,e,1e4):Object(s.b)(a.a.Type.Resistance,e,1e4)}case r.a.Type.Motion:{let e=50*t;return Object(s.b)(a.a.Type.Speed,e,1e4)}case r.a.Type.Frost:case r.a.Type.Capture:{let i=50*t;return e===r.a.Type.Capture&&(i*=1.5),Object(s.b)(a.a.Type.Slowness,i,1e4)}case r.a.Type.Energy:{let e=25*t;return Object(s.b)(a.a.Type.Strength,e,1e4)}case r.a.Type.Weakness:{let e=25*t;return Object(s.b)(a.a.Type.Weakness,e,1e4)}}}function n(e){return Object(s.a)(e,o)}},368:function(e,t,i){var s=i(367);(e.exports=i(72)(!1)).push([e.i,'html,\nbody {\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  background: #202020;\n  overflow: hidden;\n}\n\n.vex * {\n  font-family: Unscii !important;\n  font-weight: bold !important;\n  font-size: 16px !important;\n}\n\ncanvas {\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n}\n\n@font-face {\n  font-family: "Unibody8Pro";\n  src: url('+s(i(187))+') format("opentype")\n}\n\n@font-face {\n  font-family: "Unibody8Pro";\n  font-weight: bold;\n  src: url('+s(i(186))+') format("opentype")\n}\n\n@font-face {\n  font-family: "Unibody8Pro";\n  font-style: italic;\n  src: url('+s(i(185))+') format("opentype")\n}\n\n@font-face {\n  font-family: "Unscii";\n  font-weight: bold;\n  src: url('+s(i(184))+') format("woff")\n}',""])},369:function(e,t,i){var s=i(368);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(71)(s,a);s.locals&&(e.exports=s.locals)},4:function(e,t,i){"use strict";var s;function a(e,t,i){return{tier:e,name:t,composition:i}}i.d(t,"a",function(){return s}),i.d(t,"c",function(){return r}),i.d(t,"b",function(){return o}),function(e){let t;e.MaxTier=3,function(e){e.Fire="Fire",e.Water="Water",e.Order="Order",e.Chaos="Chaos",e.Void="Void",e.Light="Light",e.Energy="Energy",e.Frost="Frost",e.Motion="Motion",e.Life="Life",e.Defense="Defense",e.Recovery="Recovery",e.Time="Time",e.Explosion="Explosion",e.Injury="Injury",e.Darkness="Darkness",e.Weakness="Weakness",e.Spirit="Spirit",e.Capture="Capture",e.Sense="Sense",e.Absorption="Absorption",e.Cognition="Cognition",e.Deception="Deception"}(t=e.Type||(e.Type={}))}(s||(s={}));const r=[a(0,s.Type.Fire),a(0,s.Type.Water),a(0,s.Type.Order),a(0,s.Type.Chaos),a(1,s.Type.Void,[s.Type.Fire,s.Type.Water]),a(1,s.Type.Light,[s.Type.Fire,s.Type.Order]),a(1,s.Type.Energy,[s.Type.Fire,s.Type.Chaos]),a(1,s.Type.Frost,[s.Type.Water,s.Type.Order]),a(1,s.Type.Motion,[s.Type.Water,s.Type.Chaos]),a(1,s.Type.Life,[s.Type.Order,s.Type.Chaos]),a(2,s.Type.Defense,[s.Type.Order,s.Type.Void]),a(2,s.Type.Recovery,[s.Type.Order,s.Type.Life]),a(2,s.Type.Time,[s.Type.Order,s.Type.Motion]),a(2,s.Type.Explosion,[s.Type.Chaos,s.Type.Energy]),a(2,s.Type.Injury,[s.Type.Chaos,s.Type.Life]),a(2,s.Type.Darkness,[s.Type.Void,s.Type.Light]),a(2,s.Type.Weakness,[s.Type.Void,s.Type.Energy]),a(2,s.Type.Spirit,[s.Type.Energy,s.Type.Life]),a(2,s.Type.Capture,[s.Type.Frost,s.Type.Motion]),a(3,s.Type.Sense,[s.Type.Motion,s.Type.Spirit]),a(3,s.Type.Absorption,[s.Type.Recovery,s.Type.Spirit]),a(3,s.Type.Cognition,[s.Type.Time,s.Type.Spirit]),a(3,s.Type.Deception,[s.Type.Weakness,s.Type.Spirit])],o=Object.assign({},...r.map(e=>({[e.name]:e})))},41:function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return o});var s=i(55),a=i(10);function r(e){const t=[0,0,0];let i=0;for(const{color:s,weight:a}of e){const e=s,r=a||1;t[0]+=(e>>16&255)*r,t[1]+=(e>>8&255)*r,t[2]+=(e>>0&255)*r,i+=r}return(Math.floor(t[0]/i)<<16)+(Math.floor(t[1]/i)<<8)+(Math.floor(t[2]/i)<<0)}function o(e,t,i=Math.random){const r=360*i(),o=100*Object(a.c)(e,i),n=100*Object(a.c)(t,i);return Object(s.lch)(o,n,r).hex().substr(1)}},5:function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"b",function(){return h}),i.d(t,"a",function(){return l});var s=i(15),a=i(3),r=i(204),o=i(203);function n(e,t){return e.map(({element:e,amount:i})=>({element:e,amount:i*t}))}function h(e,t,i,s){return t=Math.round(t),i=Object(r.a)(i,-2),{type:e,name:a.b[e].name,description:a.b[e].description.replace("<power>",t.toString())+(i?` for ${Object(r.a)(i/1e3)} seconds`:""),power:t,element:s,duration:i}}const c=.1;function l(e,t,i=c){let a=0;for(const{amount:t}of e)a+=t;const r=Object(o.a)(e.map(({element:e,amount:t})=>[e,function(e,t){return e/t*Math.pow(e/s.a,.75)}(t,a)]).sort((e,t)=>t[1]-e[1])),n=[];for(const e of Object.keys(r)){const s=r[e];if(s<i)continue;const a=t(e,s,r);a&&n.push(a)}return n}},54:function(e,t,i){"use strict";
/**
@license Foswig.js | (c) Glenn Conner. | https://github.com/mrsharpoblunto/foswig.js/blob/master/LICENSE
*/class s{constructor(e){this.character=e,this.neighbors=[]}}class a{constructor(){this.children={}}}function r(e,t){e=e.toLowerCase();for(var i=t,s=0;s<e.length;++s){var a=i.children[e[s]];if(!a)return!1;i=a}return!0}var o=i(59);i.d(t,"a",function(){return h});const n=new class{constructor(e){this.order=e,this.duplicates=new a,this.start=new s(""),this.map={}}addWordsToChain(e){for(var t=0;t<e.length;++t)this.addWordToChain(e[t])}addWordToChain(e){!function e(t,i){t.length>1&&e(t.substr(1),i);for(var s=i,r=0;r<t.length;++r){var o=s.children[t[r]];o||(o=new a,s.children[t[r]]=o),s=o}}(e.toLowerCase(),this.duplicates);for(var t=this.start,i="",r=0;r<e.length;++r){var o=e[r];(i+=o).length>this.order&&(i=i.substr(1));var n=this.map[i];n||(n=new s(o),this.map[i]=n),t.neighbors.push(n),t=n}t.neighbors.push(null)}generateWord(e=0,t=-1,i=!0,s=25,a=Math.random){var o,n,h=0;do{n=!1;var c=Math.floor(a()*this.start.neighbors.length),l=this.start.neighbors[c];for(o="";l&&(t<0||o.length<=t);)o+=l.character,c=Math.floor(a()*l.neighbors.length),l=l.neighbors[c];(o.length>t||o.length<e)&&(n=!0)}while(n||!i&&++h<s&&r(o,this.duplicates));if(h>=s)throw new Error("Unable to generate a word with the given parameters after "+h+" attempts");return o}}(3);function h(e,t,i=Math.random){return Object(o.a)(n.generateWord(e,t,!1,void 0,i))}n.addWordsToChain(["abachi","abacops","abashicus","abensis","abetoneensis","aboriscus","abrictos","abroscelis","abrotocrinus","absalomichthys","abundum","acalophaena","acanthocladi","acanthofemurilis","acceia","accusator","aceroae","achaeae","achillae","achtyca","acinopterus","acmeceps","acmonia","acochlidioida","acompus","acrasidae","acroceuthes","acropsis","actaeifolium","actileuca","actinocalyx","actinodontidae","actinodurae","acugni","acunae","acutipoditus","acutiscutellum","acutispinata","adilophontes","adornatalis","adramitana","advarians","aedoea","aemulatrix","aeneocupreus","aequiflexa","aequilumata","aericeps","aerophilum","aeroppia","aeschynomene","aethiopicodynerus","aethodelphax","aetosaurinae","affaber","afghanistanicum","afreutreta","afrobolivina","afrogypsa","afrojavanica","afroscardia","afrotremex","agamarum","aganacma","aganipus","agardhina","agaricostilbales","agastor","agnina","agnostos","agolambrus","agonismus","agrabeeja","agraptocoris","aguanueva","aguaytiella","aguirreanus","ahermodontus","ahldreva","ajubensis","akaisialpina","alakoliense","alantika","alarodia","albifulgens","albitarsus","albius","albocitrina","albocitrinus","albogriseella","albolabratus","aleata","alecanopsis","aleophilum","aleuti","algrizea","alibertioides","alitaeus","allantois","allarithmus","alleocomatella","allineata","allolaterita","allomorphinoides","allotheca","alloxacis","almogaver","alocypha","alpigenes","alsinastrum","alsobacter","alternicirrus","alternimaculata","altescandens","altistrix","alutellus","alvariella","alyeskaensis","amamiconcha","amantichitinum","amaris","amarygia","amathimysis","amazonicesa","ambita","ambovestita","americorophium","ametroides","amidalae","amideta","amisadaiae","ammobium","amoebophryaceae","ampelioides","ampelopsisella","amphiascus","amphiheloides","ampliator","amplicolle","amyntula","amyris","anafense","anagastus","anancosorius","anaperidae","anargyrtes","anarsiae","anathyrsa","anatotitan","anchises","ancistrifolia","ancistrocladus","ancylostomia","ancylus","ancystropodium","anderisus","andocidia","andranotobakensis","anendopodia","anepsirhizomys","aneuvittata","angraecinae","angusticincta","angusticlavius","angustilamella","angustimembranus","angustiplatus","anheteromeyenia","anillochlamys","anischiinae","anisopaulax","ankarapithecus","ankaratrotrox","ankylodon","annaimallaiensis","anodontophora","anodorhynchus","anonera","anorhaebus","antarxata","antelientomon","antennulata","anteos","anteridata","anthepiscopus","anthicimorphus","antibodies","antiincrescens","antillanorchis","antipoloensis","antistydatusa","anurophylla","anxioides","anydrophilini","anyllis","aonidiae","apaloxylon","apameina","apanthuropsis","apechthes","aphaenogasteroides","aphiocephalus","apicealba","apicinigrella","apicobystra","apinae","apiocystinae","aplysinellidae","apocarpum","apogonis","apomastus","aponius","aposteira","apparicianum","apparitrix","appressihirtus","apricans","apsilinae","apteralium","apterobrachys","apterygodonia","apterygon","aqualupianus","aquinia","arabesca","arachoides","araracuarae","aravanense","arawakorum","arceuthoides","archangelskii","archeosetus","archichthys","archicnephasia","archiphysa","architectonicacea","archocelis","archolabus","arcidopsis","arcifera","arctopacifica","ardeola","ardesia","arduous","arenonionella","argentae","argopus","argusmontana","argutana","argyrothrix","ariantinae","arigonis","arilaringa","ariphanarthra","aristeis","aristosquamosa","arkarua","armoracioides","arnoldi","arrawarricum","arrhythmopis","artaversala","artemisifolium","artericus","artodiscus","artoventris","artumbilicatum","arturoana","arutunjani","aselliata","asestra","ashlaiana","aspenitinae","aspidophryxus","aspidopora","asprospilos","assimulatana","asterosporiaceae","astrapetes","astraspida","asturasoma","asymmetrarcha","asymmetrurus","ateleopodidae","atilia","atractosteus","atraphaxifolius","atringa","atrivaria","atroclypeata","atroviridaria","attenata","atypicalis","atypicus","audeti","audreia","aulacoceras","aulorhynchidae","aulosaphoides","aurataeformis","aurearenaceae","aurilineata","aussiorum","australiphemeridae","australodaphnia","australosphenida","austrinata","austroagrion","austrohormiini","austrokarelicus","autarchoglossa","avarus","avelingiae","avuncula","axnpelopsis","azotostoma","babaensis","baborensis","babukellinae","bacarum","backusella","badiifolia","badiusalis","baehnii","baeoptila","baeosomus","baeotica","baicalinella","baiochii","bakeri","balanarcha","balchhi","balingiti","baliogaster","balliana","baltimoriana","balvei","bambusioides","bamiani","bampurius","bancroftianus","bankoi","baracoalis","barattolites","barbeliana","barbillana","bareinus","barksdalei","barnebianum","baroringensis","barsac","barsakelmes","barskovi","basibulbus","basilisi","basipecten","basipterini","basirei","bastardoanus","bathrogramma","bathycranium","batocaulon","batomys","beatleyae","beaumontianus","bebile","bedeshai","bedfordianus","beharii","beketi","bellera","bellicula","beloti","benacoceras","beneluzi","benignalis","bergenhayni","berlandiella","berlesedesmus","berlinafricanus","bermudagidiella","bernalei","bertarollae","bethelium","betonicifolium","betschi","betsiloensis","biapertura","bibbia","bibiolona","biblianum","bibractella","bicelli","biceropsis","bicophaga","bicornuatus","bicucullus","bidenticeps","bidentulum","bidiense","bidiscus","bifidentata","biincisa","bilirana","biloborostratus","bilsana","bimucronota","biobessa","biparta","bipartipes","biramulata","biritika","birnovensis","biruncinata","bisbimaculata","bismila","bispirale","bissexnotata","bistrigata","biuterinus","blaesodactylus","blakesleeanus","blaseii","blattinopsidae","bleura","bocasdeltoroensis","bodmeri","boingaei","bojamyces","bokariana","bolivaria","bolodon","bolsaticus","bombacoideae","bombella","bonaducecytheridae","bonaia","bononiensis","bonplandius","bonseyi","bonzia","boopsis","borderii","borealia","borealotodus","boreococcus","boripat","borneichus","bornesalpinia","bosmani","bosniaca","bosniscus","bothriospermum","bouchardii","bourgeana","bouvetia","brachylaminata","brachyloma","brachyneuroides","brachyosoma","brachypezoides","brachypharyngeus","bracteantha","bracteolaris","bradburya","bradys","brancaefolia","brasileanus","brassica","brassicata","brausei","brevibeccus","brevicoccus","brevidens","brevilamellata","brevipatellatus","brevipilus","breviscopa","brevispineus","brillanceausuchidae","brissonii","brochopaga","brongniardellus","brossardia","broughi","brownelli","brujitavirus","brunneicollis","brunneopunctata","brunneotomentosa","brunnibasis","brusinia","bryonioides","bubonifolium","bubulla","bucaniellidae","buchholzianum","buchubergense","bucina","bucinaria","buckara","bucolinus","buddleiifolius","buekkense","bulimorpha","bulleri","buriasense","bursalobata","burukovskii","butalidella","buttelreepeni","butyraceum","buxella","bwambae","byctisculus","cacatuopyga","cactaceae","cadetiiflorum","caeluronigricans","caeruleonotatus","caesariana","cailloli","calamosternus","calapodium","calcedoniae","calcehtokanus","calceolariopsis","calculata","calhypnorna","caliginum","calilestes","callacallanum","callichthyinae","callidrepana","calligetus","callinivalis","callitricha","calloplesiops","callosphingia","calodectes","calogramma","calonalis","calotemognatha","calvulum","calyptophyllum","calyptosuchus","camaronensis","cambaroides","camdenensis","camelaria","camellia","camerobia","cameroon","campanopsis","camptochaeta","camptozada","canalicata","cancanae","cancerae","candybus","caniripes","cantiana","capillataspora","capnobotes","capsae","capsaspora","caputabnormis","capysoides","caracasica","carbina","carcani","cardiopygus","cardonii","carduiforis","cardwellia","carettalis","caricae","carinifer","carinulorbis","carlopeltis","carlosfeliui","carmara","carnifrons","caroli","carpodeti","carria","carrii","carrizalense","cartalloides","carteretensis","carthagoensis","caryonodini","cassubiciformis","castanes","castensis","castilliaria","catantopsilus","catapionus","cataplectica","cataspilates","catenata","catops","catopysops","caucasicola","caucasicus","caudapinniger","caudatispora","caudifolium","caulokaempferia","cavadoensis","cavalerieana","cavedanus","caviunas","cebudonus","cecidostiba","cecidothyris","cecropioides","celeripes","cellariiforme","cemiostominae","centenaria","centicola","centrimacula","centrirufa","centroonoceras","centropristis","centrovarioplanidae","cephali","ceradocus","ceratinostoma","ceratoclada","ceratosebacina","cerbvina","cerchysiella","cercomorphus","cercopionidae","ceriaeforme","cerozona","cerrioides","cestrus","cetibeli","cetratus","ceylonensis","chabriosoma","chaetostephanidae","chaetozone","chalarocladum","chalcocnemis","chalybe","chamaepeuce","chamelaensis","chamisis","charadropsyche","charamaensis","charapensis","chariesthes","charlei","charleswerneri","charmus","chasmagnathus","chauliopleurus","chelon","chelyoidea","chelysida","chernyshinellinae","chetyson","chihpenensis","chihuahuanae","chilesi","chillanensis","chillcottiana","chilognatha","chilophus","chilostomella","chilostomellina","chionothrix","chirieanum","chiroderma","chirophylla","chisochetonia","chisternon","chlerogella","chloraeformis","chloraria","chlorocurtis","choerognathus","chommati","chondrolepis","chondrorhynchus","chorodoxa","chrestobunus","chromelosporium","chromocentrum","chronosemium","chrysma","chrysocelis","chrysochaetum","chrysomeloides","chrysomus","chrysonus","chrysopotama","chuangchihi","chyrmangensis","cicadellopsis","cicatricosulus","cinachyrella","cinereovariegatus","cinnyris","cintaromorpha","circassian","circumflexum","citharexifolia","cladiellae","cladophila","cladoscenium","clamans","clararia","claricolor","clarilimbata","clarimargo","clavaeforme","clavidives","cleghornia","cleonolithus","clethropsis","clinacanthus","clinomochla","cliochloria","clivina","clorindae","clymenicola","clypeinitens","clyton","cnemodes","coagerus","coamensis","cobreensis","coburni","cocalina","coccocephalichthys","coccomyxa","cochabambina","cochleasvorax","codioides","codites","coelositona","coelostomidiidae","coeruleata","coeruleofuscus","coerulipennis","cognatocompressus","coihuensis","coldeniae","colensoica","coleocacamus","coleocanis","coleophorinae","colerolumnus","colita","collarigera","collartinus","collativus","collectiva","collinsonae","colocleora","colomai","colopha","colorada","coloradus","colpotriplicis","colynis","comani","comarilis","commonae","comocephalum","comoliopsis","companyoi","compotrix","compsogene","concanicus","concarenae","condate","conexibacter","confertiserratum","conflata","congrogadus","conicella","conicibaccata","conicospermium","coniocera","conlara","conobrosis","conoclinium","consanguinea","conspectus","constrictatus","contacris","contentious","contristans","conyzicola","coocoo","coonorensis","cooperrideri","coorilla","copidoplana","copromorpha","coprosmifolia","coptotomus","copturus","coracina","coraeophos","corallicarpus","corallicola","coraniana","coritanica","coronostylus","corpesiensis","correctata","corrivalis","corroboreethrips","corticicolus","corupella","corussans","corymbuloides","coryneaceae","coryphophylax","cosmemosignatum","cossmannica","costosyrnola","cotanda","cotinaea","couleruana","cousiniopsis","coutume","coventinae","coxitinae","crangonoides","craniella","crassepupillata","crassesignata","crassidens","crassoascus","crastina","craterantha","craterelloides","craterocephala","cratocechenus","crebrifolius","crenoliratus","cribripuga","criconemoides","cricophera","crinonia","crisae","cristatoides","cristinae","critheus","crocogastra","crocomela","cronartiaceae","crotolitha","crouzeti","crowelli","cruentipellis","cruranthura","crypsicola","cryptarthria","cryptocystidiatum","cryptolimifrons","cryptopecten","cryptophasa","cryptophlebiae","cryptophthalma","cryptophysoderes","cryptosporina","crytochilus","ctenoimbricata","cuatro","cucharas","cuculidae","cuculliae","cucumerina","cuiabai","culama","cultrigaster","cumbasonum","cumminsiella","cuneilobatus","cunninghamianum","cupreochalybea","curtiaristatus","curticrus","curtilamellata","curviformis","curvipenis","cyanochlorus","cyclodesma","cycloneuralia","cyclosora","cyclotis","cycnoderus","cydistinae","cylindrocarpus","cymatocarpus","cymbriaella","cymophorus","cynanchiflorum","cynedesmus","cynoctoni","cyphoderia","cyphoderiidae","cypridinoidea","cyrenida","cytherissinellidae","dactylopteni","daedalia","dallicordiidae","dalpia","dalquesti","daltoniaecarpa","damalinia","dasycnemis","dasycrotapha","dasypogonini","davidsoniae","dayaoshan","deasonia","debalsaci","debrajiana","decaphalangium","deciduana","declivitatum","decorites","decorticata","deflectus","deitersi","dekkanus","delclosia","deliquum","deloachorum","deltavjatia","dendroarabis","dendronephthyphagus","deniseae","densibracteata","densiserratus","densisorum","dentatherinidae","denticollaris","denticulalis","denticulipes","depressiferus","derasocobaltinus","dercylini","derecyrtini","derica","derouetae","desaussurei","desertibacter","desmaresti","desmoceratoides","destacar","detris","deuveiellum","devauxi","devergescens","devignati","diaboliella","diachrysa","diadocis","diaeus","dianaria","dianxibeiensis","diaphanocypris","diaspros","dicephalospora","dichetophora","dichilocraspedon","dichodon","dichotomica","dickdellia","dicolecia","dictyostelida","didymictis","didymochrysis","diensti","difficilana","digitalia","digitata","dilitara","dilleriella","dillwyniana","dimisophria","dimochla","dimorphanthera","dinocosma","dinophasma","diomediae","dioryctriae","dioscurea","diotrophorus","diploglyptus","dipteridae","dirfica","dirias","dischematalis","discimita","disciphania","discodon","discolia","discospira","discostromatidae","discovery","disiens","disordinata","dispar","disparia","disparicollis","distata","distentifolium","ditrachybothridium","ditrogalis","diuturnus","diversitermes","docoglossa","dolbyi","dolerosa","dolichoderinae","dolichoderoides","dolichoplectra","dolichowithius","dolioflagellomera","dolliata","doloisia","dolosis","dophora","doratopsylla","dorcasia","dorkadiaria","dormia","doshman","douglasprimusensis","dracaeneae","drilliola","drilus","dromidiopsis","dromodromoa","droogmaniana","drucealis","dryadonycteris","dryocoetes","dryocopinus","dryptitae","dszumrutensis","duarctopoa","duckworlhorum","duclouxii","dudleyae","duliniae","dulosus","dunnya","duospinum","duplicornis","duprixi","durbana","duskei","dutkevichites","dysgenopsyllus","eatonella","ebbelsii","ebrius","echeilea","echelatus","echigoana","echinastra","echinocephala","echinorhynchida","echinovirens","echinuscodendrium","echippigerum","echonitor","ectemnorhinus","ectenesseca","edanioi","edaphosauridae","edestus","edetanum","edithais","efluxa","egeana","egestoides","ehlersiae","eiphasos","ekatherinae","eknomisis","elassoctenus","elbayensis","electrocrania","electrofuscus","elerobi","eleutherospermi","elinguis","elkoanus","elleanthodiceras","elliptifolium","elongatobractea","emarginelloides","emblemaria","emmiltos","emydopidae","enchalcoa","enchodelium","endochroa","endophragmiopsis","enicostemmatis","entalinidae","entomogonus","entypus","eomacropis","eopsychops","eorasaurus","eoscapherpeton","eoseira","ephesiella","epichalca","epimetalla","epitripta","equisecta","erebearia","erenitus","erennidae","ergodes","eriodictyonis","ermienae","errolichthyidae","erythana","erythraena","erythromeris","erythrorhamphos","escoces","esquamata","esterhuysenianum","etorofensis","euanoma","euathlus","eucaudomyiidae","euceratoneis","euchana","eueolidoidea","eugraphis","euloewiodoria","eumeristis","eumicrini","euneuron","eunomia","euphysothrips","euplectus","eupolymorphinella","eupulcher","eupulmonata","euritina","euritmia","eurukuttarus","eurychlidonis","eurychone","eurygonia","eurypilus","eurystictus","eurytiches","eusemionopsis","eusemoides","eusisyrum","eusyrophoxus","eutetraphae","eutrichiurides","euzerconidae","evonymella","exasperatula","excelens","exclusaria","excuratum","exstipulatae","extendorum","eyipayipi","eytelweinii","ezodda","fabespora","fabianorum","factoris","faculta","fadyenia","fagacarus","fagildei","fagotiidae","fajardi","fakfak","falanense","falcatalayex","falcicarpae","falciterebra","falvisectalis","fanseriae","fastigiatoramosum","fastigo","faucibarbara","faustiella","favocassidulina","favonicus","favosifolium","favositinae","fellodistomidae","femorata","fenxli","feraliini","fernandezgarcesi","ferrea","ferreroi","ferrobacteria","ferwillemsei","festulpia","fibrinflatum","fictitia","fictrix","fijianus","fijivirus","filamentata","filamentosa","filiformis","fimbricoxa","findens","findersi","flabellifera","flabellopora","flavangularis","flavicurvata","flavinucha","flavispicum","flavofemoratum","flavopleuralis","flavotaeniatus","flavusella","flectonotus","fleurei","flexicaulis","flexiclymenia","flexilissima","flexistyloides","floracoccus","floravillensis","floridicola","florisi","flustrina","folliculata","fontellana","forelii","foresteriana","forillonaria","foroiuliensis","forskoehlii","forticarinata","fossidorsis","fraglis","franceii","franzdaniela","fraudulentaria","fraudulosus","freyomyia","friedrichiae","frisingensis","fritzwagneria","frolovia","frutillaria","fthiotidensis","fuergiana","fujiansis","fukayai","fukugakuchiana","fulgidella","fulvastrum","fulvifusalis","fulvobrunnea","fulvohirtum","fulvomarginatus","fumigans","fumoferalis","furcatus","furculana","furnishinidae","fuscatrix","fuscinota","fusciventis","fuscoaeneum","fuscoapicella","fuscothorax","fusilieri","fusulculus","gabbioceratinae","gabillytes","galbinaria","galeansellia","galgula","gambogia","gammae","ganapatiella","ganella","ganguli","gannoni","gaoligongshanensis","gariensis","garuus","gassanense","gaudini","gavisus","geganius","geigyi","geleverjae","geminipilis","genicularis","genophantis","geococcyx","geodes","geodiplosis","geophagus","georgecraigius","georghioui","gephyrogramma","geralda","geraldtonensis","ghardaqanum","gibsonella","gibsonhilli","gigantocapulidae","gigantopygus","gigantorubra","gigantoscorpionoidea","gilanica","gilleti","gilsonichrysis","ginibitohia","ginkgophyta","gisara","glaboabdominalis","glabrimargo","glabrimpressum","glabropilumnus","glaucelloides","glaziouana","gloiocolax","gloreus","gloriamaris","glosus","glyocyclus","gmeineri","gnathocera","gnophos","gobbettia","goetheoides","goldschmidti","gomontia","gomphreneae","goncen","gondwanica","goniurosaurus","gonothyraea","gonyaulacoidia","goodfieldi","goodwoodensis","gordioida","gorgops","gosobius","goupillaudina","gouvernoni","goweroconcha","grancarovii","grandistylum","granicauda","graniger","granimanus","graphania","graphomya","grassmani","greenmanianum","greenwelliae","greeri","gregariella","griffinia","grimontia","grossefoveolatus","grossepunctatus","groveolopsis","grypoceras","guairense","guaitecae","guanajuatensis","guanomyces","guiananana","guihua","guinnae","gymnoceros","gymnomorphus","gymnophrea","gymnoscutellatus","gymnotoplax","gynopeltis","gypsochroa","gyrothyraceae","habenifera","habrophila","hachimantaiensis","haddeni","hadromischa","haeggochiton","haenschiella","haesselbyholmiensis","hagenbecki","haleakala","halichondriae","hallex","hallonympha","hallsi","halomonadaceae","hamipalpis","hanamauensis","hankensis","hannense","hapalopa","haplocyoninae","haplotaxina","haptogenys","hapuuarum","harenamica","hariolator","haripurensis","harpanor","harrisia","hartmannulidae","hartmanthus","hastingsi","hauschildianus","havila","hawbicum","hecatorgnia","hechtioides","heddleichthys","helianthialis","helicinella","heliomystis","helionidia","heliopa","heliopsis","heliopyrgus","helluonina","heluanensis","hemerobiella","hemerophila","hemhem","hemianospilus","hemicyclicum","hemidactyliinae","hemigordiidae","hemilecanitidae","hemimarginula","hemistropharia","heppleana","heptasema","herklotsichthys","hernandaria","heronia","heronum","hesycha","heteronevrus","heteropachylus","heteropanope","heteroparamera","heterospina","heterotominae","heugteni","hexagonae","hexaradiata","hexatarsostinus","hexovulata","hialmari","hiatula","hibridum","hieracifolia","hieroglyphyca","hillifera","himalajenses","himalayacetus","hippodice","hirtilobata","hirudoidea","hispaniolyna","hivaagrion","holochrysis","holophlebia","holovestita","homeria","homochirus","homoeoctenia","homoeosomae","homoplatus","homopterus","honanodon","hotooworry","howaia","huairouensis","huallagana","huancayensis","huangensis","hucketti","hugotdiplogaster","huitzmolotitlensis","hulaquina","humaciense","hummel","hummeliana","huntella","huriana","hututsi","hyalodiscaceae","hyalopyrgus","hydroisotoma","hydrometra","hydrotalea","hydrotherikornis","hypachroa","hypapocheima","hypermaculata","hyphochytriaceae","hypholomoides","hypocephalini","hypochaeridoides","hypocline","hypolispa","hypoplexia","hypospilata","hypselosomatum","hypsina","hypsipyrga","hysterolitinae","ianrichardi","iaoensis","iberobarbarus","ichneumia","ichnolepida","ichthyosomoides","ictonyx","idaecamenta","idastes","ideratini","idiostolidae","ifanidianae","igarassuensis","ignecolora","ignifacies","iljiniana","impalpabilis","improvidus","inadmirabilis","inclusana","incubitor","indistinctaria","indolens","indorhynchiinae","indricotheriidae","indubius","inebriantis","inefficax","inermosyllis","infanticida","infasciatum","infectus","inflaticeras","infraflavescens","ingliseria","ingogius","inositophilus","instabilaria","instabilipes","interrogatus","inthanonica","intonsus","intrigella","inyonensis","ioannoui","ionescui","ioogoon","iophana","irapeanum","iriditinctus","isalaux","isalensis","ishidai","isidiosella","isocrinida","isoetopsis","isommata","isotemnidae","isoxys","itabaiana","ituribisciensis","itwarra","iulomorpha","ivanovae","iwamai","ixiophyllum","jacuipensis","jaimeramirezi","jajiensis","jameela","janikornae","janirioides","janosik","jansei","japenensis","jasminaria","jehlius","jejudonia","jiangduensis","jianlingensis","johnpaxtoni","johnwurdackiana","jokaquarta","jonssoni","joshuella","jouiniana","jovoensis","juenthneri","jugatoria","jujuyensis","juniperoideae","juropeltastica","juxticata","kabogoensis","kaibatonis","kakaberrans","kalidupa","kalimeris","kalingenwae","kalonis","kamacops","kamande","kamengense","kamitakaranus","kamtschatkensis","kananaskensis","kandymella","kangeanus","kapsanensis","karadenizicus","karataefolia","karateghinicus","karawajevi","karwara","kasungensis","kawaihoaensis","kefersteiniana","kelelensis","kemmisi","khairei","khuzistanicus","kikibudiamini","kiklonana","killiasi","kimurae","kinabalum","kingdonia","kirstenboschensis","kirthari","kitagawia","kivuanus","kiwuensis","kiyokoae","kladotyphlus","kleinpeteri","klementii","klenei","koilomera","kokeshia","komokia","kopsiopsis","kosemponica","koshiana","kosnipatensis","kostylevi","kroyeri","krusadensis","kuhnistera","kukalova","kungae","kunikikoana","kunjerabi","kuomeii","kuschei","kushmasarensis","kusiacus","kustorae","kuturnee","lachneifolia","lachnocladium","lachnoides","lactate","ladismithiense","laevitarsis","lagarocladum","lagarosoma","lagenina","lagerara","lagopodes","laitimtik","lamades","lamellipodia","lamellothyrea","laminiformis","lamora","lamottiana","lamprospilus","lamuralla","lamutica","landoi","langendoenii","langerhansia","lanicaulis","lanthanostegus","lanzenbergeri","laororshanae","lappodes","lapsariata","larainae","laristanica","larrainiana","lascaris","lasioderma","lasiopterinus","lasiospermus","lateretuberculatum","lathridelmis","latipetiolata","latisporum","latitegminis","latocorophium","launayi","laurenticus","lauronia","lavalettei","lavbleckiana","lavernellus","laversiidae","laxipilosum","lecanoricola","lecithodes","lecythion","leensis","legerae","leiboldiana","leichenina","leiocassis","leiopelmatidae","leiotelus","leipoxaides","leiramara","leliae","lemoultana","lensia","lenyrhova","leocrinidae","leonensis","leonfairmairei","lepidoteuthis","leptocaudus","leptocera","leptochilichthys","leptoiulini","leptojulis","leptolomoides","leptomenaeus","leptomma","leptomorphum","leptoschendyla","leptoscirtus","leptosomaheristus","lerina","lesegneuri","letepsammia","letilae","leucadea","leucalis","leucanepsia","leucanopsis","leucolaema","leucopodella","leucopsarus","leucorhodum","leucosilia","leucotabanus","leuzeopsis","levanidovorum","leveyi","levicaris","leviense","levisella","liaoxipterus","libidoclaea","lichnasthenina","lignarium","lilaciflora","lilacino","lilliformis","limenita","limnogenneton","limothrips","linanensis","lineitergum","lingianus","linifoliiformis","linocerus","linpingensis","linshuiensis","linwenhsini","lionychini","lioptilaria","liosomeniidae","lipocarpa","lissodema","litholampriminae","lithosiformis","litoricola","lixinites","llanoaspis","lobigenis","lockhartioides","loesneriana","loeuffintesi","lombardiana","lomyenensis","lonchocephalus","lonchodactylus","longae","longicomosum","longifibula","longipendulum","longiscata","longisellatus","longispinata","longistipulata","longisubulatus","longivelis","longusorbiidae","lophochroa","lophopyxis","lopriorea","loranthiflorum","loranthophila","lornadepewae","lotoxalis","lubaria","lubilensis","lucidifrons","lucifugus","lugdunarium","luikae","lukaschia","lumsdenae","lunatum","lungshenensis","luodianense","lupatus","luridavolta","luristanica","lusingaense","luteifrons","luteileprosa","luteosignata","luxiense","lycaenops","lycaeopsidae","lycocarpum","lygria","lysiphyllum","maamingidae","mabanuria","mabellarca","machairodontini","mackaviensis","macrocarpata","macrocheila","macrocornutus","macrocremastra","macroglossini","macrogryllus","macrolabis","macropharyngodon","macrotarrhusina","macrotegmenta","macrothylaciini","macsweenyi","maculaalba","maculatus","maculimembris","madathisanotia","madenphloeus","maestingellus","magadinensis","magallanes","magalonii","maghrebiana","magnacalx","magneta","magnetensis","magnispiracularis","magnopunctata","mahmudbejovi","mahunkaisimilis","majorica","majusdentatus","makandal","makarcevae","makawao","malabaris","malaxioides","malchanovi","malpighiales","malybo","malziana","mamigna","mandanus","manfeldtii","mangrovae","mannena","mansonella","mantamonadida","maoricoris","maquiensis","maquipucuna","marathonitinae","marcellaria","marcomesostoma","margarostigma","margelanica","marisaurus","marisminoris","marmarensis","marmarodeceia","marmoretta","marmorii","marnkalha","marojejiense","marquesa","marriana","martynovae","masaiensis","mascarone","maseri","mashanense","mashuana","massariola","massaspicula","mastopomatoides","matacarus","mathuriana","matiganae","mauroprosopa","maurya","maximiliani","mazama","mbamou","mbenjii","mcnabi","medioscutellatus","medwayensis","meerausi","megalobrunneum","megalomycter","megalorrhizum","megalothyrsa","megalyridiini","megamphida","megaoonops","megapex","megateles","megispilota","meigangae","meilloniellum","meingangbii","melakeghebrekristosi","melanchares","melanchlaenus","melanicterata","melanocausta","melanophyllaceae","melanopneumon","melicopea","meligastra","melissimum","mellici","melonius","melphidippella","meneghinianum","mentawir","meoticaops","merdrignaci","merensis","mergense","merhynchites","meridiocarpathicus","merriamosauridae","merularia","mesamidostomum","mesembriomys","mesoepisternalis","mesogitanus","mesolestes","mesoleucalis","mesonotochra","mesosindris","mesostegia","mesovelia","messicobolidae","mestorus","metabacterium","metacerylon","metalacurbs","metallicut","metallophilus","metanaga","metapterygota","metapulvinata","metasidama","metatensis","metatrichini","metellona","metopiora","mevesi","meyerinkii","michaelisi","michelinoceratida","michoniana","micralabastra","micralsopsis","microbahia","microcarunculata","microcephalophis","microcorses","microcyma","micromesozonata","microsciadium","microscopicus","microstethum","microstriatus","microviolacea","micruropodidae","mictophileurus","mikatae","milishai","millerburtonia","miltochristalis","miltoni","mimeugoa","minarzianus","mineirosensis","minhensis","minirosea","minorbrachyblasta","minyaense","miocaenica","mionatrix","mionebulosa","miradornsis","miristigma","mirkinii","misiones","missionensis","mistassinica","mitonia","mixoscia","moathi","mochae","modicoides","moellendorffi","moerisioidea","mogollona","mogorka","mohavanensis","mohavea","molochina","monachophyllum","monactinus","monalita","monapunctata","mongiensis","mongoz","monochorhynchus","monotrete","monreali","monroeae","montandoniola","montanetana","montemaris","montieli","moratiana","morosevitshae","morosphaeria","mosambicensis","moscoviensis","motleyi","motuweta","moussavoui","moutiai","moutouchi","msuata","mugangensis","mulgedii","mulibrinus","mullerrutzi","multareis","multicristatella","multilata","munbyanus","mundeola","munissii","muraenolepis","muricola","murieliae","murinocardiopsis","murmurensis","mutilla","mweroensis","mycobacteriaceae","mycterobius","myialginae","myocaster","myohyangsanica","myopius","myopsychoides","myoxophora","mystriocentrus","myxodictyum","nacladense","naevana","nagamasu","nagatoella","naiguatana","nakamuriformis","nakanai","nakipa","nakuru","nalepellidae","namacus","nangra","nanniae","nannoconus","nannosteinmannites","nannosuchus","narmanica","nascioides","nassatula","nassipa","nasturtium","natalicius","natriophilus","nattaiensis","nausibus","nautiliaceae","nealecypridini","neatodes","necallianassa","necopinatidae","necopinum","negasilus","negibacteria","negroppia","negundana","neibae","neimaniae","nemosoma","neoacutidens","neoaves","neobasalis","neobradyidae","neocichla","neocteniza","neofascipennis","neoflavicans","neohornibrookella","neomisellina","neonola","neopamera","neoperlops","neopiliferum","neotabidus","nephelioides","nephrodinium","nepogomphus","neptunoides","nerens","neseotes","nesoriella","nestia","netica","neuontobotrys","neurigrammalis","niamiae","nicarete","nichofii","nicholai","nictheroyana","niglarus","nigricapita","nigricrissa","nigriguttulus","nigripennus","nigriscuta","nigriventus","nigroaxillaris","nigrobrunneana","nigrocupuliferous","nigrofactum","nigronaervalis","nigropeltata","nigrova","nikanoria","ningchengensis","niphocera","nitrariifolius","nivemaculata","nivenorum","niveociliaria","nixoniana","noaeae","noctuitaria","nodilirata","nomadus","nonornata","nonstylatum","nordenstamia","noscibilis","nosterella","nostochopsidaceae","notanisus","notati","nothosaerva","notoderus","notogomphus","notoleuca","notonectoides","notothixoides","novahebridensis","novobritanniensis","nublians","nucleatus","nucleosus","nullamphiura","nulliferana","nuttallielloidea","nyakaensis","nyanzense","nycthemeraria","nycticorpum","nygmiae","nysiusae","nyssanthes","nyssonini","oblenita","obliquans","oblongissimus","obovatocarpa","obsequiosa","occulta","ocellicaudus","ocenebrinae","ochridaphe","ochrochrous","ochrodorsella","ochterus","odobenocetopsidae","odontonotacris","odontopsammodius","odontopygidae","oedothelphusa","oelandinus","ohlertidion","okadaiidae","okeani","oksalianum","oldroydiana","olgashelestae","oligocarinatum","oligophyton","oligospilota","oligotrophicum","olliffiana","olmediopsis","olmosensis","olmotega","omalonomus","omariusalis","omogonis","omopyge","onchocalanus","onophas","onychiurini","onychogammarus","onychoglenea","oochoristica","oosomini","opadius","opalinula","opatrina","operantis","ophiochalcis","ophiopogonoides","opifexi","opopaea","opulentium","orangica","orbicularius","orbipora","orchonicus","ordunyai","oreopithecus","oresbia","oresbios","orgyale","orichalcescens","orichloris","orisasini","orithopsidae","ornatodorcadion","orohenense","orongia","orsunius","orthomeroides","orthoraphis","orthostichopsis","orthotrichum","osellae","osoensis","osoriana","osperlioceras","ostuchiensis","oswaldia","otallensis","ouadanei","ouricanense","ovatiguttatus","ovicercus","ovilis","oxycarenidae","oxycerini","oxymegaspis","oxyruncus","oxystoma","ozokeriticus","ozotomerini","pachmariensis","pachobex","pachycaulon","pachycoccyx","pachydeminae","pachynema","paddeui","paduana","paedobisium","paenacuceps","paenedentula","pailensis","palaeocarcharidae","palaeophonus","palaeosystenus","palawanella","palenquense","palesoidea","paleuthygrammatidae","palinuroidea","pallidetinctus","pallidicostalis","pallidohirtus","pallorus","palmatus","palmetincola","palmivorus","paluosa","pampiconus","panacina","pancallia","pancici","pancrustacea","paniferum","panochthus","pantecphylini","panticosus","papillatus","papillopilosa","papillospora","paraansobicus","parabactridium","parabarossia","paraborsonia","parabretti","paracanthonchus","paracavisoma","paracelastrus","paracheiridium","paraconara","paractaeopsis","paracuminiseta","paradiplogynium","paradoxosomatinae","paradrina","parafiorinia","parafungicola","paragonimus","paragraminis","parahieroglyphica","parahuahindensis","parajauravia","paralamprotatus","paralphenum","paramaculipennis","paramevania","paramyinae","paraphiloscia","parapoxvirus","pararapana","parareolatus","parasanjuanensis","parasicyos","parasphaeria","parastemon","parastenoterys","paratheridula","paratriaina","paratubiluchus","paratumbex","paraumballaensis","paravenia","paraves","paravorae","pardoanum","pardochrous","parelegans","paresmus","pareulepis","pareutaenia","pariry","parjumanensis","parspeciosum","parthicum","parvifoliella","parvipunctus","pascahinnites","pashupati","pathana","patheticus","patritiodemus","pattersonellidae","paturattensis","paucichelatus","paucipetala","paucivenosum","paulesca","paulianaleyrodes","paulocordata","pausandra","pavelitus","pavichii","pearceanus","peartiae","pectinatum","pedimarmoratus","pegazzanoae","peihonga","pelamidis","pelegrinoides","pellucidellus","pelobium","pelodesmus","pelotomaculum","pempelioides","pendulosa","pengboense","penneysii","peonza","peraccai","peranemiformis","percludalis","percolens","perconfusa","perconicus","perdica","perfectana","perflaveola","periclimenes","periglabellus","perigrinus","perilimicron","periploceae","periquesta","perisphinctinae","peristerensis","peristrigata","perlatum","permagnifolia","permiscus","pernyii","perostia","perpunctulatum","perseae","persimplexella","persinuata","peruvensis","pervasata","pervulgaris","petheri","petrocrania","petrograpta","petroleuciscus","petrolinensis","petrorsus","pezomantis","pfefferiteuthis","phaenohemiandrus","phaeocroa","phalacrocoraca","phallopiratinae","phanolophus","phantomus","phascolomys","phelloxylon","phemonoides","philichthys","philipomyia","philippinum","philocalus","philocoprella","philomena","philosycus","phinneyi","phitosianus","phlepsopsius","phloxidiflora","phoemonoe","pholcochyrocer","phormisalis","phoxapex","phrixus","phycinae","phylloceratitida","phyllochaetopterus","phyllodinarda","phyllorachis","phyllospongia","phylochrysa","phymatopteris","physcomitrellae","physoglenidae","piasusalis","piazzaria","piceolus","picicolor","piezotrachelini","pilatoi","pilifilis","pililoba","pilsbrytyphis","pimaensis","pinacopodium","pinguella","pinidumus","piniradicis","pinnatifidum","pinnicerca","pintadus","piqueriae","piquerioides","pirapo","pirarense","pirizanica","pirriei","pisacomensis","piscacauda","pisciodorus","pisidium","pissina","pithyella","pityophilus","placocista","placodops","placotrochides","plagiognathi","plagioholocentrus","planaltinella","planipedonus","planistylus","plantaginoidea","plasmodiophoromycetes","plastica","platyacantha","plecopterorum","plectrelgraecum","plectrocerum","pleionotoma","plethokrossus","plethotretus","pleuranthoides","pleurites","pleurobotryosa","pleurodomus","pleurofascia","pleuronichthys","pleuropasta","plicosula","pliculosa","plinthiza","pliosauridae","plumacea","plumeriifolia","pluricapitata","plurosorus","pluvia","pninaella","poblanus","pocopunctella","podaucheniellus","podonectriaceae","poecilator","poliona","polititapes","polosi","polychrosis","polycladae","polyfimbriata","polygamiae","polygonanae","polymorphidae","polysentoriformes","polysperchinus","polytmus","polyzonatus","polzbergia","pomeroyi","ponerus","pontisquamata","populifolia","porchatensis","porochordus","porosa","porthesioides","portoricoscia","porulosa","postcervix","postdentaria","postfasciculata","postmediana","postoparvipuncta","postpoliatus","postsemipluripuncta","potebniamyces","prabha","praecursoria","praephacorhabdotus","praeprocris","praestolatorius","pratumidiscus","pretenderis","primevus","primigenus","prionotemnus","prismatocarpus","proarchus","problematodes","proboscidoplocia","probosciformis","procerocheles","productinae","profundocythere","projecturata","projicienfrontoides","prolaminatus","prolaupala","prolixifasciata","prolixistyla","promirotermes","proniphea","pronoritidae","pronotacanthus","prorepentia","proriedelia","prosadiya","prosectoides","prosenactia","prosobothrium","prosopalpus","prosorhochmus","protocardiinae","protochitonidae","protoglomeris","protoiurus","protopidius","protoreticulata","protorhyssalodes","protosciarella","protosculptilis","protrama","psammoticus","psarisomus","pselaphostena","pseudacanthopale","pseudachorutella","pseudacroleptus","pseudanurophorus","pseudapoderus","pseudargentata","pseudartiocotylus","pseudephedrus","pseudincoides","pseudoalstonii","pseudoarmillaris","pseudoborniales","pseudobothrideres","pseudobotrys","pseudochroma","pseudodiplotaxis","pseudodoliolininae","pseudoeurydesmella","pseudoglauca","pseudogonitis","pseudogyrinocheilus","pseudohookeriana","pseudoialapennsis","pseudokovacevici","pseudomacrophya","pseudomaroccana","pseudomarsupidium","pseudomarteli","pseudomassilina","pseudomedaeus","pseudoncholaimus","pseudonudicaulis","pseudooblongum","pseudopallescens","pseudopannaria","pseudopasilia","pseudopentameris","pseudopiceus","pseudopithyella","pseudoptiletes","pseudorchestes","pseudorichia","pseudorthonychiidae","pseudosaxat","pseudosteini","pseudosymmorphus","pseudothyretes","pseudotrematodes","pseudotriphyllopsis","pseudotristicha","pseudumbellata","pseuduncifera","pseustantha","psiloderoides","psychanisa","psychroteuthidae","pteleaevagrans","pteridicola","pterineidae","pteron","pteropelyx","ptilocladioides","ptilopus","ptochopis","pubistylosum","pudicula","puiggariopsis","pulchricolor","pulchrinodaceae","pulcia","pulcratis","pultiphagonides","pulvifer","punctifimbriata","punctillaris","punctoterminalis","purdonellinae","purpureoplagiata","pursellii","pusanus","pusztae","pycnocephaloides","pycnophyllopsis","pycnopodia","pygocentrus","pyramidata","pyrgotomyia","pyrifer","pyrimidalis","pyronasi","pyrrhonotum","qianyiyongii","qinglongopterus","quadrabdominalis","quadrataria","quadratirostrata","quadriannellatus","quadricellulata","quadrifalcifera","quadrinotatiforme","quadristrigaria","quasiborelis","quasiindicus","quercusilicis","quinquicincta","quisquiliarius","rabainus","raceki","rachelii","racovitzae","racovitzia","radicosus","rafesi","ralstoniae","ramicephala","ramoncaracasii","ramoniana","ranitomeya","rankini","raphaelandrearum","raphigastra","raphis","rapola","rarensis","rarotonga","rautensis","rawuense","reaghi","recticommata","rectopalicus","recurvilabre","recurvistigmalis","reddii","redemptum","rehbergi","reitteri","rembangensis","renaudiana","renauldi","reniformis","renipiscarius","renivitta","repletana","rescissa","residis","resinophaga","retextus","retingensis","retrospiculatum","retusa","rhabdomolgus","rhachicoryphus","rhacoindustiata","rhadinosa","rhamphostomella","rhayatus","rhealis","rheumaptera","rhinocolura","rhinorhynchini","rhiostoma","rhipidomellinae","rhodaphanes","rhododendronis","rhodophilides","rhomboivora","rhombonicis","rhombostilbella","rhopalodes","rhopalopus","rhymnus","rhyopsocus","ribeiroia","ribium","richardsi","richerdeforgersi","ricinoidoidea","ricketti","rifana","rigiduliformis","rikuzenica","rimipontius","riocauchosanum","riparis","ripidopteris","risoba","rithrogenophila","rodentini","rodriguezus","rogata","rolandmuelleri","romanchella","romeii","romulanigra","roschanicus","roseicostis","rosellei","rosemariana","rosenvingiella","roseobrunnea","roseoculma","rosettiae","rosettii","rosica","rosicola","rossmania","rostamii","rostraloides","rostrigerum","rothfelsi","rotulina","rotuloplocamia","roxasella","ruaumokoi","rubeschi","rubicula","rubrigastra","rubrisetum","rubronervat","ruderatus","rudiastra","rudolphisimonii","rufistigmosa","rufitarsoides","rufocastanea","rufofuscula","rufolimbaria","rufosatellitia","rufotactus","rufotinctus","rugifolium","rugostriatus","rugulata","ruhlandiana","ruiliensis","rumphiensis","rutaneni","ruzskyellus","ryphea","sabatoi","sabbadini","sacajaweae","saccharophilum","saccopetaloides","saccopharyngidae","sacculoppia","saeniensis","sagaminemertes","saguaroicola","salamander","salatini","salinellidae","salmositica","salsburyana","salsum","salticidites","saltursus","salvagopselactus","salvazi","samacar","samolethrius","sanata","sandbergeri","sandrabatis","sansebastianus","santaelensis","santoamarensis","santubong","sanyali","sapotaefolia","sapphirhinus","sapporona","saracrinus","sarcocyphos","sarsonuphis","sasakii","sasimella","saturator","sauciatus","savigniorrhipis","saxemarina","saxeseni","sbarbari","scalebrina","scansoria","scaphidiomyces","scapiflora","scardiinae","schabalkini","schacheri","schachimardanicum","schaffneri","schajovskoya","schellwieniens","scherfi","schizacme","schizocharis","schizochiton","schizonema","schizopus","schizotaldycupes","schminkeinae","schraederi","sciocyrtinus","scirpidium","sclateria","sclerieae","scleropteroides","scleropycnis","scoliacantha","scoriformis","scorpaenoidei","scoteinum","scutellina","scutuliformis","scybalophagus","scythromorpha","secluse","secostruma","secretas","segovicus","seilerni","seirospora","sejongensis","selaserica","seleensis","selenana","selenariidae","selenopsocus","semibraccatus","semicrocea","semilissus","semionis","semisplendidum","semiticella","sepsidae","septicemia","septorispora","serangodella","seraxensis","seriespinosum","serolina","seroloniscus","serpentinum","serradraco","serranicola","serranochromis","sertalis","sespinaea","sessilifructa","sestertiella","setabara","setantops","setaphora","setispinae","setylaides","sevastjanovi","sevenetii","sevosa","sewertzowii","sexdendata","sexspinus","shackletoni","shataii","shebania","sheeppox","sheidaii","sherbrookei","sheshanensis","shigernaei","shiloensis","siamophylla","sianenna","sibaya","sibayakensis","sibbaldi","sibukoensis","siccanea","sichnostola","sicinae","sieburgi","sigilla","sigmomorphina","signipennis","sihoensis","silhouettei","silolona","silphedosuchus","silsilesii","silvaniformis","silvicolus","simetitia","similicornuta","similiphora","simsata","singalorum","sinharajaicus","sinoarundinaria","sinobryobia","sinotianschanicum","sinuosociliatus","sipunculoides","sittae","sivarajiana","slatinensis","slevinii","smefarka","smelowskia","smyrnae","snellii","sochinsogonia","socotricola","soenderupianus","sogalis","sogandaresi","sohayakiense","sokkaejaecystis","solenoxyphus","solitariana","solorzanoana","somatania","sonderophycus","songpanicum","sonitans","sonneratioides","sonogrus","sonotetranychus","sophista","sordidopapposa","sorediifera","southgeorgiae","soyoae","spanospicula","spathor","spatulicornis","spelaeum","speoides","spermodea","sphaeroconcha","sphaerodoridium","sphaerogerinidae","sphaerosporella","sphaerozone","sphagnorrhiza","sphenorhynchus","sphenotretidae","sphingidites","sphingopyxis","spilosomini","spinigerum","spiniplenus","spinostylus","spiralifera","spirifex","spiroberotha","spirotecta","spirotectinae","spongiphilus","sponiifolius","sporocosma","springvaleensis","squamatellus","squamulosula","stachysi","stacota","stagona","staiusalis","stalina","staphylocystoides","stathmodera","staxrudi","steccherinaceae","steinbergensis","steinhardti","stellariifolius","stellatacula","stellatosporea","stenanthera","steninae","stenocarus","stenoetrus","stenolejeunea","stenolobium","stenometopa","stenopetalum","stenostygninae","stenothora","stenotritinae","stephanophyes","stephenseniellus","stereograpta","steveniella","sthenozancla","stibapicalis","stigmatogobius","stigmatotheca","stiphrogyne","stipuloideum","stirlingia","stirojoppa","stoeberhinus","stolonacea","stonesfieldiana","straatmanni","stradbrokense","streyana","strictiforme","strigialifusus","strigillatus","strigosipes","striposis","stroemi","strophingia","strophis","stubblefieldi","stumkatae","stygocarididae","stylodesmus","stylopauropoides","stylospora","stylus","styphlorachis","stypus","styraconixidae","subaana","subargillacea","subcongoensis","subcorrosus","subdecursivum","subdicarpon","subfinitimella","subfurva","subglabrum","subhuti","subinformis","sublignosalis","sublineatus","submelanaria","subneotrichius","subobliteratus","subota","subpectinata","subpelignus","subpellucens","subplacens","subpohlioideum","subtakecallis","subterblancum","subterraneoides","subtrivialis","subumbrosa","subvariocostatus","subvillosula","subxanthippus","subyusou","sucofera","suduirauti","suffusinervis","sugillata","suiferens","sukhothai","sukotaiense","sulcinerva","sulfophila","sulfureolus","sumensis","summergold","supraglandulosa","surculare","suspinata","susumia","svecica","symmetrosporaceae","symphorosus","synagriformis","synaphe","syncapna","syndelphax","synercta","syniulus","syntrita","syntrophus","syringilla","syringopharynx","syzygoniinae","szulczewskii","tabernai","taboga","tachangensis","tachillanella","tachiniscidae","tachinoides","tacoaraphaga","tactiquensis","taeniolatus","tagetiflora","tahulaspis","takachihonis","takahagiensis","takhtajani","takhti","takuiricus","talaena","talitridira","tamagohanum","tamaricaria","tamaska","tambori","tambourinicus","tampiusalis","tanagami","tanalanacris","tangaroa","tapadas","tapinillus","taraxacicola","tashkurensis","tasmanentulus","tasmaniae","tayoensis","tchupalensis","telata","telegdirothi","telesii","teliformis","telmatobia","telosperma","telotylenchinae","temascalense","temnosceloides","tempisque","temulata","tenacifolium","tenacis","tenaspis","tengstroemella","tenuicrustaceum","tenuilamellatus","tenuioides","tenuipalpoidini","teramachii","terborchii","terebraeformis","teresopolis","teretiachaenium","termitarum","tersonderi","tessella","testaceovittatus","tetragattii","tetragonocarpum","tetraleberis","tetrapila","tetrapunctigera","tetrasporoides","thalassemae","thalebanii","thaliana","thallicola","thallostoma","thamfaranga","thamugadensis","thapsianae","tharsanthes","thenardii","therinia","thermomyces","thiofractor","thoracanthoides","thoracosphaera","thorictosoma","thymbroides","thyreoconger","thyrsoidea","thyrsolomia","thystas","thysvillei","tibetanophilus","tibiale","tibicinini","tibiovela","tibullus","ticinepomis","tietzae","tiflisensis","timanicum","timapeba","timothyei","timoutoides","tinoides","tipulidae","tishqu","tissanga","tobiracola","toganensis","tolganensis","tombolatoana","tombouctou","tonjolana","tonkienensis","tonnensis","topseyi","toraia","tororoense","tortuosivenosum","torvensis","touchardia","tovomitopsis","toxopeina","toxotes","trachea","trachygrapha","trachylepis","trachyuropoda","transilis","transversovittatus","travassosinema","trebida","trefusiina","tremataspidoidei","trematocarpus","tremicinae","trentinus","tretosterninae","treverense","triaenophorus","tribalasia","tricepoides","trichiatus","trichocarpum","trichonychina","trichopeda","trichophallus","trichosolen","trichosomoididae","trichothyriomyces","tricnicos","tridax","trifurcillata","trigonosema","trigonula","triloculina","trimamillatus","triplicalyx","triplonychus","triplophyllum","trisecphora","trisignata","tristrigaria","tritaenia","tritodynamiinae","tritoxidium","trophius","tropidocarpum","truchanasi","truxillata","trychnopalpa","tshukoticus","tsienii","tsimihetensis","tsitsikammensis","tsunekatanus","tsurutanum","tubatum","tuberculiforme","tuberorachidion","tucanti","tungchihi","turbonia","turkeyella","turkulensis","turpicula","turuchanica","tusimayusurika","tusimomeneus","tuticorina","tutuilaensis","tymicola","typhochrestus","typhoniinae","tzinella","ucetanus","udzungwense","uktaspis","ulceratalis","ulotrichoides","ultunense","umiatense","uncopaederus","undulitibiae","unguianalis","unguifortis","uniclypea","unimediseta","unipeltoceras","upermia","urarensis","urartuensis","urceoliporoidea","urgorrii","uriformis","uroballus","urodiabunus","urogymni","ushari","ushizanus","ustifumosa","ustyuzhanini","usurae","utahnema","uvifolium","uzunoglui","vacatella","valerian","validithorax","vallacerta","vanakripa","vanieria","vansttallei","varfer","vauereselli","vavara","veerapazhasii","vehemens","velaminosum","velebitica","vendettadeae","veneriglossa","venitalis","ventricostus","ventriosa","ventrolata","verbanica","verbeekininae","verluysi","vermaasi","vermes","vermiculifera","vernale","vernana","verniochreana","vernoniastrum","vernoniensis","verrugana","verticillitida","vertumnaliformis","vervactoraria","vespertillionis","veteranum","vexillocalyculatum","viaderi","vicinula","vidalamiini","viennae","vientianea","viperinus","viphius","virgato","viridenex","viridicaule","viscaianum","viscicola","vitatticella","vitrimentula","vittiger","volkanovi","volutidae","volvocaceae","vrangiana","vuillefroyanus","waigoeensis","wakiyae","wandelia","wanfenglinensis","waningus","wanumaense","wareipai","warhami","warrierianum","wasabia","waterhousiae","wayensis","webbela","weinreichius","wentzelellinae","wernerius","westergaardi","westrichi","wetenschappelijk","whippleanum","wightensis","wikkiensis","wilhelminia","williamsianum","wilmotorum","wilsonichthys","winchelli","winterbotomi","winthemiini","wintonensis","wugirogaense","wulikensis","wyandotte","wyliea","wyomingense","xamthurus","xanthosquamosa","xavantina","xenopodion","xerantifulva","xeringinia","xerophilaspidina","xiangguiensis","ximenans","ximina","xipotensis","xiximeca","xizanganus","xyleus","xysila","xystophora","yaetakaria","yaguara","yamadorianus","yamamurae","yamanei","yanbaru","yangzekiangensis","yasuakii","yavesia","yelicones","yezophora","yinzhengii","yokenella","yoshikazui","yoshinoi","ypirangae","ypresiomyrma","yuanica","yunlingense","yunnananus","yushanica","zabrosa","zacatecae","zaglyptomorpha","zaisanensis","zakonnikovae","zamenhofianum","zantanus","zeballosicum","zebricolor","zelandalbia","zemiodes","zeugicornis","zhoushanense","zhovtyi","zimiensis","zimmii","zooxanthellae","zophochalca","zoroaster","zosterodasys","zunigai","zwicknia","zwolferi","zygethobius","zygethus","zygogonium","zygopterorum"])}});
//# sourceMappingURL=app.37f3844bc9e14d4ec0d0.js.map